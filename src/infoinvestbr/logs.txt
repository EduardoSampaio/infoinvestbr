INFO     2023-03-26 13:00:21.264 request id: app - uvicorn.server:serve - Started server process [11224]
INFO     2023-03-26 13:00:21.264 request id: app - uvicorn.server:serve - Started server process [11224]
INFO     2023-03-26 13:00:21.264 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:00:21.264 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:00:21.265 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:00:21.265 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:01:32.371 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54049 - "GET / HTTP/1.1" 200
INFO     2023-03-26 13:01:36.288 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54049 - "GET /dcos HTTP/1.1" 404
INFO     2023-03-26 13:01:38.531 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54049 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 13:01:39.131 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54049 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 13:01:44.515 request id: None - main:customize_logger - Here Is Your Info Log
INFO     2023-03-26 13:01:44.516 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54050 - "GET /custom-logger HTTP/1.1" 500
ERROR    2023-03-26 13:01:44.517 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000206FA8E13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000206FA83F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000206FA83E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000206FA7AFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>
    │    └ <function subprocess_started at 0x00000206FCBDD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000206FA7AF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000206FCBBA170>
           │       │   └ <uvicorn.server.Server object at 0x00000206FA7AF7C0>
           │       └ <function run at 0x00000206FA8E2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000206FCC5EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000206FC4B9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000206FC4B9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000206FC4BB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000206FC40ADD0>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000206FA898610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020697...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000206FFB39480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000206FA898610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020697...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020697...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020697E5AB90>
          └ <fastapi.applications.FastAPI object at 0x00000206FFB39480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020697E27490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020697E5AB60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020697E5AB90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020697E27490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000020697E5AA70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020697E5AB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020697E27490>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000020697E807C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000206FD32A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000020697E807C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020697E5AA10>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000020697E807C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000020697E276D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020697E5A9E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020697E5AA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000020697E5A980>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020697E5A9E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000020697D81480>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000020697E5A980>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000206FD27DA20>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000020697DCBA30>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000020697E83B80>
                     └ <function get_request_handler.<locals>.app at 0x0000020697DCB9A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000206FD27C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'request': <starlette.requests.Request object at 0x0000020697E83B80>}
                 │                 │         └ <function customize_logger at 0x0000020697DCB910>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x0000020697DAD2A0>
                 └ <function run_in_threadpool at 0x00000206FCED2440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ ()
                 │     │         │        └ functools.partial(<function customize_logger at 0x0000020697DCB910>, request=<starlette.requests.Request object at 0x00000206...
                 │     │         └ <function run_sync at 0x00000206FCC0E710>
                 │     └ <module 'anyio.to_thread' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\to_thread.py'>
                 └ <module 'anyio' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\__init__.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x00000206FCC0C3A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ZeroDivisionError('division by zero')>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 867, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function customize_logger at 0x0000020697DCB910>, request=<starlette.requests.Request object at 0x00000206...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000020697E6C600>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\main.py", line 44, in customize_logger
    a = 1 / 0

ZeroDivisionError: division by zero
ERROR    2023-03-26 13:01:44.537 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000206FA8E13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000206FA83F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000206FA83E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000206FA7AFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>
    │    └ <function subprocess_started at 0x00000206FCBDD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000206FA7AF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000206FCBBA170>
           │       │   └ <uvicorn.server.Server object at 0x00000206FA7AF7C0>
           │       └ <function run at 0x00000206FA8E2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000206FCC5EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000206FC4B9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000206FC4B9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000206FC4BB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000206FC40ADD0>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000206FA898610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020697...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000206FFB39480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000206FA898610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020697...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020697...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020697E5AB90>
          └ <fastapi.applications.FastAPI object at 0x00000206FFB39480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020697E27490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020697E5AB60>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020697E5AB90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020697E27490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000020697E5AA70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020697E5AB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000020697E27490>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000020697E807C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000206FD32A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000020697E807C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020697E5AA10>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000020697E807C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000020697E276D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020697E5A9E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000020697E5AA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000020697E5A980>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020697E5A9E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000020697D81480>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000020697E5A980>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000206FD27DA20>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000020697E27760>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000020...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000020697DCBA30>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000020697E83B80>
                     └ <function get_request_handler.<locals>.app at 0x0000020697DCB9A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000206FD27C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'request': <starlette.requests.Request object at 0x0000020697E83B80>}
                 │                 │         └ <function customize_logger at 0x0000020697DCB910>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x0000020697DAD2A0>
                 └ <function run_in_threadpool at 0x00000206FCED2440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ ()
                 │     │         │        └ functools.partial(<function customize_logger at 0x0000020697DCB910>, request=<starlette.requests.Request object at 0x00000206...
                 │     │         └ <function run_sync at 0x00000206FCC0E710>
                 │     └ <module 'anyio.to_thread' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\to_thread.py'>
                 └ <module 'anyio' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\__init__.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x00000206FCC0C3A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ZeroDivisionError('division by zero')>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 867, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function customize_logger at 0x0000020697DCB910>, request=<starlette.requests.Request object at 0x00000206...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000020697E6C600>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\main.py", line 44, in customize_logger
    a = 1 / 0

ZeroDivisionError: division by zero
INFO     2023-03-26 13:03:40.315 request id: app - uvicorn.server:serve - Started server process [10624]
INFO     2023-03-26 13:03:40.315 request id: app - uvicorn.server:serve - Started server process [10624]
INFO     2023-03-26 13:03:40.315 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:03:40.315 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:03:40.316 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:03:40.316 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:03:57.286 request id: app - uvicorn.server:serve - Started server process [15640]
INFO     2023-03-26 13:03:57.286 request id: app - uvicorn.server:serve - Started server process [15640]
INFO     2023-03-26 13:03:57.286 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:03:57.287 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:03:57.287 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:03:57.287 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:04:00.559 request id: app - main:customize_logger - Here Is Your Info Log
INFO     2023-03-26 13:04:00.560 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54091 - "GET /custom-logger HTTP/1.1" 500
ERROR    2023-03-26 13:04:00.560 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x0000023D0FC813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x0000023D0FBDF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000023D0FBDE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000023D0FB4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>
    │    └ <function subprocess_started at 0x0000023D11F1D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000023D0FB4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000023D11EFA170>
           │       │   └ <uvicorn.server.Server object at 0x0000023D0FB4F7C0>
           │       └ <function run at 0x0000023D0FC82560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000023D11F9EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000023D11809E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000023D11809D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000023D1180B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000023D1176ADD0>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023D0FC38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023D2D...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000023D2BE494B0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023D0FC38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023D2D...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023D2D...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023D2D21A890>
          └ <fastapi.applications.FastAPI object at 0x0000023D2BE494B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023D2D1EB250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023D2D21A860>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023D2D21A890>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023D2D1EB250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000023D2D21A770>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023D2D21A860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023D2D1EB250>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023D2D21B3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000023D1266A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000023D2D21B3D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023D2D21A710>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023D2D21B3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000023D2D1EB400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023D2D21A6E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023D2D21A710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023D2D21A680>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023D2D21A6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000023D2D151180>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023D2D21A680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000023D125BD990>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000023D2D1939A0>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000023D2D21B6D0>
                     └ <function get_request_handler.<locals>.app at 0x0000023D2D193910>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000023D125BC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'request': <starlette.requests.Request object at 0x0000023D2D21B6D0>}
                 │                 │         └ <function customize_logger at 0x0000023D2D193880>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x0000023D2D196CB0>
                 └ <function run_in_threadpool at 0x0000023D122123B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ ()
                 │     │         │        └ functools.partial(<function customize_logger at 0x0000023D2D193880>, request=<starlette.requests.Request object at 0x0000023D...
                 │     │         └ <function run_sync at 0x0000023D11F4E710>
                 │     └ <module 'anyio.to_thread' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\to_thread.py'>
                 └ <module 'anyio' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\__init__.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x0000023D11F4C3A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ZeroDivisionError('division by zero')>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 867, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function customize_logger at 0x0000023D2D193880>, request=<starlette.requests.Request object at 0x0000023D...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000023D2B9D60C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\main.py", line 45, in customize_logger
    a = 1 / 0

ZeroDivisionError: division by zero
ERROR    2023-03-26 13:04:00.577 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x0000023D0FC813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x0000023D0FBDF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000023D0FBDE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000023D0FB4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>
    │    └ <function subprocess_started at 0x0000023D11F1D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000023D0FB4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000023D11EFA170>
           │       │   └ <uvicorn.server.Server object at 0x0000023D0FB4F7C0>
           │       └ <function run at 0x0000023D0FC82560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000023D11F9EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000023D11809E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000023D11809D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000023D1180B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000023D1176ADD0>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...ion by zero')>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023D0FC38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023D2D...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000023D2BE494B0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023D0FC38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023D2D...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023D2D...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023D2D21A890>
          └ <fastapi.applications.FastAPI object at 0x0000023D2BE494B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023D2D1EB250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023D2D21A860>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023D2D21A890>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023D2D1EB250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000023D2D21A770>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023D2D21A860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023D2D1EB250>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023D2D21B3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000023D1266A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000023D2D21B3D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023D2D21A710>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023D2D21B3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000023D2D1EB400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023D2D21A6E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023D2D21A710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023D2D21A680>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023D2D21A6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000023D2D151180>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023D2D21A680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000023D125BD990>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023D2D1EB490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000023D2D1939A0>
          └ APIRoute(path='/custom-logger', name='customize_logger', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000023D2D21B6D0>
                     └ <function get_request_handler.<locals>.app at 0x0000023D2D193910>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000023D125BC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 165, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
                 │                 │         │       └ {'request': <starlette.requests.Request object at 0x0000023D2D21B6D0>}
                 │                 │         └ <function customize_logger at 0x0000023D2D193880>
                 │                 └ <fastapi.dependencies.models.Dependant object at 0x0000023D2D196CB0>
                 └ <function run_in_threadpool at 0x0000023D122123B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
                 │     │         │        │      └ ()
                 │     │         │        └ functools.partial(<function customize_logger at 0x0000023D2D193880>, request=<starlette.requests.Request object at 0x0000023D...
                 │     │         └ <function run_sync at 0x0000023D11F4E710>
                 │     └ <module 'anyio.to_thread' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\to_thread.py'>
                 └ <module 'anyio' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\anyio\\__init__.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\to_thread.py", line 31, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
                 └ <function get_asynclib at 0x0000023D11F4C3A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 937, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=ZeroDivisionError('division by zero')>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 867, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function customize_logger at 0x0000023D2D193880>, request=<starlette.requests.Request object at 0x0000023D...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x0000023D2B9D60C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\main.py", line 45, in customize_logger
    a = 1 / 0

ZeroDivisionError: division by zero
INFO     2023-03-26 13:04:24.142 request id: app - uvicorn.server:serve - Started server process [8836]
INFO     2023-03-26 13:04:24.143 request id: app - uvicorn.server:serve - Started server process [8836]
INFO     2023-03-26 13:04:24.143 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:04:24.143 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:04:24.144 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:04:24.144 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:05:36.877 request id: app - uvicorn.server:serve - Started server process [10992]
INFO     2023-03-26 13:05:36.878 request id: app - uvicorn.server:serve - Started server process [10992]
INFO     2023-03-26 13:05:36.878 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:05:36.878 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:05:36.879 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:05:36.879 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:05:52.444 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54122 - "DELETE /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:05:59.241 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54125 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 500
ERROR    2023-03-26 13:05:59.241 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E174FD30>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1765C40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1765C40; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A4C38F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A4C384F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4C384E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4C37BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    └ <function subprocess_started at 0x000001A4C5B4D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4C37BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A4C5B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A4C37BF7C0>
           │       └ <function run at 0x000001A4C38F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4C5BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4C5479E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4C5479D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4C547B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4C53DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E0...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E0...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E0...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>
          └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B0A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B0A0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A4C6278040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A4E0E7A530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E0FA11E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A4C627A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E0FA11E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E0FA11E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A4E0E4B250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A4E0DB12A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A4C61CDA20>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A4E0E4A200>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4E0FA1780>
                     └ <function get_request_handler.<locals>.app at 0x000001A4E0E4A170>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4C61CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>}
                 │         └ <function importar_fundos at 0x000001A4DFA4DBD0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4E0E5B4F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 90, in importar_fundos
    service.import_fundos_imobiliarios(db)
    │       │                          └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>
    │       └ <function import_fundos_imobiliarios at 0x000001A4DFA4C790>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 308, in import_fundos_imobiliarios
    db.commit()
    │  └ <function Session.commit at 0x000001A4C77DE050>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001A4C77DD2D0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>
                └ <function SessionTransaction.commit at 0x000001A4C77DD240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD1B0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>
                └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001A4C77DFC70>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001A4C77DFE20>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001A4E292BCC0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001A4C77D20E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E174D090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E174D090>
    │   └ <function SaveUpdateAll.execute at 0x000001A4C77D29E0>
    └ SaveUpdateAll(Mapper[FundosImobiliario(fundos_imobiliarios)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001A4C77AC280>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001A4C77AD870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1094, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001A4C74B0A60>
             └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001A4E174ED10>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A4C74B0D30>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A4C74B0EE0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1837, in _execute_context
    return self._exec_insertmany_context(
           │    └ <function Connection._exec_insertmany_context at 0x000001A4C74B1000>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2103, in _exec_insertmany_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A4C74B11B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALUES (\'AAZQ11\', \'\', \'\', ...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type numeric: ""\nL...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E174FD30>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1765C40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1765C40; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^

[SQL: INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRACAO", "TAXA_GESTAO", "TAXA_PERFORMANCE", "TIPO_GESTAO", "SETOR", "LIQUIDEZ_DIARIA", "DIVIDENDO", "DIVIDEND_YIELD", "DY_ANO", " ... 200391 characters truncated ... , %(VACÂNCIA_FINANCEIRA__307)s, %(QUANTIDADE_ATIVOS__307)s) RETURNING fundos_imobiliarios."FUNDO_ID"]
[parameters: {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0': '', 'DESCRICAO__0': '', 'PATRIMÔNIO_LIQ__0': 231064980.16, 'TAXA_GESTAO__0': 0, 'VACÂNCIA_FINANCEIRA__0': None, 'VACANCIA_FISICA__0': None, 'P_VPA__0': 1, 'VARIAÇÃO_PATRIMONIAL__0': 0, 'IMAGEM__0': '', 'RENTAB_PATR_NO_PERÍODO__0': 0.0135, 'DY_PATRIMONIAL__0': 0.0135, 'ADMINISTRADOR__0': '', 'RENTAB_PERIODO__0': 0.0062, 'DY_ANO__0': 0.029, 'DIVIDENDO__0': 0.13, 'VARIAÇÃO_PREÇO__0': -0.0072, 'QUANTIDADE_ATIVOS__0': 0, 'RENTAB_ACUMULADA__0': 0.0217, 'LIQUIDEZ_DIARIA__0': '105362.0', 'TAXA_PERFORMANCE__0': 0, 'TIPO_GESTAO__0': '', 'VPA__0': 9.61, 'CODIGO_DO_FUNDO__0': 'AAZQ11', 'CNPJ__0': '', 'TAXA_ADMINISTRACAO__1': '', 'RENTAB_PATR_ACUMULADA__1': 0.0123, 'SETOR__1': 'Shoppings', 'DIVIDEND_YIELD__1': 0.0077, 'NOME__1': '', 'DESCRICAO__1': '', 'PATRIMÔNIO_LIQ__1': 431490855.55, 'TAXA_GESTAO__1': 0, 'VACÂNCIA_FINANCEIRA__1': None, 'VACANCIA_FISICA__1': 0.075, 'P_VPA__1': 0.72, 'VARIAÇÃO_PATRIMONIAL__1': 0.0013, 'IMAGEM__1': '', 'RENTAB_PATR_NO_PERÍODO__1': 0.0068, 'DY_PATRIMONIAL__1': 0.0055, 'ADMINISTRADOR__1': '', 'RENTAB_PERIODO__1': -0.0215, 'DY_ANO__1': 0.0153, 'DIVIDENDO__1': 0.5, 'VARIAÇÃO_PREÇO__1': -0.029, 'QUANTIDADE_ATIVOS__1': 1, 'RENTAB_ACUMULADA__1': -0.0141 ... 8524 parameters truncated ... 'PATRIMÔNIO_LIQ__306': 50324959.86, 'TAXA_GESTAO__306': 0, 'VACÂNCIA_FINANCEIRA__306': None, 'VACANCIA_FISICA__306': None, 'P_VPA__306': None, 'VARIAÇÃO_PATRIMONIAL__306': None, 'IMAGEM__306': '', 'RENTAB_PATR_NO_PERÍODO__306': None, 'DY_PATRIMONIAL__306': None, 'ADMINISTRADOR__306': '', 'RENTAB_PERIODO__306': 0, 'DY_ANO__306': None, 'DIVIDENDO__306': 0.63, 'VARIAÇÃO_PREÇO__306': 0, 'QUANTIDADE_ATIVOS__306': 0, 'RENTAB_ACUMULADA__306': 0, 'LIQUIDEZ_DIARIA__306': None, 'TAXA_PERFORMANCE__306': 0, 'TIPO_GESTAO__306': '', 'VPA__306': 102.15, 'CODIGO_DO_FUNDO__306': 'YUFI11B', 'CNPJ__306': '', 'TAXA_ADMINISTRACAO__307': '', 'RENTAB_PATR_ACUMULADA__307': 0.0082, 'SETOR__307': 'Híbrido', 'DIVIDEND_YIELD__307': 0, 'NOME__307': '', 'DESCRICAO__307': '', 'PATRIMÔNIO_LIQ__307': 118037889.5, 'TAXA_GESTAO__307': 0, 'VACÂNCIA_FINANCEIRA__307': None, 'VACANCIA_FISICA__307': None, 'P_VPA__307': 0.99, 'VARIAÇÃO_PATRIMONIAL__307': 0, 'IMAGEM__307': '', 'RENTAB_PATR_NO_PERÍODO__307': 0.0082, 'DY_PATRIMONIAL__307': 0.0082, 'ADMINISTRADOR__307': '', 'RENTAB_PERIODO__307': 0, 'DY_ANO__307': None, 'DIVIDENDO__307': 1.05, 'VARIAÇÃO_PREÇO__307': 0, 'QUANTIDADE_ATIVOS__307': 0, 'RENTAB_ACUMULADA__307': 0, 'LIQUIDEZ_DIARIA__307': '1.0', 'TAXA_PERFORMANCE__307': 0, 'TIPO_GESTAO__307': '', 'VPA__307': 127.4, 'CODIGO_DO_FUNDO__307': 'ZAVI11', 'CNPJ__307': ''}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2023-03-26 13:05:59.305 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E174FD30>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1765C40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1765C40; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A4C38F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A4C384F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4C384E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4C37BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    └ <function subprocess_started at 0x000001A4C5B4D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4C37BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A4C5B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A4C37BF7C0>
           │       └ <function run at 0x000001A4C38F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4C5BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4C5479E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4C5479D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4C547B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4C53DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E0...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E0...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E0...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>
          └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B0A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B0A0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A4C6278040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A4E0E7A530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E0FA11E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A4C627A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E0FA11E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E0FA11E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A4E0E4B250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A4E0DB12A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A4C61CDA20>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0E4B2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A4E0E4A200>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4E0FA1780>
                     └ <function get_request_handler.<locals>.app at 0x000001A4E0E4A170>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4C61CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>}
                 │         └ <function importar_fundos at 0x000001A4DFA4DBD0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4E0E5B4F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 90, in importar_fundos
    service.import_fundos_imobiliarios(db)
    │       │                          └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>
    │       └ <function import_fundos_imobiliarios at 0x000001A4DFA4C790>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 308, in import_fundos_imobiliarios
    db.commit()
    │  └ <function Session.commit at 0x000001A4C77DE050>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001A4C77DD2D0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>
                └ <function SessionTransaction.commit at 0x000001A4C77DD240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD1B0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>
                └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001A4C77DFC70>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E0FFB5C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001A4C77DFE20>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E0FA1D20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001A4E292BCC0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001A4C77D20E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E174D090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E174D090>
    │   └ <function SaveUpdateAll.execute at 0x000001A4C77D29E0>
    └ SaveUpdateAll(Mapper[FundosImobiliario(fundos_imobiliarios)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001A4C77AC280>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001A4C77AD870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1094, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001A4C74B0A60>
             └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001A4E174ED10>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A4C74B0D30>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A4C74B0EE0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1837, in _execute_context
    return self._exec_insertmany_context(
           │    └ <function Connection._exec_insertmany_context at 0x000001A4C74B1000>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2103, in _exec_insertmany_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A4C74B11B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001A4E174D540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALUES (\'AAZQ11\', \'\', \'\', ...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type numeric: ""\nL...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E174FD30>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1765C40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1765C40; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^

[SQL: INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRACAO", "TAXA_GESTAO", "TAXA_PERFORMANCE", "TIPO_GESTAO", "SETOR", "LIQUIDEZ_DIARIA", "DIVIDENDO", "DIVIDEND_YIELD", "DY_ANO", " ... 200391 characters truncated ... , %(VACÂNCIA_FINANCEIRA__307)s, %(QUANTIDADE_ATIVOS__307)s) RETURNING fundos_imobiliarios."FUNDO_ID"]
[parameters: {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0': '', 'DESCRICAO__0': '', 'PATRIMÔNIO_LIQ__0': 231064980.16, 'TAXA_GESTAO__0': 0, 'VACÂNCIA_FINANCEIRA__0': None, 'VACANCIA_FISICA__0': None, 'P_VPA__0': 1, 'VARIAÇÃO_PATRIMONIAL__0': 0, 'IMAGEM__0': '', 'RENTAB_PATR_NO_PERÍODO__0': 0.0135, 'DY_PATRIMONIAL__0': 0.0135, 'ADMINISTRADOR__0': '', 'RENTAB_PERIODO__0': 0.0062, 'DY_ANO__0': 0.029, 'DIVIDENDO__0': 0.13, 'VARIAÇÃO_PREÇO__0': -0.0072, 'QUANTIDADE_ATIVOS__0': 0, 'RENTAB_ACUMULADA__0': 0.0217, 'LIQUIDEZ_DIARIA__0': '105362.0', 'TAXA_PERFORMANCE__0': 0, 'TIPO_GESTAO__0': '', 'VPA__0': 9.61, 'CODIGO_DO_FUNDO__0': 'AAZQ11', 'CNPJ__0': '', 'TAXA_ADMINISTRACAO__1': '', 'RENTAB_PATR_ACUMULADA__1': 0.0123, 'SETOR__1': 'Shoppings', 'DIVIDEND_YIELD__1': 0.0077, 'NOME__1': '', 'DESCRICAO__1': '', 'PATRIMÔNIO_LIQ__1': 431490855.55, 'TAXA_GESTAO__1': 0, 'VACÂNCIA_FINANCEIRA__1': None, 'VACANCIA_FISICA__1': 0.075, 'P_VPA__1': 0.72, 'VARIAÇÃO_PATRIMONIAL__1': 0.0013, 'IMAGEM__1': '', 'RENTAB_PATR_NO_PERÍODO__1': 0.0068, 'DY_PATRIMONIAL__1': 0.0055, 'ADMINISTRADOR__1': '', 'RENTAB_PERIODO__1': -0.0215, 'DY_ANO__1': 0.0153, 'DIVIDENDO__1': 0.5, 'VARIAÇÃO_PREÇO__1': -0.029, 'QUANTIDADE_ATIVOS__1': 1, 'RENTAB_ACUMULADA__1': -0.0141 ... 8524 parameters truncated ... 'PATRIMÔNIO_LIQ__306': 50324959.86, 'TAXA_GESTAO__306': 0, 'VACÂNCIA_FINANCEIRA__306': None, 'VACANCIA_FISICA__306': None, 'P_VPA__306': None, 'VARIAÇÃO_PATRIMONIAL__306': None, 'IMAGEM__306': '', 'RENTAB_PATR_NO_PERÍODO__306': None, 'DY_PATRIMONIAL__306': None, 'ADMINISTRADOR__306': '', 'RENTAB_PERIODO__306': 0, 'DY_ANO__306': None, 'DIVIDENDO__306': 0.63, 'VARIAÇÃO_PREÇO__306': 0, 'QUANTIDADE_ATIVOS__306': 0, 'RENTAB_ACUMULADA__306': 0, 'LIQUIDEZ_DIARIA__306': None, 'TAXA_PERFORMANCE__306': 0, 'TIPO_GESTAO__306': '', 'VPA__306': 102.15, 'CODIGO_DO_FUNDO__306': 'YUFI11B', 'CNPJ__306': '', 'TAXA_ADMINISTRACAO__307': '', 'RENTAB_PATR_ACUMULADA__307': 0.0082, 'SETOR__307': 'Híbrido', 'DIVIDEND_YIELD__307': 0, 'NOME__307': '', 'DESCRICAO__307': '', 'PATRIMÔNIO_LIQ__307': 118037889.5, 'TAXA_GESTAO__307': 0, 'VACÂNCIA_FINANCEIRA__307': None, 'VACANCIA_FISICA__307': None, 'P_VPA__307': 0.99, 'VARIAÇÃO_PATRIMONIAL__307': 0, 'IMAGEM__307': '', 'RENTAB_PATR_NO_PERÍODO__307': 0.0082, 'DY_PATRIMONIAL__307': 0.0082, 'ADMINISTRADOR__307': '', 'RENTAB_PERIODO__307': 0, 'DY_ANO__307': None, 'DIVIDENDO__307': 1.05, 'VARIAÇÃO_PREÇO__307': 0, 'QUANTIDADE_ATIVOS__307': 0, 'RENTAB_ACUMULADA__307': 0, 'LIQUIDEZ_DIARIA__307': '1.0', 'TAXA_PERFORMANCE__307': 0, 'TIPO_GESTAO__307': '', 'VPA__307': 127.4, 'CODIGO_DO_FUNDO__307': 'ZAVI11', 'CNPJ__307': ''}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2023-03-26 13:06:25.413 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54126 - "DELETE /api/v1/analises/acoes/importacao HTTP/1.1" 200
INFO     2023-03-26 13:06:36.484 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54143 - "POST /api/v1/analises/acoes/importacao HTTP/1.1" 500
ERROR    2023-03-26 13:06:36.485 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E164D9C0>
    │       │          │       │         └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │       │          │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │       │          └ <cursor object at 0x000001A4E1624E40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │      │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1624E40; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "CODIGO" of relation "acoes" violates not-null constraint
DETAIL:  Failing row contains (1142, null, , , , null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 0, 0, null, ).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A4C38F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A4C384F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4C384E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4C37BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    └ <function subprocess_started at 0x000001A4C5B4D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4C37BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A4C5B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A4C37BF7C0>
           │       └ <function run at 0x000001A4C38F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4C5BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4C5479E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4C5479D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4C547B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4C53DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>
          └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0F13D90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0F13D90>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A4C6278040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A4E0E7A530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E2BDC100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A4C627A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E2BDC100>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E2BDC100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A4E2A49120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A4E0DB12A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A4C61CDA20>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A4E0E4A320>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4E2BDCA60>
                     └ <function get_request_handler.<locals>.app at 0x000001A4E0E4A290>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4C61CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>}
                 │         └ <function importar_acoes at 0x000001A4DFA4DD80>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4E0E5B880>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 97, in importar_acoes
    service.import_acoes(db)
    │       │            └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>
    │       └ <function import_acoes at 0x000001A4DFA4C820>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 345, in import_acoes
    db.commit()
    │  └ <function Session.commit at 0x000001A4C77DE050>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001A4C77DD2D0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>
                └ <function SessionTransaction.commit at 0x000001A4C77DD240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD1B0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>
                └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001A4C77DFC70>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001A4C77DFE20>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001A4E158BDC0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "CODIGO" of relation "acoes" violates not-null constr...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001A4C77D20E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E164DCC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E164DCC0>
    │   └ <function SaveUpdateAll.execute at 0x000001A4C77D29E0>
    └ SaveUpdateAll(Mapper[Acao(acoes)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001A4C77AC280>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001A4C77AD870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1094, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001A4C74B0A60>
             └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001A4E164E110>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A4C74B0D30>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A4C74B0EE0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1837, in _execute_context
    return self._exec_insertmany_context(
           │    └ <function Connection._exec_insertmany_context at 0x000001A4C74B1000>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2103, in _exec_insertmany_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A4C74B11B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "CODIGO" of relation "acoes" violates not-null constraint\nDETAIL:  Failing row contai...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "CODIGO" of relation "acoes" violates not...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "CODIGO" of relation "acoes" violates not-null constr...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E164D9C0>
    │       │          │       │         └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │       │          │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │       │          └ <cursor object at 0x000001A4E1624E40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │      │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1624E40; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "CODIGO" of relation "acoes" violates not-null constraint
DETAIL:  Failing row contains (1142, null, , , , null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 0, 0, null, ).

[SQL: INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "P_EBIT", "P_ATIV_CIRC_LIQ", "EV_EBIT", "EV_EBITDA", "MARGEM_EBIT", "MARGEM_LIQUIDA", "LIQ_CORRENTE", "ROIC", "ROE", "LIQ_2MESE ... 228562 characters truncated ...  %(SETOR__436)s, %(LPA__436)s, %(VPA__436)s, %(CNPJ__436)s, %(TIPO__436)s) RETURNING acoes."ACAO_ID"]
[parameters: {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR3', 'PSR__0': 2.437, 'MARGEM_LIQUIDA__0': -0.118, 'ROIC__0': 0.0132, 'LIQ_CORRENTE__0': 0.86, 'IMAGEM__0': ('',), 'PATRIMONIO_LIQUIDO__0': 1072550000, 'EV_EBIT__0': 110.61, 'P_ATIV_CIRC_LIQ__0': -2.61, 'CRESC_REC_5A__0': 0.0116, 'LIQ_2MESES__0': 10905400, 'P_EBIT__0': 88.57, 'TIPO__0': ('',), 'LPA__0': (0,), 'P_ATIVO__0': 1.012, 'VPA__0': (0,), 'PL__0': -19.64, 'MARGEM_EBIT__0': 0.0275, 'ROE__0': -0.1263, 'P_CAP_GIRO__0': -32.45, 'DIV_BRUTA_PATRIM__0': 0.85, 'CNPJ__0': None, 'PVP__0': 2.48, 'SETOR__1': 'Financeiros', 'DIVIDEND_YIELD__1': 0.0829, 'EV_EBITDA__1': 0, 'NOME__1': ('',), 'DESCRICAO__1': '', 'CODIGO__1': 'ABCB4', 'PSR__1': 0, 'MARGEM_LIQUIDA__1': 0, 'ROIC__1': 0, 'LIQ_CORRENTE__1': 0, 'IMAGEM__1': ('',), 'PATRIMONIO_LIQUIDO__1': 5205390000, 'EV_EBIT__1': 0, 'P_ATIV_CIRC_LIQ__1': 0, 'CRESC_REC_5A__1': 0.2753, 'LIQ_2MESES__1': 17711300, 'P_EBIT__1': 0, 'TIPO__1': ('',), 'LPA__1': (0,), 'P_ATIVO__1': 0, 'VPA__1': (0,), 'PL__1': 4.76 ... 12136 parameters truncated ... 'PSR__435': 0.513, 'MARGEM_LIQUIDA__435': -0.0121, 'ROIC__435': 0.0735, 'LIQ_CORRENTE__435': 1.9, 'IMAGEM__435': ('',), 'PATRIMONIO_LIQUIDO__435': 2946250000, 'EV_EBIT__435': 11.17, 'P_ATIV_CIRC_LIQ__435': -0.59, 'CRESC_REC_5A__435': 0.0696, 'LIQ_2MESES__435': 43780600, 'P_EBIT__435': 3.96, 'TIPO__435': ('',), 'LPA__435': (0,), 'P_ATIVO__435': 0.259, 'VPA__435': (0,), 'PL__435': -40.17, 'MARGEM_EBIT__435': 0.1293, 'ROE__435': -0.0198, 'P_CAP_GIRO__435': 2.36, 'DIV_BRUTA_PATRIM__435': 1.71, 'CNPJ__435': None, 'PVP__435': 0.79, 'SETOR__436': 'Hotéis e Restaurantes', 'DIVIDEND_YIELD__436': 0, 'EV_EBITDA__436': 3.71, 'NOME__436': ('',), 'DESCRICAO__436': '', 'CODIGO__436': 'ZAMP3', 'PSR__436': 0.376, 'MARGEM_LIQUIDA__436': -0.0153, 'ROIC__436': 0.0298, 'LIQ_CORRENTE__436': 1.07, 'IMAGEM__436': ('',), 'PATRIMONIO_LIQUIDO__436': 1485190000, 'EV_EBIT__436': 19.28, 'P_ATIV_CIRC_LIQ__436': -0.83, 'CRESC_REC_5A__436': 0.0874, 'LIQ_2MESES__436': 5896530, 'P_EBIT__436': 14.17, 'TIPO__436': ('',), 'LPA__436': (0,), 'P_ATIVO__436': 0.332, 'VPA__436': (0,), 'PL__436': -24.58, 'MARGEM_EBIT__436': 0.0265, 'ROE__436': -0.0376, 'P_CAP_GIRO__436': 21.13, 'DIV_BRUTA_PATRIM__436': 0.68, 'CNPJ__436': None, 'PVP__436': 0.92}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2023-03-26 13:06:36.549 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E164D9C0>
    │       │          │       │         └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │       │          │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │       │          └ <cursor object at 0x000001A4E1624E40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │      │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1624E40; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "CODIGO" of relation "acoes" violates not-null constraint
DETAIL:  Failing row contains (1142, null, , , , null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 0, 0, null, ).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A4C38F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A4C384F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4C384E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4C37BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    └ <function subprocess_started at 0x000001A4C5B4D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4C37BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A4C5B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A4C37BF7C0>
           │       └ <function run at 0x000001A4C38F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4C5BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4C5479E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4C5479D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4C547B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4C53DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>
          └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0F13D90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0F13D90>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A4C6278040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A4E0E7A530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E2BDC100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A4C627A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E2BDC100>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E2BDC100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A4E2A49120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A4E0DB12A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A4C61CDA20>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E2A49240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A4E0E4A320>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4E2BDCA60>
                     └ <function get_request_handler.<locals>.app at 0x000001A4E0E4A290>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4C61CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>}
                 │         └ <function importar_acoes at 0x000001A4DFA4DD80>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4E0E5B880>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 97, in importar_acoes
    service.import_acoes(db)
    │       │            └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>
    │       └ <function import_acoes at 0x000001A4DFA4C820>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 345, in import_acoes
    db.commit()
    │  └ <function Session.commit at 0x000001A4C77DE050>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001A4C77DD2D0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>
                └ <function SessionTransaction.commit at 0x000001A4C77DD240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD1B0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>
                └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001A4C77DFC70>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E186CD40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001A4C77DFE20>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E2BDD000>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001A4E158BDC0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "CODIGO" of relation "acoes" violates not-null constr...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001A4C77D20E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E164DCC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E164DCC0>
    │   └ <function SaveUpdateAll.execute at 0x000001A4C77D29E0>
    └ SaveUpdateAll(Mapper[Acao(acoes)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001A4C77AC280>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001A4C77AD870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1094, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001A4C74B0A60>
             └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001A4E164E110>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A4C74B0D30>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A4C74B0EE0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1837, in _execute_context
    return self._exec_insertmany_context(
           │    └ <function Connection._exec_insertmany_context at 0x000001A4C74B1000>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2103, in _exec_insertmany_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A4C74B11B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001A4E164DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "CODIGO" of relation "acoes" violates not-null constraint\nDETAIL:  Failing row contai...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "CODIGO" of relation "acoes" violates not...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "CODIGO" of relation "acoes" violates not-null constr...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E164D9C0>
    │       │          │       │         └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │       │          │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │       │          └ <cursor object at 0x000001A4E1624E40; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR...
    │      │       └ 'INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1624E40; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "CODIGO" of relation "acoes" violates not-null constraint
DETAIL:  Failing row contains (1142, null, , , , null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 0, 0, null, ).

[SQL: INSERT INTO acoes ("CODIGO", "NOME", "DESCRICAO", "IMAGEM", "PL", "PVP", "PSR", "DIVIDEND_YIELD", "P_ATIVO", "P_CAP_GIRO", "P_EBIT", "P_ATIV_CIRC_LIQ", "EV_EBIT", "EV_EBITDA", "MARGEM_EBIT", "MARGEM_LIQUIDA", "LIQ_CORRENTE", "ROIC", "ROE", "LIQ_2MESE ... 228562 characters truncated ...  %(SETOR__436)s, %(LPA__436)s, %(VPA__436)s, %(CNPJ__436)s, %(TIPO__436)s) RETURNING acoes."ACAO_ID"]
[parameters: {'SETOR__0': 'Saúde', 'DIVIDEND_YIELD__0': 0, 'EV_EBITDA__0': 22.71, 'NOME__0': ('',), 'DESCRICAO__0': '', 'CODIGO__0': 'AALR3', 'PSR__0': 2.437, 'MARGEM_LIQUIDA__0': -0.118, 'ROIC__0': 0.0132, 'LIQ_CORRENTE__0': 0.86, 'IMAGEM__0': ('',), 'PATRIMONIO_LIQUIDO__0': 1072550000, 'EV_EBIT__0': 110.61, 'P_ATIV_CIRC_LIQ__0': -2.61, 'CRESC_REC_5A__0': 0.0116, 'LIQ_2MESES__0': 10905400, 'P_EBIT__0': 88.57, 'TIPO__0': ('',), 'LPA__0': (0,), 'P_ATIVO__0': 1.012, 'VPA__0': (0,), 'PL__0': -19.64, 'MARGEM_EBIT__0': 0.0275, 'ROE__0': -0.1263, 'P_CAP_GIRO__0': -32.45, 'DIV_BRUTA_PATRIM__0': 0.85, 'CNPJ__0': None, 'PVP__0': 2.48, 'SETOR__1': 'Financeiros', 'DIVIDEND_YIELD__1': 0.0829, 'EV_EBITDA__1': 0, 'NOME__1': ('',), 'DESCRICAO__1': '', 'CODIGO__1': 'ABCB4', 'PSR__1': 0, 'MARGEM_LIQUIDA__1': 0, 'ROIC__1': 0, 'LIQ_CORRENTE__1': 0, 'IMAGEM__1': ('',), 'PATRIMONIO_LIQUIDO__1': 5205390000, 'EV_EBIT__1': 0, 'P_ATIV_CIRC_LIQ__1': 0, 'CRESC_REC_5A__1': 0.2753, 'LIQ_2MESES__1': 17711300, 'P_EBIT__1': 0, 'TIPO__1': ('',), 'LPA__1': (0,), 'P_ATIVO__1': 0, 'VPA__1': (0,), 'PL__1': 4.76 ... 12136 parameters truncated ... 'PSR__435': 0.513, 'MARGEM_LIQUIDA__435': -0.0121, 'ROIC__435': 0.0735, 'LIQ_CORRENTE__435': 1.9, 'IMAGEM__435': ('',), 'PATRIMONIO_LIQUIDO__435': 2946250000, 'EV_EBIT__435': 11.17, 'P_ATIV_CIRC_LIQ__435': -0.59, 'CRESC_REC_5A__435': 0.0696, 'LIQ_2MESES__435': 43780600, 'P_EBIT__435': 3.96, 'TIPO__435': ('',), 'LPA__435': (0,), 'P_ATIVO__435': 0.259, 'VPA__435': (0,), 'PL__435': -40.17, 'MARGEM_EBIT__435': 0.1293, 'ROE__435': -0.0198, 'P_CAP_GIRO__435': 2.36, 'DIV_BRUTA_PATRIM__435': 1.71, 'CNPJ__435': None, 'PVP__435': 0.79, 'SETOR__436': 'Hotéis e Restaurantes', 'DIVIDEND_YIELD__436': 0, 'EV_EBITDA__436': 3.71, 'NOME__436': ('',), 'DESCRICAO__436': '', 'CODIGO__436': 'ZAMP3', 'PSR__436': 0.376, 'MARGEM_LIQUIDA__436': -0.0153, 'ROIC__436': 0.0298, 'LIQ_CORRENTE__436': 1.07, 'IMAGEM__436': ('',), 'PATRIMONIO_LIQUIDO__436': 1485190000, 'EV_EBIT__436': 19.28, 'P_ATIV_CIRC_LIQ__436': -0.83, 'CRESC_REC_5A__436': 0.0874, 'LIQ_2MESES__436': 5896530, 'P_EBIT__436': 14.17, 'TIPO__436': ('',), 'LPA__436': (0,), 'P_ATIVO__436': 0.332, 'VPA__436': (0,), 'PL__436': -24.58, 'MARGEM_EBIT__436': 0.0265, 'ROE__436': -0.0376, 'P_CAP_GIRO__436': 21.13, 'DIV_BRUTA_PATRIM__436': 0.68, 'CNPJ__436': None, 'PVP__436': 0.92}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2023-03-26 13:09:00.044 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54188 - "POST /api/v1/analises/acoes/importacao HTTP/1.1" 200
INFO     2023-03-26 13:09:24.362 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54189 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 500
ERROR    2023-03-26 13:09:24.362 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E179CD90>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1759D20; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1759D20; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A4C38F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A4C384F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4C384E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4C37BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    └ <function subprocess_started at 0x000001A4C5B4D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4C37BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A4C5B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A4C37BF7C0>
           │       └ <function run at 0x000001A4C38F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4C5BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4C5479E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4C5479D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4C547B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4C53DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>
          └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B1C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B1C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A4C6278040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A4E0E7A530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E145F340>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A4C627A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E145F340>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E145F340>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A4E0F12C20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A4E0DB12A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A4C61CDA20>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A4E0E4A200>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4E145DFF0>
                     └ <function get_request_handler.<locals>.app at 0x000001A4E0E4A170>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4C61CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>}
                 │         └ <function importar_fundos at 0x000001A4DFA4DBD0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4E0E5B4F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 90, in importar_fundos
    service.import_fundos_imobiliarios(db)
    │       │                          └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>
    │       └ <function import_fundos_imobiliarios at 0x000001A4DFA4C790>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 308, in import_fundos_imobiliarios
    db.commit()
    │  └ <function Session.commit at 0x000001A4C77DE050>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001A4C77DD2D0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>
                └ <function SessionTransaction.commit at 0x000001A4C77DD240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD1B0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>
                └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001A4C77DFC70>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001A4C77DFE20>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001A4E28ED000>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001A4C77D20E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E179C6D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E179C6D0>
    │   └ <function SaveUpdateAll.execute at 0x000001A4C77D29E0>
    └ SaveUpdateAll(Mapper[FundosImobiliario(fundos_imobiliarios)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001A4C77AC280>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001A4C77AD870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1094, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001A4C74B0A60>
             └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001A4E179C700>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A4C74B0D30>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A4C74B0EE0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1837, in _execute_context
    return self._exec_insertmany_context(
           │    └ <function Connection._exec_insertmany_context at 0x000001A4C74B1000>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2103, in _exec_insertmany_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A4C74B11B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALUES (\'AAZQ11\', \'\', \'\', ...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type numeric: ""\nL...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E179CD90>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1759D20; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1759D20; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^

[SQL: INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRACAO", "TAXA_GESTAO", "TAXA_PERFORMANCE", "TIPO_GESTAO", "SETOR", "LIQUIDEZ_DIARIA", "DIVIDENDO", "DIVIDEND_YIELD", "DY_ANO", " ... 200391 characters truncated ... , %(VACÂNCIA_FINANCEIRA__307)s, %(QUANTIDADE_ATIVOS__307)s) RETURNING fundos_imobiliarios."FUNDO_ID"]
[parameters: {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0': '', 'DESCRICAO__0': '', 'PATRIMÔNIO_LIQ__0': 231064980.16, 'TAXA_GESTAO__0': 0, 'VACÂNCIA_FINANCEIRA__0': None, 'VACANCIA_FISICA__0': None, 'P_VPA__0': 1, 'VARIAÇÃO_PATRIMONIAL__0': 0, 'IMAGEM__0': '', 'RENTAB_PATR_NO_PERÍODO__0': 0.0135, 'DY_PATRIMONIAL__0': 0.0135, 'ADMINISTRADOR__0': '', 'RENTAB_PERIODO__0': 0.0062, 'DY_ANO__0': 0.029, 'DIVIDENDO__0': 0.13, 'VARIAÇÃO_PREÇO__0': -0.0072, 'QUANTIDADE_ATIVOS__0': 0, 'RENTAB_ACUMULADA__0': 0.0217, 'LIQUIDEZ_DIARIA__0': '105362.0', 'TAXA_PERFORMANCE__0': 0, 'TIPO_GESTAO__0': '', 'VPA__0': 9.61, 'CODIGO_DO_FUNDO__0': 'AAZQ11', 'CNPJ__0': '', 'TAXA_ADMINISTRACAO__1': '', 'RENTAB_PATR_ACUMULADA__1': 0.0123, 'SETOR__1': 'Shoppings', 'DIVIDEND_YIELD__1': 0.0077, 'NOME__1': '', 'DESCRICAO__1': '', 'PATRIMÔNIO_LIQ__1': 431490855.55, 'TAXA_GESTAO__1': 0, 'VACÂNCIA_FINANCEIRA__1': None, 'VACANCIA_FISICA__1': 0.075, 'P_VPA__1': 0.72, 'VARIAÇÃO_PATRIMONIAL__1': 0.0013, 'IMAGEM__1': '', 'RENTAB_PATR_NO_PERÍODO__1': 0.0068, 'DY_PATRIMONIAL__1': 0.0055, 'ADMINISTRADOR__1': '', 'RENTAB_PERIODO__1': -0.0215, 'DY_ANO__1': 0.0153, 'DIVIDENDO__1': 0.5, 'VARIAÇÃO_PREÇO__1': -0.029, 'QUANTIDADE_ATIVOS__1': 1, 'RENTAB_ACUMULADA__1': -0.0141 ... 8524 parameters truncated ... 'PATRIMÔNIO_LIQ__306': 50324959.86, 'TAXA_GESTAO__306': 0, 'VACÂNCIA_FINANCEIRA__306': None, 'VACANCIA_FISICA__306': None, 'P_VPA__306': None, 'VARIAÇÃO_PATRIMONIAL__306': None, 'IMAGEM__306': '', 'RENTAB_PATR_NO_PERÍODO__306': None, 'DY_PATRIMONIAL__306': None, 'ADMINISTRADOR__306': '', 'RENTAB_PERIODO__306': 0, 'DY_ANO__306': None, 'DIVIDENDO__306': 0.63, 'VARIAÇÃO_PREÇO__306': 0, 'QUANTIDADE_ATIVOS__306': 0, 'RENTAB_ACUMULADA__306': 0, 'LIQUIDEZ_DIARIA__306': None, 'TAXA_PERFORMANCE__306': 0, 'TIPO_GESTAO__306': '', 'VPA__306': 102.15, 'CODIGO_DO_FUNDO__306': 'YUFI11B', 'CNPJ__306': '', 'TAXA_ADMINISTRACAO__307': '', 'RENTAB_PATR_ACUMULADA__307': 0.0082, 'SETOR__307': 'Híbrido', 'DIVIDEND_YIELD__307': 0, 'NOME__307': '', 'DESCRICAO__307': '', 'PATRIMÔNIO_LIQ__307': 118037889.5, 'TAXA_GESTAO__307': 0, 'VACÂNCIA_FINANCEIRA__307': None, 'VACANCIA_FISICA__307': None, 'P_VPA__307': 0.99, 'VARIAÇÃO_PATRIMONIAL__307': 0, 'IMAGEM__307': '', 'RENTAB_PATR_NO_PERÍODO__307': 0.0082, 'DY_PATRIMONIAL__307': 0.0082, 'ADMINISTRADOR__307': '', 'RENTAB_PERIODO__307': 0, 'DY_ANO__307': None, 'DIVIDENDO__307': 1.05, 'VARIAÇÃO_PREÇO__307': 0, 'QUANTIDADE_ATIVOS__307': 0, 'RENTAB_ACUMULADA__307': 0, 'LIQUIDEZ_DIARIA__307': '1.0', 'TAXA_PERFORMANCE__307': 0, 'TIPO_GESTAO__307': '', 'VPA__307': 127.4, 'CODIGO_DO_FUNDO__307': 'ZAVI11', 'CNPJ__307': ''}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2023-03-26 13:09:24.412 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E179CD90>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1759D20; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1759D20; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A4C38F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A4C384F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A4C384E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A4C37BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>
    │    └ <function subprocess_started at 0x000001A4C5B4D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=3840 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A4C37BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A4C5B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A4C37BF7C0>
           │       └ <function run at 0x000001A4C38F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A4C5BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A4C5479E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A4C5479D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4C547B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4C53DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A4C38A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A4E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>
          └ <fastapi.applications.FastAPI object at 0x000001A4DFA59480>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B1C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A4E0E7A650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A4E0E4B1C0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A4C6278040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A4E0E7A530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A4E0E7A620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E145F340>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A4C627A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E145F340>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A4E145F340>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A4E0F12C20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A4E0E7A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A4E0E7A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A4E0DB12A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A4E0E7A440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A4C61CDA20>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A4E0F13490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A4E0E4A200>
          └ APIRoute(path='/api/v1/analises/fundos-imobiliarios/importacao', name='importar_fundos', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A4E145DFF0>
                     └ <function get_request_handler.<locals>.app at 0x000001A4E0E4A170>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A4C61CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>}
                 │         └ <function importar_fundos at 0x000001A4DFA4DBD0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A4E0E5B4F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 90, in importar_fundos
    service.import_fundos_imobiliarios(db)
    │       │                          └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>
    │       └ <function import_fundos_imobiliarios at 0x000001A4DFA4C790>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 308, in import_fundos_imobiliarios
    db.commit()
    │  └ <function Session.commit at 0x000001A4C77DE050>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001A4C77DD2D0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>
                └ <function SessionTransaction.commit at 0x000001A4C77DD240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD1B0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>
                └ <function SessionTransaction._prepare_impl at 0x000001A4C77DD090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001A4C77DFC70>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001A4E2D7E5C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001A4C77DFE20>
    └ <sqlalchemy.orm.session.Session object at 0x000001A4E145EE30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001A4E28ED000>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001A4C77D20E0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E179C6D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001A4E179C6D0>
    │   └ <function SaveUpdateAll.execute at 0x000001A4C77D29E0>
    └ SaveUpdateAll(Mapper[FundosImobiliario(fundos_imobiliarios)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001A4C77AC280>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001A4C77AD870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1094, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001A4C74B0A60>
             └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001A4E179C700>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A4C74B0D30>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A4C74B0EE0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1837, in _execute_context
    return self._exec_insertmany_context(
           │    └ <function Connection._exec_insertmany_context at 0x000001A4C74B1000>
           └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2103, in _exec_insertmany_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A4C74B11B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001A4E179CA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALUES (\'AAZQ11\', \'\', \'\', ...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type numeric: ""\nL...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""\nLINE 1: ...DE_ATIVOS") VALU...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2100, in _exec_insertmany_context
    dialect.do_execute(cursor, sub_stmt, sub_params, context)
    │       │          │       │         │           └ <sqlalchemy.dialects.postgresql.psycopg2.PGExecutionContext_psycopg2 object at 0x000001A4E179CD90>
    │       │          │       │         └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │       │          │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │       │          └ <cursor object at 0x000001A4E1759D20; closed: -1>
    │       └ <function DefaultDialect.do_execute at 0x000001A4C752FD90>
    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001A4C787BCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0...
    │      │       └ 'INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRA...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001A4E1759D20; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type numeric: ""
LINE 1: ...DE_ATIVOS") VALUES ('AAZQ11', '', '', '', '', '', '', 0, 0, ...
                                                             ^

[SQL: INSERT INTO fundos_imobiliarios ("CODIGO_DO_FUNDO", "NOME", "DESCRICAO", "IMAGEM", "ADMINISTRADOR", "CNPJ", "TAXA_ADMINISTRACAO", "TAXA_GESTAO", "TAXA_PERFORMANCE", "TIPO_GESTAO", "SETOR", "LIQUIDEZ_DIARIA", "DIVIDENDO", "DIVIDEND_YIELD", "DY_ANO", " ... 200391 characters truncated ... , %(VACÂNCIA_FINANCEIRA__307)s, %(QUANTIDADE_ATIVOS__307)s) RETURNING fundos_imobiliarios."FUNDO_ID"]
[parameters: {'TAXA_ADMINISTRACAO__0': '', 'RENTAB_PATR_ACUMULADA__0': 0.0135, 'SETOR__0': 'Outros', 'DIVIDEND_YIELD__0': 0.0135, 'NOME__0': '', 'DESCRICAO__0': '', 'PATRIMÔNIO_LIQ__0': 231064980.16, 'TAXA_GESTAO__0': 0, 'VACÂNCIA_FINANCEIRA__0': None, 'VACANCIA_FISICA__0': None, 'P_VPA__0': 1, 'VARIAÇÃO_PATRIMONIAL__0': 0, 'IMAGEM__0': '', 'RENTAB_PATR_NO_PERÍODO__0': 0.0135, 'DY_PATRIMONIAL__0': 0.0135, 'ADMINISTRADOR__0': '', 'RENTAB_PERIODO__0': 0.0062, 'DY_ANO__0': 0.029, 'DIVIDENDO__0': 0.13, 'VARIAÇÃO_PREÇO__0': -0.0072, 'QUANTIDADE_ATIVOS__0': 0, 'RENTAB_ACUMULADA__0': 0.0217, 'LIQUIDEZ_DIARIA__0': '105362.0', 'TAXA_PERFORMANCE__0': 0, 'TIPO_GESTAO__0': '', 'VPA__0': 9.61, 'CODIGO_DO_FUNDO__0': 'AAZQ11', 'CNPJ__0': '', 'TAXA_ADMINISTRACAO__1': '', 'RENTAB_PATR_ACUMULADA__1': 0.0123, 'SETOR__1': 'Shoppings', 'DIVIDEND_YIELD__1': 0.0077, 'NOME__1': '', 'DESCRICAO__1': '', 'PATRIMÔNIO_LIQ__1': 431490855.55, 'TAXA_GESTAO__1': 0, 'VACÂNCIA_FINANCEIRA__1': None, 'VACANCIA_FISICA__1': 0.075, 'P_VPA__1': 0.72, 'VARIAÇÃO_PATRIMONIAL__1': 0.0013, 'IMAGEM__1': '', 'RENTAB_PATR_NO_PERÍODO__1': 0.0068, 'DY_PATRIMONIAL__1': 0.0055, 'ADMINISTRADOR__1': '', 'RENTAB_PERIODO__1': -0.0215, 'DY_ANO__1': 0.0153, 'DIVIDENDO__1': 0.5, 'VARIAÇÃO_PREÇO__1': -0.029, 'QUANTIDADE_ATIVOS__1': 1, 'RENTAB_ACUMULADA__1': -0.0141 ... 8524 parameters truncated ... 'PATRIMÔNIO_LIQ__306': 50324959.86, 'TAXA_GESTAO__306': 0, 'VACÂNCIA_FINANCEIRA__306': None, 'VACANCIA_FISICA__306': None, 'P_VPA__306': None, 'VARIAÇÃO_PATRIMONIAL__306': None, 'IMAGEM__306': '', 'RENTAB_PATR_NO_PERÍODO__306': None, 'DY_PATRIMONIAL__306': None, 'ADMINISTRADOR__306': '', 'RENTAB_PERIODO__306': 0, 'DY_ANO__306': None, 'DIVIDENDO__306': 0.63, 'VARIAÇÃO_PREÇO__306': 0, 'QUANTIDADE_ATIVOS__306': 0, 'RENTAB_ACUMULADA__306': 0, 'LIQUIDEZ_DIARIA__306': None, 'TAXA_PERFORMANCE__306': 0, 'TIPO_GESTAO__306': '', 'VPA__306': 102.15, 'CODIGO_DO_FUNDO__306': 'YUFI11B', 'CNPJ__306': '', 'TAXA_ADMINISTRACAO__307': '', 'RENTAB_PATR_ACUMULADA__307': 0.0082, 'SETOR__307': 'Híbrido', 'DIVIDEND_YIELD__307': 0, 'NOME__307': '', 'DESCRICAO__307': '', 'PATRIMÔNIO_LIQ__307': 118037889.5, 'TAXA_GESTAO__307': 0, 'VACÂNCIA_FINANCEIRA__307': None, 'VACANCIA_FISICA__307': None, 'P_VPA__307': 0.99, 'VARIAÇÃO_PATRIMONIAL__307': 0, 'IMAGEM__307': '', 'RENTAB_PATR_NO_PERÍODO__307': 0.0082, 'DY_PATRIMONIAL__307': 0.0082, 'ADMINISTRADOR__307': '', 'RENTAB_PERIODO__307': 0, 'DY_ANO__307': None, 'DIVIDENDO__307': 1.05, 'VARIAÇÃO_PREÇO__307': 0, 'QUANTIDADE_ATIVOS__307': 0, 'RENTAB_ACUMULADA__307': 0, 'LIQUIDEZ_DIARIA__307': '1.0', 'TAXA_PERFORMANCE__307': 0, 'TIPO_GESTAO__307': '', 'VPA__307': 127.4, 'CODIGO_DO_FUNDO__307': 'ZAVI11', 'CNPJ__307': ''}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2023-03-26 13:12:38.286 request id: app - uvicorn.server:serve - Started server process [10492]
INFO     2023-03-26 13:12:38.287 request id: app - uvicorn.server:serve - Started server process [10492]
INFO     2023-03-26 13:12:38.287 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:12:38.287 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:12:38.288 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:12:38.288 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:12:42.091 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54261 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:12:57.796 request id: app - uvicorn.server:serve - Started server process [8860]
INFO     2023-03-26 13:12:57.797 request id: app - uvicorn.server:serve - Started server process [8860]
INFO     2023-03-26 13:12:57.797 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:12:57.797 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:12:57.798 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:12:57.798 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:13:17.859 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54272 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:13:54.142 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54273 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:37:20.487 request id: app - uvicorn.server:serve - Started server process [11184]
INFO     2023-03-26 13:37:20.487 request id: app - uvicorn.server:serve - Started server process [11184]
INFO     2023-03-26 13:37:20.487 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:37:20.488 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:37:20.488 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:37:20.488 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:38:06.457 request id: app - uvicorn.server:serve - Started server process [10444]
INFO     2023-03-26 13:38:06.458 request id: app - uvicorn.server:serve - Started server process [10444]
INFO     2023-03-26 13:38:06.458 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:38:06.458 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:38:06.459 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:38:06.459 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:38:09.340 request id: app - uvicorn.server:serve - Started server process [15808]
INFO     2023-03-26 13:38:09.340 request id: app - uvicorn.server:serve - Started server process [15808]
INFO     2023-03-26 13:38:09.340 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:38:09.341 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:38:09.342 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:38:09.342 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:38:13.020 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54561 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:39:20.151 request id: app - uvicorn.server:serve - Started server process [4876]
INFO     2023-03-26 13:39:20.152 request id: app - uvicorn.server:serve - Started server process [4876]
INFO     2023-03-26 13:39:20.152 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:39:20.152 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:39:20.152 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:39:20.153 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:39:24.488 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54579 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:39:36.147 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 13:39:36.147 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 13:39:41.991 request id: app - uvicorn.server:serve - Started server process [6744]
INFO     2023-03-26 13:39:41.991 request id: app - uvicorn.server:serve - Started server process [6744]
INFO     2023-03-26 13:39:41.991 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:39:41.991 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:39:41.992 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:39:41.992 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:39:47.531 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54588 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:40:41.371 request id: app - uvicorn.server:serve - Started server process [8976]
INFO     2023-03-26 13:40:41.371 request id: app - uvicorn.server:serve - Started server process [8976]
INFO     2023-03-26 13:40:41.372 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:40:41.372 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:40:41.372 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:40:41.372 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:42:54.375 request id: app - uvicorn.server:serve - Started server process [9348]
INFO     2023-03-26 13:42:54.375 request id: app - uvicorn.server:serve - Started server process [9348]
INFO     2023-03-26 13:42:54.376 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:42:54.376 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:42:54.377 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:42:54.378 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:43:25.247 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54638 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:44:13.758 request id: app - uvicorn.server:serve - Started server process [15696]
INFO     2023-03-26 13:44:13.759 request id: app - uvicorn.server:serve - Started server process [15696]
INFO     2023-03-26 13:44:13.759 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:44:13.759 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:44:13.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:44:13.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:44:26.002 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54662 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:44:37.908 request id: app - uvicorn.server:serve - Started server process [10488]
INFO     2023-03-26 13:44:37.908 request id: app - uvicorn.server:serve - Started server process [10488]
INFO     2023-03-26 13:44:37.909 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:44:37.909 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:44:37.910 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:44:37.910 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:44:42.239 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54674 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:45:04.488 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54675 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:49:19.162 request id: app - uvicorn.server:serve - Started server process [11184]
INFO     2023-03-26 13:49:19.163 request id: app - uvicorn.server:serve - Started server process [11184]
INFO     2023-03-26 13:49:19.163 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:49:19.163 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:49:19.163 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:49:19.164 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:49:21.758 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54734 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:51:22.597 request id: app - uvicorn.server:serve - Started server process [15888]
INFO     2023-03-26 13:51:22.597 request id: app - uvicorn.server:serve - Started server process [15888]
INFO     2023-03-26 13:51:22.597 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:51:22.597 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:51:22.598 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:51:22.598 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:51:26.401 request id: app - src.analise.service:import_fundos_imobiliarios - Inicio da Importação de fundos Imobiliários
INFO     2023-03-26 13:51:26.658 request id: app - src.analise.service:import_fundos_imobiliarios - Fim da Importação de fundos Imobiliários
INFO     2023-03-26 13:51:26.659 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54811 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 13:52:31.683 request id: app - uvicorn.server:serve - Started server process [7592]
INFO     2023-03-26 13:52:31.684 request id: app - uvicorn.server:serve - Started server process [7592]
INFO     2023-03-26 13:52:31.684 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:52:31.684 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 13:52:31.684 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:52:31.684 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 13:54:27.726 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:54871 - "POST /api/v1/cotacao/historico/dividendos/HFOF11.SA HTTP/1.1" 200
INFO     2023-03-26 14:08:05.986 request id: app - uvicorn.server:serve - Started server process [4224]
INFO     2023-03-26 14:08:05.987 request id: app - uvicorn.server:serve - Started server process [4224]
INFO     2023-03-26 14:08:05.987 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:08:05.987 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:08:05.988 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:08:05.989 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:08:35.915 request id: app - uvicorn.server:serve - Started server process [6752]
INFO     2023-03-26 14:08:35.916 request id: app - uvicorn.server:serve - Started server process [6752]
INFO     2023-03-26 14:08:35.916 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:08:35.916 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:08:35.917 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:08:35.917 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:08:44.967 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55120 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 14:08:45.087 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55120 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 14:08:58.965 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55121 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:10:50.956 request id: app - uvicorn.server:serve - Started server process [15564]
INFO     2023-03-26 14:10:50.957 request id: app - uvicorn.server:serve - Started server process [15564]
INFO     2023-03-26 14:10:50.957 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:10:50.958 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:10:50.958 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:10:50.959 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:14:00.271 request id: app - uvicorn.server:serve - Started server process [1556]
INFO     2023-03-26 14:14:00.271 request id: app - uvicorn.server:serve - Started server process [1556]
INFO     2023-03-26 14:14:00.272 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:14:00.272 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:14:00.273 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:14:00.274 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:22:40.254 request id: app - uvicorn.server:serve - Started server process [3796]
INFO     2023-03-26 14:22:40.254 request id: app - uvicorn.server:serve - Started server process [3796]
INFO     2023-03-26 14:22:40.255 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:22:40.255 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:22:40.255 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:22:40.256 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:25:40.298 request id: app - uvicorn.server:serve - Started server process [4572]
INFO     2023-03-26 14:25:40.298 request id: app - uvicorn.server:serve - Started server process [4572]
INFO     2023-03-26 14:25:40.299 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:25:40.299 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:25:40.300 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:25:40.300 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:26:13.637 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55473 - "POST /api/v1/usuarios/ HTTP/1.1" 500
ERROR    2023-03-26 14:26:13.637 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'transacoes': <Relationship at 0x1cb3bedde40; transacoes>, 'id': <ColumnProperty at 0x1cb3c077440; id>, 'nome': <ColumnPrope...
           └ <Mapper at 0x1cb3c0364a0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001CB381013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001CB3805F1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001CB3805E830>
    └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001CB37FCFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>
    │    └ <function subprocess_started at 0x000001CB39FCD6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001CB37FCF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001CB39FAA170>
           │       │   └ <uvicorn.server.Server object at 0x000001CB37FCF7C0>
           │       └ <function run at 0x000001CB38102560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001CB3A04EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001CB39CA9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001CB39CA9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CB39CAB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CB39BFADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CB380B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CB55...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001CB3AABEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CB380B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CB55...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CB55...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CB556C6D70>
          └ <fastapi.applications.FastAPI object at 0x000001CB3AABEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CB55696EF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CB556C6D70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CB55696EF0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001CB3AAB3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001CB556C6B00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CB556C7700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001CB3AB1A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001CB556C7700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CB556C6AA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CB556C7700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001CB556972E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CB556C6B60>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CB556C6AA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CB556C6950>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CB556C6B60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001CB555797E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CB556C6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001CB3AA6D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001CB5564F880>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001CB556C7A00>
                     └ <function get_request_handler.<locals>.app at 0x000001CB5564DF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001CB3AA6C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001CB556EC0A0>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x000001CB3C444DC0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001CB3A4DCD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x000001CB556EC0A0>
    │       └ <function create_usuario at 0x000001CB3C1D9CF0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$e9Yplw5J4YkqoMn1c0WNOO5CondiJHxV9Q4TapCFE3.sZenKrHIG6'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$e9Yplw5J4YkqoMn1c0WNOO5CondiJHxV9Q4TapCFE3.sZenKrHIG6', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000001CB5565BA00>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001CB3C039480>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 1cb3c088450>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000001CB5565BA00>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x000001CB3BCF6CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x000001CB3BCE7250>
    └ <Mapper at 0x1cb3c0364a0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001CB3AC6B460>
    │                      └ <Mapper at 0x1cb3c0364a0; Usuario>
    └ <function _configure_registries at 0x000001CB3BCF6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001CB3BCF6A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001CB3BCE7130>
    └ <Mapper at 0x1cb3c036680; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001CB3BBE4B80>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001CB3BCC2680>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x000001CB3BCC2F80>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x1cb3bede480; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x000001CB3BCC24D0>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x000001CB3BCE7880>
            │    └ <Mapper at 0x1cb3c0364a0; Usuario>
            └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
ERROR    2023-03-26 14:26:13.663 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'transacoes': <Relationship at 0x1cb3bedde40; transacoes>, 'id': <ColumnProperty at 0x1cb3c077440; id>, 'nome': <ColumnPrope...
           └ <Mapper at 0x1cb3c0364a0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001CB381013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001CB3805F1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001CB3805E830>
    └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001CB37FCFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>
    │    └ <function subprocess_started at 0x000001CB39FCD6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001CB37FCF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001CB39FAA170>
           │       │   └ <uvicorn.server.Server object at 0x000001CB37FCF7C0>
           │       └ <function run at 0x000001CB38102560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001CB3A04EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001CB39CA9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001CB39CA9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CB39CAB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CB39BFADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CB380B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CB55...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001CB3AABEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CB380B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CB55...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CB55...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CB556C6D70>
          └ <fastapi.applications.FastAPI object at 0x000001CB3AABEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CB55696EF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CB556C6D70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CB55696EF0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001CB3AAB3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001CB556C6B00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CB556C6D40...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CB556C7700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001CB3AB1A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001CB556C7700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CB556C6AA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CB556C7700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001CB556972E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CB556C6B60>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CB556C6AA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CB556C6950>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CB556C6B60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001CB555797E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CB556C6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001CB3AA6D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CB55697370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001CB5564F880>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001CB556C7A00>
                     └ <function get_request_handler.<locals>.app at 0x000001CB5564DF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001CB3AA6C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001CB556EC0A0>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x000001CB3C444DC0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001CB3A4DCD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x000001CB556EC0A0>
    │       └ <function create_usuario at 0x000001CB3C1D9CF0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$e9Yplw5J4YkqoMn1c0WNOO5CondiJHxV9Q4TapCFE3.sZenKrHIG6'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$e9Yplw5J4YkqoMn1c0WNOO5CondiJHxV9Q4TapCFE3.sZenKrHIG6', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000001CB5565BA00>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001CB3C039480>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 1cb3c088450>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000001CB5565BA00>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x000001CB3BCF6CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x000001CB3BCE7250>
    └ <Mapper at 0x1cb3c0364a0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001CB3AC6B460>
    │                      └ <Mapper at 0x1cb3c0364a0; Usuario>
    └ <function _configure_registries at 0x000001CB3BCF6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001CB3BCF6A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001CB3BCE7130>
    └ <Mapper at 0x1cb3c036680; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001CB3BBE4B80>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001CB3BCC2680>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x000001CB3BCC2F80>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x1cb3bede480; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x000001CB3BCC24D0>
    └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x000001CB3BCE7880>
            │    └ <Mapper at 0x1cb3c0364a0; Usuario>
            └ <Relationship at 0x1cb3bede480; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
INFO     2023-03-26 14:27:15.811 request id: app - uvicorn.server:serve - Started server process [2516]
INFO     2023-03-26 14:27:15.812 request id: app - uvicorn.server:serve - Started server process [2516]
INFO     2023-03-26 14:27:15.812 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:27:15.813 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:27:15.813 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:27:15.813 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:27:57.342 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55491 - "POST /api/v1/usuarios/ HTTP/1.1" 500
ERROR    2023-03-26 14:27:57.343 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'transacoes': <Relationship at 0x251dea7dda0; transacoes>, 'id': <ColumnProperty at 0x251dec17440; id>, 'nome': <ColumnPrope...
           └ <Mapper at 0x251debd4ee0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000251DAC613F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000251DABBF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000251DABBE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000251DAB2FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>
    │    └ <function subprocess_started at 0x00000251DCF6D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000251DAB2F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000251DCF4A170>
           │       │   └ <uvicorn.server.Server object at 0x00000251DAB2F7C0>
           │       └ <function run at 0x00000251DAC62560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000251DCFEEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000251DC849E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000251DC849D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000251DC84B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000251DC79ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000251DAC18610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000251F8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000251DD65EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000251DAC18610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000251F8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000251F8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000251F8246F50>
          └ <fastapi.applications.FastAPI object at 0x00000251DD65EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000251F8212D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000251F8246F50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000251F8212D40>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000251DD653F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000251F8246E30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000251F82478B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000251DD6BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000251F82478B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000251F8246DA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000251F82478B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000251F8213370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000251F8246DD0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000251F8246DA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000251F8246C20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000251F8246DD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000251F8105990>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000251F8246C20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000251DD60D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000251F81CF910>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000251F8247BB0>
                     └ <function get_request_handler.<locals>.app at 0x00000251F81CDFC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000251DD60C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000251F826C250>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x00000251DEFE4E50>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000251DD07CD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x00000251F826C250>
    │       └ <function create_usuario at 0x00000251DED79D80>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$Ra596zR/goH/E/E6Ypd8HeCrrgj1aCatYsSN7EVmThOjWUnfrfGOC'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$Ra596zR/goH/E/E6Ypd8HeCrrgj1aCatYsSN7EVmThOjWUnfrfGOC', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x00000251DEC36380>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x00000251DEBD96C0>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 251dec24540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x00000251DEC36380>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x00000251DE896CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x00000251DE887250>
    └ <Mapper at 0x251debd4ee0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x00000251DD81B460>
    │                      └ <Mapper at 0x251debd4ee0; Usuario>
    └ <function _configure_registries at 0x00000251DE896950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x00000251DE896A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x00000251DE887130>
    └ <Mapper at 0x251debd6650; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x00000251DE784B80>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x00000251DE862680>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x00000251DE862F80>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x251dea7e3e0; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x00000251DE8624D0>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x00000251DE887880>
            │    └ <Mapper at 0x251debd4ee0; Usuario>
            └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
ERROR    2023-03-26 14:27:57.368 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'transacoes': <Relationship at 0x251dea7dda0; transacoes>, 'id': <ColumnProperty at 0x251dec17440; id>, 'nome': <ColumnPrope...
           └ <Mapper at 0x251debd4ee0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000251DAC613F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000251DABBF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000251DABBE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000251DAB2FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>
    │    └ <function subprocess_started at 0x00000251DCF6D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000251DAB2F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000251DCF4A170>
           │       │   └ <uvicorn.server.Server object at 0x00000251DAB2F7C0>
           │       └ <function run at 0x00000251DAC62560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000251DCFEEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000251DC849E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000251DC849D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000251DC84B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000251DC79ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000251DAC18610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000251F8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000251DD65EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000251DAC18610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000251F8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000251F8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000251F8246F50>
          └ <fastapi.applications.FastAPI object at 0x00000251DD65EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000251F8212D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000251F8246F50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000251F8212D40>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000251DD653F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000251F8246E30>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000251F8246F20...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000251F82478B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000251DD6BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000251F82478B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000251F8246DA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000251F82478B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000251F8213370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000251F8246DD0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000251F8246DA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000251F8246C20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000251F8246DD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000251F8105990>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000251F8246C20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000251DD60D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000251F8213400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000251F81CF910>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000251F8247BB0>
                     └ <function get_request_handler.<locals>.app at 0x00000251F81CDFC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000251DD60C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000251F826C250>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x00000251DEFE4E50>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000251DD07CD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x00000251F826C250>
    │       └ <function create_usuario at 0x00000251DED79D80>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$Ra596zR/goH/E/E6Ypd8HeCrrgj1aCatYsSN7EVmThOjWUnfrfGOC'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$Ra596zR/goH/E/E6Ypd8HeCrrgj1aCatYsSN7EVmThOjWUnfrfGOC', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x00000251DEC36380>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x00000251DEBD96C0>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 251dec24540>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x00000251DEC36380>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x00000251DE896CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x00000251DE887250>
    └ <Mapper at 0x251debd4ee0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x00000251DD81B460>
    │                      └ <Mapper at 0x251debd4ee0; Usuario>
    └ <function _configure_registries at 0x00000251DE896950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x00000251DE896A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x00000251DE887130>
    └ <Mapper at 0x251debd6650; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x00000251DE784B80>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x00000251DE862680>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x00000251DE862F80>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x251dea7e3e0; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x00000251DE8624D0>
    └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x00000251DE887880>
            │    └ <Mapper at 0x251debd4ee0; Usuario>
            └ <Relationship at 0x251dea7e3e0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
INFO     2023-03-26 14:28:35.591 request id: app - uvicorn.server:serve - Started server process [6252]
INFO     2023-03-26 14:28:35.591 request id: app - uvicorn.server:serve - Started server process [6252]
INFO     2023-03-26 14:28:35.592 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:28:35.592 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:28:35.592 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:28:35.593 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:28:37.830 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55501 - "POST /api/v1/usuarios/ HTTP/1.1" 500
ERROR    2023-03-26 14:28:37.830 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'id': <ColumnProperty at 0x1dd85edb640; id>, 'nome': <ColumnProperty at 0x1dd85edb440; nome>, 'imagem': <ColumnProperty at 0...
           └ <Mapper at 0x1dd85f333a0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001DD81F413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001DD81E9F1C0>
           └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DD81E9E830>
    └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DD81E0FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>
    │    └ <function subprocess_started at 0x000001DD8424D6C0>
    └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DD81E0F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001DD8422A170>
           │       │   └ <uvicorn.server.Server object at 0x000001DD81E0F7C0>
           │       └ <function run at 0x000001DD81F42560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DD842CEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DD83B29E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DD83B29D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DD83B2B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DD83A7ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DD81EF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DD9F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DD8493EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DD81EF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DD9F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DD9F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DD9F52AEF0>
          └ <fastapi.applications.FastAPI object at 0x000001DD8493EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DD9F4F2D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DD9F52AEF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DD9F4F2D40>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001DD84933F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001DD9F52ADD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DD9F52B8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001DD8499A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001DD9F52B8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DD9F52ADA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DD9F52B8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001DD9F4F3370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DD9F52AB60>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DD9F52ADA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DD9F52AB00>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DD9F52AB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001DD9F3E9990>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DD9F52AB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001DD848ED990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001DD9F4B3910>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DD9F52BBB0>
                     └ <function get_request_handler.<locals>.app at 0x000001DD9F4B1FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DD848EC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001DD9F54C250>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x000001DD862BCE50>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DD8435CD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x000001DD9F54C250>
    │       └ <function create_usuario at 0x000001DD86059D80>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$LKUEZU6/Hy6dnSeb1nqtiuV5c/iytP3jk3D8G32mm2Qfj5KVJHrmi'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$LKUEZU6/Hy6dnSeb1nqtiuV5c/iytP3jk3D8G32mm2Qfj5KVJHrmi', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000001DD9F4B9E40>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001DD85EB57E0>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 1dd85f004f0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000001DD9F4B9E40>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x000001DD85B76CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x000001DD85B67250>
    └ <Mapper at 0x1dd85f333a0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001DD84AEB460>
    │                      └ <Mapper at 0x1dd85f333a0; Usuario>
    └ <function _configure_registries at 0x000001DD85B76950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001DD85B76A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001DD85B67130>
    └ <Mapper at 0x1dd85f31270; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001DD85A64B80>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001DD85B42680>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x000001DD85B42F80>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x1dd85d5e200; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x000001DD85B424D0>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x000001DD85B67880>
            │    └ <Mapper at 0x1dd85f333a0; Usuario>
            └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
ERROR    2023-03-26 14:28:37.856 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'id': <ColumnProperty at 0x1dd85edb640; id>, 'nome': <ColumnProperty at 0x1dd85edb440; nome>, 'imagem': <ColumnProperty at 0...
           └ <Mapper at 0x1dd85f333a0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001DD81F413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001DD81E9F1C0>
           └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DD81E9E830>
    └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DD81E0FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>
    │    └ <function subprocess_started at 0x000001DD8424D6C0>
    └ <SpawnProcess name='SpawnProcess-4' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DD81E0F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001DD8422A170>
           │       │   └ <uvicorn.server.Server object at 0x000001DD81E0F7C0>
           │       └ <function run at 0x000001DD81F42560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DD842CEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DD83B29E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DD83B29D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DD83B2B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DD83A7ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DD81EF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DD9F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DD8493EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DD81EF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DD9F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DD9F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DD9F52AEF0>
          └ <fastapi.applications.FastAPI object at 0x000001DD8493EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DD9F4F2D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DD9F52AEF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DD9F4F2D40>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001DD84933F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001DD9F52ADD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DD9F52AEC0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DD9F52B8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001DD8499A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001DD9F52B8B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DD9F52ADA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DD9F52B8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001DD9F4F3370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DD9F52AB60>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DD9F52ADA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DD9F52AB00>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DD9F52AB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001DD9F3E9990>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DD9F52AB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001DD848ED990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DD9F4F3400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001DD9F4B3910>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DD9F52BBB0>
                     └ <function get_request_handler.<locals>.app at 0x000001DD9F4B1FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DD848EC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001DD9F54C250>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x000001DD862BCE50>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DD8435CD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x000001DD9F54C250>
    │       └ <function create_usuario at 0x000001DD86059D80>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$LKUEZU6/Hy6dnSeb1nqtiuV5c/iytP3jk3D8G32mm2Qfj5KVJHrmi'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$LKUEZU6/Hy6dnSeb1nqtiuV5c/iytP3jk3D8G32mm2Qfj5KVJHrmi', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000001DD9F4B9E40>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001DD85EB57E0>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 1dd85f004f0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000001DD9F4B9E40>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x000001DD85B76CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x000001DD85B67250>
    └ <Mapper at 0x1dd85f333a0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001DD84AEB460>
    │                      └ <Mapper at 0x1dd85f333a0; Usuario>
    └ <function _configure_registries at 0x000001DD85B76950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001DD85B76A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001DD85B67130>
    └ <Mapper at 0x1dd85f31270; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001DD85A64B80>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001DD85B42680>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x000001DD85B42F80>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x1dd85d5e200; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x000001DD85B424D0>
    └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x000001DD85B67880>
            │    └ <Mapper at 0x1dd85f333a0; Usuario>
            └ <Relationship at 0x1dd85d5e200; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
INFO     2023-03-26 14:29:05.125 request id: app - uvicorn.server:serve - Started server process [4148]
INFO     2023-03-26 14:29:05.125 request id: app - uvicorn.server:serve - Started server process [4148]
INFO     2023-03-26 14:29:05.125 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:29:05.126 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:29:05.126 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:29:05.126 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:29:07.916 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55512 - "POST /api/v1/usuarios/ HTTP/1.1" 200
INFO     2023-03-26 14:29:15.847 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55513 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 500
ERROR    2023-03-26 14:29:15.847 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002215EF413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002215EE9F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002215EE9E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002215EE0FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>
    │    └ <function subprocess_started at 0x000002216119D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002215EE0F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002216117A170>
           │       │   └ <uvicorn.server.Server object at 0x000002215EE0F7C0>
           │       └ <function run at 0x000002215EF42560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002216121EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022160AC9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022160AC9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022160ACB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022160A2ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002215EEF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002217C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002216185EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002215EEF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002217C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002217C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002217C446C20>
          └ <fastapi.applications.FastAPI object at 0x000002216185EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002217C4132E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002217C446BF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002217C446C20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002217C4132E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002217C446B00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002217C446BF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002217C4132E0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002217C4472E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000221618BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002217C4472E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002217C446AA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002217C4472E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002217C413010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002217C446A70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002217C446AA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002217C446A10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002217C446A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002217C30D8A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002217C446A10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002216180D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002217C3CFC70>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002217C447BB0>
                     └ <function get_request_handler.<locals>.app at 0x000002217C3CFBE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 255, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x000002216180C670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 152, in serialize_response
    return jsonable_encoder(response_content)
           │                └ <unprintable dict object>
           └ <function jsonable_encoder at 0x000002216180C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 117, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x000002216180C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 131, in jsonable_encoder
    jsonable_encoder(
    └ <function jsonable_encoder at 0x000002216180C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 74, in jsonable_encoder
    obj_dict = dataclasses.asdict(obj)
               │           │      └ <unprintable UsuarioResponseSchema object>
               │           └ <function asdict at 0x00000221611CE320>
               └ <module 'dataclasses' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\dataclasses.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1239, in asdict
    return _asdict_inner(obj, dict_factory)
           │             │    └ <class 'dict'>
           │             └ <unprintable UsuarioResponseSchema object>
           └ <function _asdict_inner at 0x00000221611CE3B0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1246, in _asdict_inner
    value = _asdict_inner(getattr(obj, f.name), dict_factory)
            │                     │    │ │      └ <class 'dict'>
            │                     │    │ └ <member 'name' of 'Field' objects>
            │                     │    └ Field(name='transacoes',type=list[src.core.schemas.TransacaoResponseSchema],default=<dataclasses._MISSING_TYPE object at 0x00...
            │                     └ <unprintable UsuarioResponseSchema object>
            └ <function _asdict_inner at 0x00000221611CE3B0>

AttributeError: 'UsuarioResponseSchema' object has no attribute 'transacoes'
ERROR    2023-03-26 14:29:15.868 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002215EF413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002215EE9F1C0>
           └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002215EE9E830>
    └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002215EE0FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>
    │    └ <function subprocess_started at 0x000002216119D6C0>
    └ <SpawnProcess name='SpawnProcess-5' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002215EE0F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002216117A170>
           │       │   └ <uvicorn.server.Server object at 0x000002215EE0F7C0>
           │       └ <function run at 0x000002215EF42560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002216121EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022160AC9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022160AC9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022160ACB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022160A2ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002215EEF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002217C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002216185EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002215EEF8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002217C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002217C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002217C446C20>
          └ <fastapi.applications.FastAPI object at 0x000002216185EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002217C4132E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002217C446BF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002217C446C20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002217C4132E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002217C446B00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002217C446BF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002217C4132E0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002217C4472E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000221618BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002217C4472E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002217C446AA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002217C4472E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002217C413010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002217C446A70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002217C446AA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002217C446A10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002217C446A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002217C30D8A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002217C446A10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002216180D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002217C4130A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002217C3CFC70>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002217C447BB0>
                     └ <function get_request_handler.<locals>.app at 0x000002217C3CFBE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 255, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x000002216180C670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 152, in serialize_response
    return jsonable_encoder(response_content)
           │                └ <unprintable dict object>
           └ <function jsonable_encoder at 0x000002216180C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 117, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x000002216180C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 131, in jsonable_encoder
    jsonable_encoder(
    └ <function jsonable_encoder at 0x000002216180C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 74, in jsonable_encoder
    obj_dict = dataclasses.asdict(obj)
               │           │      └ <unprintable UsuarioResponseSchema object>
               │           └ <function asdict at 0x00000221611CE320>
               └ <module 'dataclasses' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\dataclasses.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1239, in asdict
    return _asdict_inner(obj, dict_factory)
           │             │    └ <class 'dict'>
           │             └ <unprintable UsuarioResponseSchema object>
           └ <function _asdict_inner at 0x00000221611CE3B0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1246, in _asdict_inner
    value = _asdict_inner(getattr(obj, f.name), dict_factory)
            │                     │    │ │      └ <class 'dict'>
            │                     │    │ └ <member 'name' of 'Field' objects>
            │                     │    └ Field(name='transacoes',type=list[src.core.schemas.TransacaoResponseSchema],default=<dataclasses._MISSING_TYPE object at 0x00...
            │                     └ <unprintable UsuarioResponseSchema object>
            └ <function _asdict_inner at 0x00000221611CE3B0>

AttributeError: 'UsuarioResponseSchema' object has no attribute 'transacoes'
INFO     2023-03-26 14:40:32.282 request id: app - uvicorn.server:serve - Started server process [5204]
INFO     2023-03-26 14:40:32.282 request id: app - uvicorn.server:serve - Started server process [5204]
INFO     2023-03-26 14:40:32.282 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:40:32.283 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:40:32.283 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:40:32.283 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:40:34.507 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55613 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:40:45.481 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55614 - "DELETE /api/v1/usuarios/%7Bid%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 14:40:45.482 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3380, in delete
    state = attributes.instance_state(instance)
            │          │              └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'UsuarioResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 172
               │     └ 3
               └ <function _main at 0x00000162AD6113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 172
           │    └ <function BaseProcess._bootstrap at 0x00000162AD56F1C0>
           └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000162AD56E830>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000162AD4DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    └ <function subprocess_started at 0x00000162AF86D6C0>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000162AD4DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000162AF84A170>
           │       │   └ <uvicorn.server.Server object at 0x00000162AD4DF7C0>
           │       └ <function run at 0x00000162AD612560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000162AF8EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000162AF199E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000162AF199D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000162AF19B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000162AF0FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>
          └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua': '"Google Chrome";v="111", "Not(A:Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93130>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000162AFF23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000162CAABE740>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000162AFF8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8DDB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000162CAA931C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000162CA9E94E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000162AFEDD990>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000162CAA2FB50>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000162CAB8E080>
                     └ <function get_request_handler.<locals>.app at 0x00000162CAA2FAC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000162AFEDC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000162CAABF8E0>, 'usuario_id': 1}
                 │         └ <function remover_usuario at 0x00000162B18B5240>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000162CAA1F400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 46, in remover_usuario
    service.remove_usuario(db, usuario_id=usuario_id)
    │       │              │              └ 1
    │       │              └ <sqlalchemy.orm.session.Session object at 0x00000162CAABF8E0>
    │       └ <function remove_usuario at 0x00000162B1645EA0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 48, in remove_usuario
    db.delete(_usuario)
    │  │      └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
    │  └ <function Session.delete at 0x00000162B1219D80>
    └ <sqlalchemy.orm.session.Session object at 0x00000162CAABF8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3382, in delete
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.core.schemas.UsuarioResponseSchema' is not mapped
ERROR    2023-03-26 14:40:45.503 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3380, in delete
    state = attributes.instance_state(instance)
            │          │              └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'UsuarioResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 172
               │     └ 3
               └ <function _main at 0x00000162AD6113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 172
           │    └ <function BaseProcess._bootstrap at 0x00000162AD56F1C0>
           └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000162AD56E830>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000162AD4DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    └ <function subprocess_started at 0x00000162AF86D6C0>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000162AD4DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000162AF84A170>
           │       │   └ <uvicorn.server.Server object at 0x00000162AD4DF7C0>
           │       └ <function run at 0x00000162AD612560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000162AF8EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000162AF199E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000162AF199D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000162AF19B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000162AF0FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>
          └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua': '"Google Chrome";v="111", "Not(A:Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93130>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000162AFF23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000162CAABE740>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000162AFF8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8DDB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8DDB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000162CAA931C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000162CA9E94E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000162AFEDD990>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CAA93250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000162CAA2FB50>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000162CAB8E080>
                     └ <function get_request_handler.<locals>.app at 0x00000162CAA2FAC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000162AFEDC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000162CAABF8E0>, 'usuario_id': 1}
                 │         └ <function remover_usuario at 0x00000162B18B5240>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000162CAA1F400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 46, in remover_usuario
    service.remove_usuario(db, usuario_id=usuario_id)
    │       │              │              └ 1
    │       │              └ <sqlalchemy.orm.session.Session object at 0x00000162CAABF8E0>
    │       └ <function remove_usuario at 0x00000162B1645EA0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 48, in remove_usuario
    db.delete(_usuario)
    │  │      └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
    │  └ <function Session.delete at 0x00000162B1219D80>
    └ <sqlalchemy.orm.session.Session object at 0x00000162CAABF8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3382, in delete
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.core.schemas.UsuarioResponseSchema' is not mapped
INFO     2023-03-26 14:42:33.349 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55633 - "DELETE /api/v1/usuarios/%7Bid%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 14:42:33.349 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3380, in delete
    state = attributes.instance_state(instance)
            │          │              └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'UsuarioResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 172
               │     └ 3
               └ <function _main at 0x00000162AD6113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 172
           │    └ <function BaseProcess._bootstrap at 0x00000162AD56F1C0>
           └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000162AD56E830>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000162AD4DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    └ <function subprocess_started at 0x00000162AF86D6C0>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000162AD4DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000162AF84A170>
           │       │   └ <uvicorn.server.Server object at 0x00000162AD4DF7C0>
           │       └ <function run at 0x00000162AD612560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000162AF8EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000162AF199E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000162AF199D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000162AF19B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000162AF0FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>
          └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua': '"Google Chrome";v="111", "Not(A:Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000162AFF23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000162CAABE740>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8EEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000162AFF8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8EEC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8EEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000162CACA2950>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000162CA9E94E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000162AFEDD990>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000162CAA2FB50>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000162CAB8F8E0>
                     └ <function get_request_handler.<locals>.app at 0x00000162CAA2FAC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000162AFEDC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000162CAB8E290>, 'usuario_id': 1}
                 │         └ <function remover_usuario at 0x00000162B18B5240>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000162CAA1F400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 46, in remover_usuario
    service.remove_usuario(db, usuario_id=usuario_id)
    │       │              │              └ 1
    │       │              └ <sqlalchemy.orm.session.Session object at 0x00000162CAB8E290>
    │       └ <function remove_usuario at 0x00000162B1645EA0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 48, in remove_usuario
    db.delete(_usuario)
    │  │      └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
    │  └ <function Session.delete at 0x00000162B1219D80>
    └ <sqlalchemy.orm.session.Session object at 0x00000162CAB8E290>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3382, in delete
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.core.schemas.UsuarioResponseSchema' is not mapped
ERROR    2023-03-26 14:42:33.360 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3380, in delete
    state = attributes.instance_state(instance)
            │          │              └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'UsuarioResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 172
               │     └ 3
               └ <function _main at 0x00000162AD6113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 172
           │    └ <function BaseProcess._bootstrap at 0x00000162AD56F1C0>
           └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000162AD56E830>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000162AD4DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>
    │    └ <function subprocess_started at 0x00000162AF86D6C0>
    └ <SpawnProcess name='SpawnProcess-6' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000162AD4DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000162AF84A170>
           │       │   └ <uvicorn.server.Server object at 0x00000162AD4DF7C0>
           │       └ <function run at 0x00000162AD612560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000162AF8EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000162AF199E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000162AF199D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000162AF19B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000162AF0FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000162AD5C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000162CA...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>
          └ <fastapi.applications.FastAPI object at 0x00000162AFF2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000162CAABE860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua': '"Google Chrome";v="111", "Not(A:Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000162CAA93BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000162AFF23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000162CAABE740>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000162CAABE830...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8EEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000162AFF8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8EEC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000162CAB8EEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000162CACA2950>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000162CAABE6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000162CAABE6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000162CA9E94E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000162CAABE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000162AFEDD990>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000162CACA29E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000162CAA2FB50>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000162CAB8F8E0>
                     └ <function get_request_handler.<locals>.app at 0x00000162CAA2FAC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000162AFEDC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000162CAB8E290>, 'usuario_id': 1}
                 │         └ <function remover_usuario at 0x00000162B18B5240>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000162CAA1F400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 46, in remover_usuario
    service.remove_usuario(db, usuario_id=usuario_id)
    │       │              │              └ 1
    │       │              └ <sqlalchemy.orm.session.Session object at 0x00000162CAB8E290>
    │       └ <function remove_usuario at 0x00000162B1645EA0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 48, in remove_usuario
    db.delete(_usuario)
    │  │      └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
    │  └ <function Session.delete at 0x00000162B1219D80>
    └ <sqlalchemy.orm.session.Session object at 0x00000162CAB8E290>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3382, in delete
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.core.schemas.UsuarioResponseSchema' is not mapped
INFO     2023-03-26 14:43:24.912 request id: app - uvicorn.server:serve - Started server process [10700]
INFO     2023-03-26 14:43:24.912 request id: app - uvicorn.server:serve - Started server process [10700]
INFO     2023-03-26 14:43:24.912 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:43:24.913 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:43:24.913 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:43:24.913 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:43:33.749 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55645 - "POST /api/v1/usuarios/ HTTP/1.1" 500
ERROR    2023-03-26 14:43:33.750 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000029C7A09E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000029C7A3DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'NOME': 'Eduardo Sampaio', 'IMAGEM': None, 'EMAIL': 'eduardo@gmail.com', 'IS_ADMIN': False, 'SENHA': '$2b$12$Ke2U0XmvQhEF3P8...
    │      │       └ 'INSERT INTO usuarios ("NOME", "IMAGEM", "EMAIL", "IS_ADMIN", "SENHA", "CREATED_AT") VALUES (%(NOME)s, %(IMAGEM)s, %(EMAIL)s,...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000029C13D13920; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "ix_usuarios_EMAIL"
DETAIL:  Key ("EMAIL")=(eduardo@gmail.com) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000029C767113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000029C7666F1C0>
           └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029C7666E830>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000029C765DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    └ <function subprocess_started at 0x0000029C7896D6C0>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000029C765DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000029C7894A170>
           │       │   └ <uvicorn.server.Server object at 0x0000029C765DF7C0>
           │       └ <function run at 0x0000029C76712560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000029C789EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029C78299E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029C78299D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029C7829B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029C781FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>
          └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13C52F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13C52F80>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000029C79053F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000029C13C7E710>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13C7F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000029C790BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13C7F3D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13C7F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000029C13C532E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000029C13B094B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000029C7900D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000029C13B4F880>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000029C13C7F6D0>
                     └ <function get_request_handler.<locals>.app at 0x0000029C13B4DF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029C7900C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x0000029C7A9E4DC0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029C78A7CD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>
    │       └ <function create_usuario at 0x0000029C7A775CF0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 33, in create_usuario
    db.commit()
    │  └ <function Session.commit at 0x0000029C7A348A60>
    └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000029C7A337C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>
                └ <function SessionTransaction.commit at 0x0000029C7A337BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000029C7A337B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>
                └ <function SessionTransaction._prepare_impl at 0x0000029C7A337A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000029C7A34A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000029C7A34A830>
    └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000029C13D26E00>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_usuarios_EMAIL"\nDETAIL:...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000029C7A334AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000029C13CAF580>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000029C13CAF580>
    │   └ <function SaveUpdateAll.execute at 0x0000029C7A3353F0>
    └ SaveUpdateAll(Mapper[Usuario(usuarios)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000029C7A2D2C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000029C7A31C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x0000029C7A00F0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x0000029C13CFFBB0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000029C7A00F370>
           └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000029C7A00F520>
          └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000029C7A00F5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000029C7A00F7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "ix_usuarios_EMAIL"\nDETAIL:  Key ("EMAIL")=(eduardo@gmail.co...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "ix_usuarios_EMAI...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_usuarios_EMAIL"\nDETAIL:...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000029C7A09E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000029C7A3DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'NOME': 'Eduardo Sampaio', 'IMAGEM': None, 'EMAIL': 'eduardo@gmail.com', 'IS_ADMIN': False, 'SENHA': '$2b$12$Ke2U0XmvQhEF3P8...
    │      │       └ 'INSERT INTO usuarios ("NOME", "IMAGEM", "EMAIL", "IS_ADMIN", "SENHA", "CREATED_AT") VALUES (%(NOME)s, %(IMAGEM)s, %(EMAIL)s,...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000029C13D13920; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_usuarios_EMAIL"
DETAIL:  Key ("EMAIL")=(eduardo@gmail.com) already exists.

[SQL: INSERT INTO usuarios ("NOME", "IMAGEM", "EMAIL", "IS_ADMIN", "SENHA", "CREATED_AT") VALUES (%(NOME)s, %(IMAGEM)s, %(EMAIL)s, %(IS_ADMIN)s, %(SENHA)s, %(CREATED_AT)s) RETURNING usuarios."USUARIO_ID"]
[parameters: {'NOME': 'Eduardo Sampaio', 'IMAGEM': None, 'EMAIL': 'eduardo@gmail.com', 'IS_ADMIN': False, 'SENHA': '$2b$12$Ke2U0XmvQhEF3P8of85ZV./oK43Lzskx2S/g2FX0fDixrxLGQ6n1i', 'CREATED_AT': datetime.datetime(2023, 3, 26, 17, 43, 24, 8103)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2023-03-26 14:43:33.778 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000029C7A09E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000029C7A3DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'NOME': 'Eduardo Sampaio', 'IMAGEM': None, 'EMAIL': 'eduardo@gmail.com', 'IS_ADMIN': False, 'SENHA': '$2b$12$Ke2U0XmvQhEF3P8...
    │      │       └ 'INSERT INTO usuarios ("NOME", "IMAGEM", "EMAIL", "IS_ADMIN", "SENHA", "CREATED_AT") VALUES (%(NOME)s, %(IMAGEM)s, %(EMAIL)s,...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000029C13D13920; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "ix_usuarios_EMAIL"
DETAIL:  Key ("EMAIL")=(eduardo@gmail.com) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000029C767113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000029C7666F1C0>
           └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029C7666E830>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000029C765DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    └ <function subprocess_started at 0x0000029C7896D6C0>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000029C765DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000029C7894A170>
           │       │   └ <uvicorn.server.Server object at 0x0000029C765DF7C0>
           │       └ <function run at 0x0000029C76712560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000029C789EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029C78299E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029C78299D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029C7829B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029C781FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>
          └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13C52F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13C52F80>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000029C79053F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000029C13C7E710>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13C7F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000029C790BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13C7F3D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13C7F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000029C13C532E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000029C13B094B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000029C7900D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13C53370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000029C13B4F880>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000029C13C7F6D0>
                     └ <function get_request_handler.<locals>.app at 0x0000029C13B4DF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029C7900C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x0000029C7A9E4DC0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029C78A7CD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>
    │       └ <function create_usuario at 0x0000029C7A775CF0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 33, in create_usuario
    db.commit()
    │  └ <function Session.commit at 0x0000029C7A348A60>
    └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000029C7A337C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>
                └ <function SessionTransaction.commit at 0x0000029C7A337BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000029C7A337B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>
                └ <function SessionTransaction._prepare_impl at 0x0000029C7A337A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x0000029C7A34A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000029C13B0E0C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x0000029C7A34A830>
    └ <sqlalchemy.orm.session.Session object at 0x0000029C13C7FD30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x0000029C13D26E00>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_usuarios_EMAIL"\nDETAIL:...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000029C7A334AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000029C13CAF580>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000029C13CAF580>
    │   └ <function SaveUpdateAll.execute at 0x0000029C7A3353F0>
    └ SaveUpdateAll(Mapper[Usuario(usuarios)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000029C7A2D2C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x0000029C7A31C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x0000029C7A00F0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x0000029C13CFFBB0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000029C7A00F370>
           └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000029C7A00F520>
          └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000029C7A00F5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000029C7A00F7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "ix_usuarios_EMAIL"\nDETAIL:  Key ("EMAIL")=(eduardo@gmail.co...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "ix_usuarios_EMAI...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_usuarios_EMAIL"\nDETAIL:...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000029C7A09E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x0000029C7A3DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000029C13CFFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'NOME': 'Eduardo Sampaio', 'IMAGEM': None, 'EMAIL': 'eduardo@gmail.com', 'IS_ADMIN': False, 'SENHA': '$2b$12$Ke2U0XmvQhEF3P8...
    │      │       └ 'INSERT INTO usuarios ("NOME", "IMAGEM", "EMAIL", "IS_ADMIN", "SENHA", "CREATED_AT") VALUES (%(NOME)s, %(IMAGEM)s, %(EMAIL)s,...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x0000029C13D13920; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_usuarios_EMAIL"
DETAIL:  Key ("EMAIL")=(eduardo@gmail.com) already exists.

[SQL: INSERT INTO usuarios ("NOME", "IMAGEM", "EMAIL", "IS_ADMIN", "SENHA", "CREATED_AT") VALUES (%(NOME)s, %(IMAGEM)s, %(EMAIL)s, %(IS_ADMIN)s, %(SENHA)s, %(CREATED_AT)s) RETURNING usuarios."USUARIO_ID"]
[parameters: {'NOME': 'Eduardo Sampaio', 'IMAGEM': None, 'EMAIL': 'eduardo@gmail.com', 'IS_ADMIN': False, 'SENHA': '$2b$12$Ke2U0XmvQhEF3P8of85ZV./oK43Lzskx2S/g2FX0fDixrxLGQ6n1i', 'CREATED_AT': datetime.datetime(2023, 3, 26, 17, 43, 24, 8103)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2023-03-26 14:43:43.066 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55646 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:43:56.352 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55651 - "DELETE /api/v1/usuarios/%7Bid%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 14:43:56.353 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3380, in delete
    state = attributes.instance_state(instance)
            │          │              └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'UsuarioResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000029C767113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000029C7666F1C0>
           └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029C7666E830>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000029C765DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    └ <function subprocess_started at 0x0000029C7896D6C0>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000029C765DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000029C7894A170>
           │       │   └ <uvicorn.server.Server object at 0x0000029C765DF7C0>
           │       └ <function run at 0x0000029C76712560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000029C789EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029C78299E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029C78299D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029C7829B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029C781FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>
          └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13D20C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua': '"Google Chrome";v="111", "Not(A:Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13D20C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000029C79053F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000029C13C7E710>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13FCA5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000029C790BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13FCA5F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13FCA5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000029C13D20940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000029C13B094B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000029C7900D990>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000029C13B4FAC0>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000029C13FCA8C0>
                     └ <function get_request_handler.<locals>.app at 0x0000029C13B4FA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029C7900C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000029C13D39330>, 'usuario_id': 1}
                 │         └ <function remover_usuario at 0x0000029C7A9E51B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029C13B3F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 46, in remover_usuario
    service.remove_usuario(db, usuario_id=usuario_id)
    │       │              │              └ 1
    │       │              └ <sqlalchemy.orm.session.Session object at 0x0000029C13D39330>
    │       └ <function remove_usuario at 0x0000029C7A775E10>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 48, in remove_usuario
    db.delete(_usuario)
    │  │      └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
    │  └ <function Session.delete at 0x0000029C7A349D80>
    └ <sqlalchemy.orm.session.Session object at 0x0000029C13D39330>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3382, in delete
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.core.schemas.UsuarioResponseSchema' is not mapped
ERROR    2023-03-26 14:43:56.364 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3380, in delete
    state = attributes.instance_state(instance)
            │          │              └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'UsuarioResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000029C767113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000029C7666F1C0>
           └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029C7666E830>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000029C765DFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>
    │    └ <function subprocess_started at 0x0000029C7896D6C0>
    └ <SpawnProcess name='SpawnProcess-7' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000029C765DF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000029C7894A170>
           │       │   └ <uvicorn.server.Server object at 0x0000029C765DF7C0>
           │       └ <function run at 0x0000029C76712560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000029C789EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029C78299E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029C78299D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029C7829B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029C781FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C766C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C13...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>
          └ <fastapi.applications.FastAPI object at 0x0000029C7905EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13D20C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C13C7E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'sec-ch-ua': '"Google Chrome";v="111", "Not(A:Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C13D20C10>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000029C79053F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000029C13C7E710>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000029C13C7E800...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13FCA5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000029C790BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13FCA5F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C13FCA5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000029C13D20940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C13C7E6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C13C7E680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000029C13B094B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C13C7E620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000029C7900D990>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C13D20820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000029C13B4FAC0>
          └ APIRoute(path='/api/v1/usuarios/{id}', name='remover_usuario', methods=['DELETE'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000029C13FCA8C0>
                     └ <function get_request_handler.<locals>.app at 0x0000029C13B4FA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029C7900C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000029C13D39330>, 'usuario_id': 1}
                 │         └ <function remover_usuario at 0x0000029C7A9E51B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029C13B3F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 46, in remover_usuario
    service.remove_usuario(db, usuario_id=usuario_id)
    │       │              │              └ 1
    │       │              └ <sqlalchemy.orm.session.Session object at 0x0000029C13D39330>
    │       └ <function remove_usuario at 0x0000029C7A775E10>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 48, in remove_usuario
    db.delete(_usuario)
    │  │      └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
    │  └ <function Session.delete at 0x0000029C7A349D80>
    └ <sqlalchemy.orm.session.Session object at 0x0000029C13D39330>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3382, in delete
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ UsuarioResponseSchema(usuario_id=1, is_admin=False, nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None)
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.core.schemas.UsuarioResponseSchema' is not mapped
INFO     2023-03-26 14:44:45.650 request id: app - uvicorn.server:serve - Started server process [3304]
INFO     2023-03-26 14:44:45.650 request id: app - uvicorn.server:serve - Started server process [3304]
INFO     2023-03-26 14:44:45.651 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:44:45.651 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:44:45.652 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:44:45.652 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:44:48.891 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55663 - "DELETE /api/v1/usuarios/%7Bid%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 14:45:25.537 request id: app - uvicorn.server:serve - Started server process [1152]
INFO     2023-03-26 14:45:25.537 request id: app - uvicorn.server:serve - Started server process [1152]
INFO     2023-03-26 14:45:25.537 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:45:25.537 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:45:25.538 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:45:25.538 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:45:36.986 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55684 - "POST /api/v1/usuarios/ HTTP/1.1" 500
ERROR    2023-03-26 14:45:36.986 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'id': <ColumnProperty at 0x28775c53640; id>, 'nome': <ColumnProperty at 0x28775c53440; nome>, 'imagem': <ColumnProperty at 0...
           └ <Mapper at 0x28775ca33a0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000028771CF13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000028771C4F1C0>
           └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000028771C4E830>
    └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000028771BBFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>
    │    └ <function subprocess_started at 0x0000028773FBD6C0>
    └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000028771BBF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000028773F9A170>
           │       │   └ <uvicorn.server.Server object at 0x0000028771BBF7C0>
           │       └ <function run at 0x0000028771CF2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002877403EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028773899E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028773899D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002877389B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000287737EADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028771CA8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002870F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000287746AEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028771CA8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002870F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002870F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002870F252980>
          └ <fastapi.applications.FastAPI object at 0x00000287746AEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002870F222F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002870F252980>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002870F222F80>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000287746A3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002870F252860>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002870F253520>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002877470A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002870F253520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002870F252800>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002870F253520>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002870F2232E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002870F2527D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002870F252800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002870F252770>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002870F2527D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002870F15D600>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002870F252770>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002877465D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002870F19F880>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002870F253820>
                     └ <function get_request_handler.<locals>.app at 0x000002870F19DF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002877465C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002870F253E80>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x0000028776034DC0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000287740CCD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x000002870F253E80>
    │       └ <function create_usuario at 0x0000028775DC9CF0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$4MEKLM9tF9tBb75JBiAmTOJpxjnOc4XgnZWZJYIkP866.4.JNRYGa'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$4MEKLM9tF9tBb75JBiAmTOJpxjnOc4XgnZWZJYIkP866.4.JNRYGa', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000002870F1E9F00>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x0000028775C256C0>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 28775c70630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000002870F1E9F00>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x00000287758E6CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x00000287758D7250>
    └ <Mapper at 0x28775ca33a0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000002877486B460>
    │                      └ <Mapper at 0x28775ca33a0; Usuario>
    └ <function _configure_registries at 0x00000287758E6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x00000287758E6A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x00000287758D7130>
    └ <Mapper at 0x28775ca1270; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x00000287757D4B80>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x00000287758B2680>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x00000287758B2F80>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x28775ace2a0; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x00000287758B24D0>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x00000287758D7880>
            │    └ <Mapper at 0x28775ca33a0; Usuario>
            └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
ERROR    2023-03-26 14:45:37.009 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2491, in get_property
    return self._props[key]
           │    │      └ 'usuarios'
           │    └ {'id': <ColumnProperty at 0x28775c53640; id>, 'nome': <ColumnProperty at 0x28775c53440; nome>, 'imagem': <ColumnProperty at 0...
           └ <Mapper at 0x28775ca33a0; Usuario>

KeyError: 'usuarios'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000028771CF13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000028771C4F1C0>
           └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000028771C4E830>
    └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000028771BBFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>
    │    └ <function subprocess_started at 0x0000028773FBD6C0>
    └ <SpawnProcess name='SpawnProcess-9' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000028771BBF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000028773F9A170>
           │       │   └ <uvicorn.server.Server object at 0x0000028771BBF7C0>
           │       └ <function run at 0x0000028771CF2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002877403EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028773899E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028773899D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002877389B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000287737EADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028771CA8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002870F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000287746AEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028771CA8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002870F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002870F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002870F252980>
          └ <fastapi.applications.FastAPI object at 0x00000287746AEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002870F222F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002870F252980>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '82', 'sec-ch-ua': '"Google Chrome";v="111",...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002870F222F80>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000287746A3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002870F252860>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002870F252950...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002870F253520>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002877470A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002870F253520>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002870F252800>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002870F253520>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002870F2232E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002870F2527D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002870F252800>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002870F252770>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002870F2527D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002870F15D600>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002870F252770>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002877465D990>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002870F223370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002870F19F880>
          └ APIRoute(path='/api/v1/usuarios/', name='create_usuario', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002870F253820>
                     └ <function get_request_handler.<locals>.app at 0x000002870F19DF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002877465C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002870F253E80>, 'usuario': UsuarioRequestSchema(nome='Eduardo Sampaio',...
                 │         └ <function create_usuario at 0x0000028776034DC0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000287740CCD60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 32, in create_usuario
    service.create_usuario(db, usuario)
    │       │              │   └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
    │       │              └ <sqlalchemy.orm.session.Session object at 0x000002870F253E80>
    │       └ <function create_usuario at 0x0000028775DC9CF0>
    └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 31, in create_usuario
    _usuario = Usuario(nome=usuario.nome, email=usuario.email, senha=hashed_senha)
               │            │       │           │       │            └ '$2b$12$4MEKLM9tF9tBb75JBiAmTOJpxjnOc4XgnZWZJYIkP866.4.JNRYGa'
               │            │       │           │       └ 'eduardo@gmail.com'
               │            │       │           └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               │            │       └ 'Eduardo Sampaio'
               │            └ UsuarioRequestSchema(nome='Eduardo Sampaio', email='eduardo@gmail.com', imagem=None, senha='1234')
               └ <class 'src.core.models.Usuario'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'senha': '$2b$12$4MEKLM9tF9tBb75JBiAmTOJpxjnOc4XgnZWZJYIkP866.4.JNRYGa', 'imagem': None}
    │       │        │    │     └ ('Eduardo Sampaio', 'eduardo@gmail.com')
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000002870F1E9F00>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x0000028775C256C0>
    └ <ClassManager of <class 'src.core.models.Usuario'> at 28775c70630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000002870F1E9F00>, ('Eduardo Sampaio', 'eduardo@gmail.com'), {'senha': '$2b$...
    └ <function _event_on_init at 0x00000287758E6CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x00000287758D7250>
    └ <Mapper at 0x28775ca33a0; Usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000002877486B460>
    │                      └ <Mapper at 0x28775ca33a0; Usuario>
    └ <function _configure_registries at 0x00000287758E6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x00000287758E6A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x00000287758D7130>
    └ <Mapper at 0x28775ca1270; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x00000287757D4B80>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x00000287758B2680>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1637, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x00000287758B2F80>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 2128, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'usuarios'
    │    │                     └ <Relationship at 0x28775ace2a0; usuario>
    │    └ <function RelationshipProperty._add_reverse_property at 0x00000287758B24D0>
    └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1569, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'usuarios'
            │    │      └ <function Mapper.get_property at 0x00000287758D7880>
            │    └ <Mapper at 0x28775ca33a0; Usuario>
            └ <Relationship at 0x28775ace2a0; usuario>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2493, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Usuario(usuarios)]' has no property 'usuarios'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
INFO     2023-03-26 14:46:39.870 request id: app - uvicorn.server:serve - Started server process [13400]
INFO     2023-03-26 14:46:39.870 request id: app - uvicorn.server:serve - Started server process [13400]
INFO     2023-03-26 14:46:39.871 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:46:39.871 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:46:39.871 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:46:39.872 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:46:45.551 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55707 - "POST /api/v1/usuarios/ HTTP/1.1" 200
INFO     2023-03-26 14:46:59.023 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55708 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:48:02.582 request id: app - uvicorn.server:serve - Started server process [14908]
INFO     2023-03-26 14:48:02.582 request id: app - uvicorn.server:serve - Started server process [14908]
INFO     2023-03-26 14:48:02.583 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:48:02.583 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:48:02.583 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:48:02.583 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:48:05.749 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55725 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 500
ERROR    2023-03-26 14:48:05.750 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 356
               │     └ 3
               └ <function _main at 0x00000130F8AE13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 356
           │    └ <function BaseProcess._bootstrap at 0x00000130F8A3F1C0>
           └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000130F8A3E830>
    └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000130F89AFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>
    │    └ <function subprocess_started at 0x00000130FADCD6C0>
    └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000130F89AF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000130FADAA170>
           │       │   └ <uvicorn.server.Server object at 0x00000130F89AF7C0>
           │       └ <function run at 0x00000130F8AE2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000130FAE4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000130FA6A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000130FA6A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000130FA6AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000130FA5FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000130F8A98610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013096...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000130FB4BEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000130F8A98610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013096...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013096...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001309611EB60>
          └ <fastapi.applications.FastAPI object at 0x00000130FB4BEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000130960F2F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001309611EB30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001309611EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000130960F2F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001309611EA40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001309611EB30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000130960F2F80>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001309611F550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000130FB51A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001309611F550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001309611EA10>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001309611F550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000130960F3130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001309611E980>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001309611EA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001309611E860>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001309611E980>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000130960596F0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001309611E860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000130FB46D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001309609FBE0>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001309611F850>
                     └ <function get_request_handler.<locals>.app at 0x000001309609FB50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000130FB46C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001309611FEB0>, 'skip': 0, 'limit': 100}
                 │         └ <function get_usuarios at 0x00000130FCE41360>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001309608BA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 53, in get_usuarios
    usuarios = service.get_usuarios(db, skip, limit)
               │       │            │   │     └ 100
               │       │            │   └ 0
               │       │            └ <sqlalchemy.orm.session.Session object at 0x000001309611FEB0>
               │       └ <function get_usuarios at 0x00000130FCA39630>
               └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 14, in get_usuarios
    list_usuario_schema.append(convert_model_to_schema(usuario))
    │                   │      │                       └ <src.core.models.Usuario object at 0x00000130961D19C0>
    │                   │      └ <function convert_model_to_schema at 0x00000130FCBDA0E0>
    │                   └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 80, in convert_model_to_schema
    return UsuarioResponseSchema(
           └ <class 'src.core.schemas.UsuarioResponseSchema'>

  File "pydantic\dataclasses.py", line 322, in pydantic.dataclasses._add_pydantic_validation_attributes.new_init
    handle_extra_init(self, *args, **kwargs)

  File "pydantic\dataclasses.py", line 286, in pydantic.dataclasses._add_pydantic_validation_attributes.handle_extra_init
    init(self, *args, **{k: v for k, v in kwargs.items() if k in self.__dataclass_fields__})

TypeError: UsuarioResponseSchema.__init__() missing 1 required positional argument: 'transacoes'
ERROR    2023-03-26 14:48:05.768 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 356
               │     └ 3
               └ <function _main at 0x00000130F8AE13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 356
           │    └ <function BaseProcess._bootstrap at 0x00000130F8A3F1C0>
           └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000130F8A3E830>
    └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000130F89AFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>
    │    └ <function subprocess_started at 0x00000130FADCD6C0>
    └ <SpawnProcess name='SpawnProcess-11' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000130F89AF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000130FADAA170>
           │       │   └ <uvicorn.server.Server object at 0x00000130F89AF7C0>
           │       └ <function run at 0x00000130F8AE2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000130FAE4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000130FA6A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000130FA6A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000130FA6AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000130FA5FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000130F8A98610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013096...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000130FB4BEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000130F8A98610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013096...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013096...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001309611EB60>
          └ <fastapi.applications.FastAPI object at 0x00000130FB4BEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000130960F2F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001309611EB30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001309611EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000130960F2F80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001309611EA40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001309611EB30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000130960F2F80>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001309611F550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000130FB51A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001309611F550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001309611EA10>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001309611F550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000130960F3130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001309611E980>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001309611EA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001309611E860>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001309611E980>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000130960596F0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001309611E860>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000130FB46D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000130960F31C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000013...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001309609FBE0>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001309611F850>
                     └ <function get_request_handler.<locals>.app at 0x000001309609FB50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000130FB46C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001309611FEB0>, 'skip': 0, 'limit': 100}
                 │         └ <function get_usuarios at 0x00000130FCE41360>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001309608BA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 53, in get_usuarios
    usuarios = service.get_usuarios(db, skip, limit)
               │       │            │   │     └ 100
               │       │            │   └ 0
               │       │            └ <sqlalchemy.orm.session.Session object at 0x000001309611FEB0>
               │       └ <function get_usuarios at 0x00000130FCA39630>
               └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 14, in get_usuarios
    list_usuario_schema.append(convert_model_to_schema(usuario))
    │                   │      │                       └ <src.core.models.Usuario object at 0x00000130961D19C0>
    │                   │      └ <function convert_model_to_schema at 0x00000130FCBDA0E0>
    │                   └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 80, in convert_model_to_schema
    return UsuarioResponseSchema(
           └ <class 'src.core.schemas.UsuarioResponseSchema'>

  File "pydantic\dataclasses.py", line 322, in pydantic.dataclasses._add_pydantic_validation_attributes.new_init
    handle_extra_init(self, *args, **kwargs)

  File "pydantic\dataclasses.py", line 286, in pydantic.dataclasses._add_pydantic_validation_attributes.handle_extra_init
    init(self, *args, **{k: v for k, v in kwargs.items() if k in self.__dataclass_fields__})

TypeError: UsuarioResponseSchema.__init__() missing 1 required positional argument: 'transacoes'
INFO     2023-03-26 14:48:33.932 request id: app - uvicorn.server:serve - Started server process [16140]
INFO     2023-03-26 14:48:33.932 request id: app - uvicorn.server:serve - Started server process [16140]
INFO     2023-03-26 14:48:33.933 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:48:33.933 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:48:33.933 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:48:33.934 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:48:37.663 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55735 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:50:16.774 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55781 - "POST /api/v1/transacoes/ HTTP/1.1" 422
INFO     2023-03-26 14:50:24.785 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55782 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:51:33.507 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55819 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 14:51:43.579 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55820 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:53:25.747 request id: app - uvicorn.server:serve - Started server process [16096]
INFO     2023-03-26 14:53:25.747 request id: app - uvicorn.server:serve - Started server process [16096]
INFO     2023-03-26 14:53:25.747 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:53:25.748 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:53:25.749 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:53:25.749 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:53:38.079 request id: app - uvicorn.server:serve - Started server process [7980]
INFO     2023-03-26 14:53:38.080 request id: app - uvicorn.server:serve - Started server process [7980]
INFO     2023-03-26 14:53:38.080 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:53:38.080 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:53:38.081 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:53:38.081 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:53:57.757 request id: app - uvicorn.server:serve - Started server process [2804]
INFO     2023-03-26 14:53:57.758 request id: app - uvicorn.server:serve - Started server process [2804]
INFO     2023-03-26 14:53:57.758 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:53:57.758 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:53:57.759 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:53:57.759 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:53:59.975 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55868 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 14:58:15.790 request id: app - uvicorn.server:serve - Started server process [1832]
INFO     2023-03-26 14:58:15.790 request id: app - uvicorn.server:serve - Started server process [1832]
INFO     2023-03-26 14:58:15.790 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:58:15.791 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:58:15.791 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:58:15.791 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:58:31.262 request id: app - uvicorn.server:serve - Started server process [5784]
INFO     2023-03-26 14:58:31.262 request id: app - uvicorn.server:serve - Started server process [5784]
INFO     2023-03-26 14:58:31.263 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:58:31.263 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:58:31.264 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:58:31.264 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:58:54.877 request id: app - uvicorn.server:serve - Started server process [4392]
INFO     2023-03-26 14:58:54.877 request id: app - uvicorn.server:serve - Started server process [4392]
INFO     2023-03-26 14:58:54.877 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:58:54.878 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 14:58:54.878 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:58:54.878 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 14:59:52.899 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55937 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 14:59:52.900 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002AC031413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002AC0309F1C0>
           └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002AC0309E830>
    └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002AC0300FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>
    │    └ <function subprocess_started at 0x000002AC0543D6C0>
    └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002AC0300F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002AC0541A170>
           │       │   └ <uvicorn.server.Server object at 0x000002AC0300F7C0>
           │       └ <function run at 0x000002AC03142560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002AC054BEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002AC04D19E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002AC04D19D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002AC04D1B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002AC04C6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002AC030F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002AC20...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002AC05B2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002AC030F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002AC20...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002AC20...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002AC2074EA40>
          └ <fastapi.applications.FastAPI object at 0x000002AC05B2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002AC20723010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002AC2074EA40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '219', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002AC20723010>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002AC05B23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002AC2074E920>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002AC2074F640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002AC05B8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002AC2074F640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002AC2074E8C0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002AC2074F640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002AC20723400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002AC2074E890>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002AC2074E8C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002AC2074E830>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002AC2074E890>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002AC206896C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002AC2074E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002AC05ADD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002AC20721090>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002AC2074F940>
                     └ <function get_request_handler.<locals>.app at 0x000002AC20721000>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002AC05ADC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002AC2074FFA0>, 'transacao_request': TransacaoRequestSchema(transacao_i...
                 │         └ <function create at 0x000002AC077A97E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002AC20717B50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(transacao_id=0, categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=dateti...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002AC2074FFA0>
                │       └ <function create_transacao at 0x000002AC077A9480>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 24, in create_transacao
    total=transacao.total,
          └ TransacaoRequestSchema(transacao_id=0, categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=dateti...

AttributeError: 'TransacaoRequestSchema' object has no attribute 'total'
ERROR    2023-03-26 14:59:52.917 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002AC031413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002AC0309F1C0>
           └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002AC0309E830>
    └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002AC0300FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>
    │    └ <function subprocess_started at 0x000002AC0543D6C0>
    └ <SpawnProcess name='SpawnProcess-18' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002AC0300F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002AC0541A170>
           │       │   └ <uvicorn.server.Server object at 0x000002AC0300F7C0>
           │       └ <function run at 0x000002AC03142560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002AC054BEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002AC04D19E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002AC04D19D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002AC04D1B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002AC04C6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002AC030F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002AC20...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002AC05B2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002AC030F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002AC20...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002AC20...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002AC2074EA40>
          └ <fastapi.applications.FastAPI object at 0x000002AC05B2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002AC20723010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002AC2074EA40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '219', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002AC20723010>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002AC05B23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002AC2074E920>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002AC2074EA10...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002AC2074F640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002AC05B8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002AC2074F640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002AC2074E8C0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002AC2074F640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002AC20723400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002AC2074E890>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002AC2074E8C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002AC2074E830>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002AC2074E890>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002AC206896C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002AC2074E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002AC05ADD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002AC20723490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002AC20721090>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002AC2074F940>
                     └ <function get_request_handler.<locals>.app at 0x000002AC20721000>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002AC05ADC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002AC2074FFA0>, 'transacao_request': TransacaoRequestSchema(transacao_i...
                 │         └ <function create at 0x000002AC077A97E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002AC20717B50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(transacao_id=0, categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=dateti...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002AC2074FFA0>
                │       └ <function create_transacao at 0x000002AC077A9480>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 24, in create_transacao
    total=transacao.total,
          └ TransacaoRequestSchema(transacao_id=0, categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=dateti...

AttributeError: 'TransacaoRequestSchema' object has no attribute 'total'
INFO     2023-03-26 15:00:05.664 request id: app - uvicorn.server:serve - Started server process [11852]
INFO     2023-03-26 15:00:05.664 request id: app - uvicorn.server:serve - Started server process [11852]
INFO     2023-03-26 15:00:05.665 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:00:05.665 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:00:05.666 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:00:05.666 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:00:10.336 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55950 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 15:00:30.190 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55951 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 15:02:06.156 request id: app - uvicorn.server:serve - Started server process [1268]
INFO     2023-03-26 15:02:06.156 request id: app - uvicorn.server:serve - Started server process [1268]
INFO     2023-03-26 15:02:06.157 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:02:06.157 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:02:06.157 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:02:06.157 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:02:09.483 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55968 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 500
ERROR    2023-03-26 15:02:09.484 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000028F15D913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000028F15CEF1C0>
           └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000028F15CEE830>
    └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000028F15C5FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>
    │    └ <function subprocess_started at 0x0000028F1807D6C0>
    └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000028F15C5F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000028F1805A170>
           │       │   └ <uvicorn.server.Server object at 0x0000028F15C5F7C0>
           │       └ <function run at 0x0000028F15D92560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000028F180FEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028F17959E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028F17959D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028F1795B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028F178AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028F15D48610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028F33...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000028F1876EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028F15D48610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028F33...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028F33...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028F333BE680>
          └ <fastapi.applications.FastAPI object at 0x0000028F1876EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028F333930A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028F333BE650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028F333BE680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028F333930A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000028F333BE560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028F333BE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028F333930A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000028F333BF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000028F187CA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000028F333BF160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000028F333BE500>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000028F333BF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000028F33393250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028F333BE4D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000028F333BE500>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000028F333BE470>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028F333BE4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000028F33219300>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000028F333BE470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000028F1871D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000028F33343D00>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000028F333BF460>
                     └ <function get_request_handler.<locals>.app at 0x0000028F33343C70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000028F1871C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000028F333BFAC0>, 'skip': 0, 'limit': 100}
                 │         └ <function get_usuarios at 0x0000028F1A0E9480>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000028F3325F610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 53, in get_usuarios
    usuarios = service.get_usuarios(db, skip, limit)
               │       │            │   │     └ 100
               │       │            │   └ 0
               │       │            └ <sqlalchemy.orm.session.Session object at 0x0000028F333BFAC0>
               │       └ <function get_usuarios at 0x0000028F19CE96C0>
               └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 14, in get_usuarios
    list_usuario_schema.append(convert_model_to_schema(usuario))
    │                   │      │                       └ <src.core.models.Usuario object at 0x0000028F334795D0>
    │                   │      └ <function convert_model_to_schema at 0x0000028F19E8A200>
    │                   └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 80, in convert_model_to_schema
    return UsuarioResponseSchema(
           └ <class 'src.core.schemas.UsuarioResponseSchema'>

  File "pydantic\dataclasses.py", line 322, in pydantic.dataclasses._add_pydantic_validation_attributes.new_init
    handle_extra_init(self, *args, **kwargs)

  File "pydantic\dataclasses.py", line 286, in pydantic.dataclasses._add_pydantic_validation_attributes.handle_extra_init
    init(self, *args, **{k: v for k, v in kwargs.items() if k in self.__dataclass_fields__})

TypeError: UsuarioResponseSchema.__init__() got an unexpected keyword argument 'transacoes'
ERROR    2023-03-26 15:02:09.502 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000028F15D913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000028F15CEF1C0>
           └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000028F15CEE830>
    └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000028F15C5FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>
    │    └ <function subprocess_started at 0x0000028F1807D6C0>
    └ <SpawnProcess name='SpawnProcess-20' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000028F15C5F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000028F1805A170>
           │       │   └ <uvicorn.server.Server object at 0x0000028F15C5F7C0>
           │       └ <function run at 0x0000028F15D92560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000028F180FEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000028F17959E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000028F17959D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028F1795B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028F178AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028F15D48610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028F33...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000028F1876EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000028F15D48610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028F33...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028F33...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028F333BE680>
          └ <fastapi.applications.FastAPI object at 0x0000028F1876EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028F333930A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028F333BE650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000028F333BE680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028F333930A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000028F333BE560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000028F333BE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000028F333930A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000028F333BF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000028F187CA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000028F333BF160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000028F333BE500>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000028F333BF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000028F33393250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028F333BE4D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000028F333BE500>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000028F333BE470>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000028F333BE4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000028F33219300>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000028F333BE470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000028F1871D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000028F333932E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000028...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000028F33343D00>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000028F333BF460>
                     └ <function get_request_handler.<locals>.app at 0x0000028F33343C70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000028F1871C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000028F333BFAC0>, 'skip': 0, 'limit': 100}
                 │         └ <function get_usuarios at 0x0000028F1A0E9480>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000028F3325F610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\router.py", line 53, in get_usuarios
    usuarios = service.get_usuarios(db, skip, limit)
               │       │            │   │     └ 100
               │       │            │   └ 0
               │       │            └ <sqlalchemy.orm.session.Session object at 0x0000028F333BFAC0>
               │       └ <function get_usuarios at 0x0000028F19CE96C0>
               └ <module 'src.usuarios.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\usuarios\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 14, in get_usuarios
    list_usuario_schema.append(convert_model_to_schema(usuario))
    │                   │      │                       └ <src.core.models.Usuario object at 0x0000028F334795D0>
    │                   │      └ <function convert_model_to_schema at 0x0000028F19E8A200>
    │                   └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\usuarios\service.py", line 80, in convert_model_to_schema
    return UsuarioResponseSchema(
           └ <class 'src.core.schemas.UsuarioResponseSchema'>

  File "pydantic\dataclasses.py", line 322, in pydantic.dataclasses._add_pydantic_validation_attributes.new_init
    handle_extra_init(self, *args, **kwargs)

  File "pydantic\dataclasses.py", line 286, in pydantic.dataclasses._add_pydantic_validation_attributes.handle_extra_init
    init(self, *args, **{k: v for k, v in kwargs.items() if k in self.__dataclass_fields__})

TypeError: UsuarioResponseSchema.__init__() got an unexpected keyword argument 'transacoes'
INFO     2023-03-26 15:02:21.523 request id: app - uvicorn.server:serve - Started server process [3924]
INFO     2023-03-26 15:02:21.523 request id: app - uvicorn.server:serve - Started server process [3924]
INFO     2023-03-26 15:02:21.524 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:02:21.524 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:02:21.525 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:02:21.526 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:02:21.542 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55976 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 500
ERROR    2023-03-26 15:02:21.543 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000022F1FE013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000022F1FD5F1C0>
           └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022F1FD5E830>
    └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022F1FCCFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>
    │    └ <function subprocess_started at 0x0000022F220FD6C0>
    └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022F1FCCF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000022F220DA170>
           │       │   └ <uvicorn.server.Server object at 0x0000022F1FCCF7C0>
           │       └ <function run at 0x0000022F1FE02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022F2217EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022F219D9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022F219D9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022F219DB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022F2192ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022F1FDB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022F3D...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022F227EEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022F1FDB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022F3D...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022F3D...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022F3D3DE5F0>
          └ <fastapi.applications.FastAPI object at 0x0000022F227EEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022F3D3B30A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022F3D3DE590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022F3D3DE5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022F3D3B30A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000022F3D3DE4D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022F3D3DE590>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022F3D3B30A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000022F3D3DF010>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000022F2284A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000022F3D3DF010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000022F3D3DE230>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000022F3D3DF010>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000022F3D3B3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022F3D3DE200>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000022F3D3DE230>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000022F3D3DE1A0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022F3D3DE200>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000022F3D315060>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000022F3D3DE1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000022F2279D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000022F3D35FD00>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022F3D3DF310>
                     └ <function get_request_handler.<locals>.app at 0x0000022F3D35FC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 255, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x0000022F2279C670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 152, in serialize_response
    return jsonable_encoder(response_content)
           │                └ <unprintable dict object>
           └ <function jsonable_encoder at 0x0000022F2279C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 117, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x0000022F2279C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 131, in jsonable_encoder
    jsonable_encoder(
    └ <function jsonable_encoder at 0x0000022F2279C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 74, in jsonable_encoder
    obj_dict = dataclasses.asdict(obj)
               │           │      └ <unprintable UsuarioResponseSchema object>
               │           └ <function asdict at 0x0000022F2212E320>
               └ <module 'dataclasses' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\dataclasses.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1239, in asdict
    return _asdict_inner(obj, dict_factory)
           │             │    └ <class 'dict'>
           │             └ <unprintable UsuarioResponseSchema object>
           └ <function _asdict_inner at 0x0000022F2212E3B0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1246, in _asdict_inner
    value = _asdict_inner(getattr(obj, f.name), dict_factory)
            │                     │    │ │      └ <class 'dict'>
            │                     │    │ └ <member 'name' of 'Field' objects>
            │                     │    └ Field(name='transacoes',type=<class 'list'>,default=<dataclasses._MISSING_TYPE object at 0x0000022F22131C00>,default_factory=...
            │                     └ <unprintable UsuarioResponseSchema object>
            └ <function _asdict_inner at 0x0000022F2212E3B0>

AttributeError: 'UsuarioResponseSchema' object has no attribute 'transacoes'
ERROR    2023-03-26 15:02:21.560 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000022F1FE013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000022F1FD5F1C0>
           └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000022F1FD5E830>
    └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000022F1FCCFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>
    │    └ <function subprocess_started at 0x0000022F220FD6C0>
    └ <SpawnProcess name='SpawnProcess-21' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000022F1FCCF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000022F220DA170>
           │       │   └ <uvicorn.server.Server object at 0x0000022F1FCCF7C0>
           │       └ <function run at 0x0000022F1FE02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022F2217EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022F219D9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022F219D9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022F219DB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022F2192ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022F1FDB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022F3D...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022F227EEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022F1FDB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022F3D...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022F3D...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022F3D3DE5F0>
          └ <fastapi.applications.FastAPI object at 0x0000022F227EEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022F3D3B30A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022F3D3DE590>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000022F3D3DE5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022F3D3B30A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000022F3D3DE4D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000022F3D3DE590>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000022F3D3B30A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000022F3D3DF010>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000022F2284A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000022F3D3DF010>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000022F3D3DE230>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000022F3D3DF010>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000022F3D3B3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022F3D3DE200>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000022F3D3DE230>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000022F3D3DE1A0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000022F3D3DE200>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000022F3D315060>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000022F3D3DE1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000022F2279D990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000022F3D3B32E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000022F3D35FD00>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000022F3D3DF310>
                     └ <function get_request_handler.<locals>.app at 0x0000022F3D35FC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 255, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x0000022F2279C670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 152, in serialize_response
    return jsonable_encoder(response_content)
           │                └ <unprintable dict object>
           └ <function jsonable_encoder at 0x0000022F2279C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 117, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x0000022F2279C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 131, in jsonable_encoder
    jsonable_encoder(
    └ <function jsonable_encoder at 0x0000022F2279C0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 74, in jsonable_encoder
    obj_dict = dataclasses.asdict(obj)
               │           │      └ <unprintable UsuarioResponseSchema object>
               │           └ <function asdict at 0x0000022F2212E320>
               └ <module 'dataclasses' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\dataclasses.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1239, in asdict
    return _asdict_inner(obj, dict_factory)
           │             │    └ <class 'dict'>
           │             └ <unprintable UsuarioResponseSchema object>
           └ <function _asdict_inner at 0x0000022F2212E3B0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1246, in _asdict_inner
    value = _asdict_inner(getattr(obj, f.name), dict_factory)
            │                     │    │ │      └ <class 'dict'>
            │                     │    │ └ <member 'name' of 'Field' objects>
            │                     │    └ Field(name='transacoes',type=<class 'list'>,default=<dataclasses._MISSING_TYPE object at 0x0000022F22131C00>,default_factory=...
            │                     └ <unprintable UsuarioResponseSchema object>
            └ <function _asdict_inner at 0x0000022F2212E3B0>

AttributeError: 'UsuarioResponseSchema' object has no attribute 'transacoes'
INFO     2023-03-26 15:03:24.006 request id: app - uvicorn.server:serve - Started server process [8984]
INFO     2023-03-26 15:03:24.006 request id: app - uvicorn.server:serve - Started server process [8984]
INFO     2023-03-26 15:03:24.006 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:03:24.007 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:03:24.007 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:03:24.007 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:03:30.307 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:55990 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 500
ERROR    2023-03-26 15:03:30.308 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x000001BFB65013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x000001BFB645F1C0>
           └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BFB645E830>
    └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BFB63CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>
    │    └ <function subprocess_started at 0x000001BFB881D6C0>
    └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BFB63CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001BFB87FA170>
           │       │   └ <uvicorn.server.Server object at 0x000001BFB63CF7C0>
           │       └ <function run at 0x000001BFB6502560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BFB889EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BFB80F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BFB80F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BFB80FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BFB804ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BFB64B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BFD3...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BFB8F0EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BFB64B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BFD3...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BFD3...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BFD3B5E9E0>
          └ <fastapi.applications.FastAPI object at 0x000001BFB8F0EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BFD3B330A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BFD3B5E9B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BFD3B5E9E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BFD3B330A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001BFD3B5E8C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BFD3B5E9B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BFD3B330A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BFD3B5F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001BFB8F6A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001BFD3B5F3D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BFD3B5E830>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BFD3B5F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001BFD3B33250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BFD3B5E740>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BFD3B5E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BFD3B5E6E0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BFD3B5E740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001BFD39B9570>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BFD3B5E6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001BFB8EBD990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001BFD3AE3D00>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BFD3B5F6D0>
                     └ <function get_request_handler.<locals>.app at 0x000001BFD3AE3C70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 255, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x000001BFB8EBC670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 152, in serialize_response
    return jsonable_encoder(response_content)
           │                └ <unprintable dict object>
           └ <function jsonable_encoder at 0x000001BFB8EBC0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 117, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x000001BFB8EBC0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 131, in jsonable_encoder
    jsonable_encoder(
    └ <function jsonable_encoder at 0x000001BFB8EBC0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 74, in jsonable_encoder
    obj_dict = dataclasses.asdict(obj)
               │           │      └ <unprintable UsuarioResponseSchema object>
               │           └ <function asdict at 0x000001BFB884E320>
               └ <module 'dataclasses' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\dataclasses.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1239, in asdict
    return _asdict_inner(obj, dict_factory)
           │             │    └ <class 'dict'>
           │             └ <unprintable UsuarioResponseSchema object>
           └ <function _asdict_inner at 0x000001BFB884E3B0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1246, in _asdict_inner
    value = _asdict_inner(getattr(obj, f.name), dict_factory)
            │                     │    │ │      └ <class 'dict'>
            │                     │    │ └ <member 'name' of 'Field' objects>
            │                     │    └ Field(name='transacoes',type=typing.Optional[list],default=<dataclasses._MISSING_TYPE object at 0x000001BFB8851C00>,default_f...
            │                     └ <unprintable UsuarioResponseSchema object>
            └ <function _asdict_inner at 0x000001BFB884E3B0>

AttributeError: 'UsuarioResponseSchema' object has no attribute 'transacoes'
ERROR    2023-03-26 15:03:30.328 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x000001BFB65013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x000001BFB645F1C0>
           └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BFB645E830>
    └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BFB63CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>
    │    └ <function subprocess_started at 0x000001BFB881D6C0>
    └ <SpawnProcess name='SpawnProcess-22' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BFB63CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001BFB87FA170>
           │       │   └ <uvicorn.server.Server object at 0x000001BFB63CF7C0>
           │       └ <function run at 0x000001BFB6502560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BFB889EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BFB80F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BFB80F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BFB80FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BFB804ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BFB64B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BFD3...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BFB8F0EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BFB64B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BFD3...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BFD3...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BFD3B5E9E0>
          └ <fastapi.applications.FastAPI object at 0x000001BFB8F0EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BFD3B330A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BFD3B5E9B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BFD3B5E9E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BFD3B330A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001BFD3B5E8C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BFD3B5E9B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BFD3B330A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BFD3B5F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001BFB8F6A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001BFD3B5F3D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BFD3B5E830>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BFD3B5F3D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001BFD3B33250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BFD3B5E740>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BFD3B5E830>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BFD3B5E6E0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BFD3B5E740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001BFD39B9570>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BFD3B5E6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001BFB8EBD990>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BFD3B332E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001BFD3AE3D00>
          └ APIRoute(path='/api/v1/usuarios/', name='get_usuarios', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BFD3B5F6D0>
                     └ <function get_request_handler.<locals>.app at 0x000001BFD3AE3C70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 255, in app
    content = await serialize_response(
                    └ <function serialize_response at 0x000001BFB8EBC670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 152, in serialize_response
    return jsonable_encoder(response_content)
           │                └ <unprintable dict object>
           └ <function jsonable_encoder at 0x000001BFB8EBC0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 117, in jsonable_encoder
    encoded_value = jsonable_encoder(
                    └ <function jsonable_encoder at 0x000001BFB8EBC0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 131, in jsonable_encoder
    jsonable_encoder(
    └ <function jsonable_encoder at 0x000001BFB8EBC0D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\encoders.py", line 74, in jsonable_encoder
    obj_dict = dataclasses.asdict(obj)
               │           │      └ <unprintable UsuarioResponseSchema object>
               │           └ <function asdict at 0x000001BFB884E320>
               └ <module 'dataclasses' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\dataclasses.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1239, in asdict
    return _asdict_inner(obj, dict_factory)
           │             │    └ <class 'dict'>
           │             └ <unprintable UsuarioResponseSchema object>
           └ <function _asdict_inner at 0x000001BFB884E3B0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\dataclasses.py", line 1246, in _asdict_inner
    value = _asdict_inner(getattr(obj, f.name), dict_factory)
            │                     │    │ │      └ <class 'dict'>
            │                     │    │ └ <member 'name' of 'Field' objects>
            │                     │    └ Field(name='transacoes',type=typing.Optional[list],default=<dataclasses._MISSING_TYPE object at 0x000001BFB8851C00>,default_f...
            │                     └ <unprintable UsuarioResponseSchema object>
            └ <function _asdict_inner at 0x000001BFB884E3B0>

AttributeError: 'UsuarioResponseSchema' object has no attribute 'transacoes'
INFO     2023-03-26 15:04:00.579 request id: app - uvicorn.server:serve - Started server process [1748]
INFO     2023-03-26 15:04:00.579 request id: app - uvicorn.server:serve - Started server process [1748]
INFO     2023-03-26 15:04:00.580 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:04:00.580 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:04:00.580 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:04:00.581 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:04:03.055 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56001 - "GET /api/v1/usuarios/?skip=0&limit=100 HTTP/1.1" 200
INFO     2023-03-26 15:04:59.819 request id: app - uvicorn.server:serve - Started server process [15140]
INFO     2023-03-26 15:04:59.819 request id: app - uvicorn.server:serve - Started server process [15140]
INFO     2023-03-26 15:04:59.820 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:04:59.820 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:04:59.820 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:04:59.820 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:06:12.665 request id: app - uvicorn.server:serve - Started server process [15260]
INFO     2023-03-26 15:06:12.665 request id: app - uvicorn.server:serve - Started server process [15260]
INFO     2023-03-26 15:06:12.665 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:06:12.666 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:06:12.666 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:06:12.666 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:06:28.066 request id: app - uvicorn.server:serve - Started server process [7548]
INFO     2023-03-26 15:06:28.067 request id: app - uvicorn.server:serve - Started server process [7548]
INFO     2023-03-26 15:06:28.067 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:06:28.067 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:06:28.068 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:06:28.068 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:06:56.234 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56050 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 15:06:56.456 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56050 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 15:07:08.898 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56051 - "GET /api/v1/transacoes/3 HTTP/1.1" 500
ERROR    2023-03-26 15:07:08.898 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x00000235DB5913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x00000235DB4EF1C0>
           └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000235DB4EE830>
    └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000235DB45FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>
    │    └ <function subprocess_started at 0x00000235DD86D6C0>
    └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000235DB45F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000235DD84A170>
           │       │   └ <uvicorn.server.Server object at 0x00000235DB45F7C0>
           │       └ <function run at 0x00000235DB592560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000235DD8EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000235DD149E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000235DD149D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000235DD14B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000235DD09ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235DB548610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235F8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000235DDF5EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235DB548610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235F8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235F8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235F8AEE4D0>
          └ <fastapi.applications.FastAPI object at 0x00000235DDF5EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235F8AC2DD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235F8AEE4A0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235F8AEE4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235F8AC2DD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000235F8AEE3B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235F8AEE4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235F8AC2DD0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000235F8AEF430>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000235DDFBA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000235F8AEF430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000235F8AEE350>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000235F8AEF430>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000235F8AC3130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235F8AEE320>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000235F8AEE350>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000235F8AEE2C0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235F8AEE320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000235F8A29150>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000235F8AEE2C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000235DDF0D990>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000235F8AC13F0>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000235F8AEEB90>
                     └ <function get_request_handler.<locals>.app at 0x00000235F8AC1360>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000235DDF0C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000235F8AEF8B0>, 'usuario_id': 3}
                 │         └ <function get_transacao_by_usuario_id at 0x00000235DFBC5C60>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000235F8AD01F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 45, in get_transacao_by_usuario_id
    transacao = service.get_transacao_by_usuario_id(db, usuario_id)
                │       │                           │   └ 3
                │       │                           └ <sqlalchemy.orm.session.Session object at 0x00000235F8AEF8B0>
                │       └ <function get_transacao_by_usuario_id at 0x00000235DFBC5480>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 39, in get_transacao_by_usuario_id
    return convert_schema(db.query(Transacao).filter(Transacao.usuario_id == usuario_id).first())
           │              │  │     │                 │         │             └ 3
           │              │  │     │                 │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000235DF37EB60>
           │              │  │     │                 └ <class 'src.core.models.Transacao'>
           │              │  │     └ <class 'src.core.models.Transacao'>
           │              │  └ <function Session.query at 0x00000235DF249360>
           │              └ <sqlalchemy.orm.session.Session object at 0x00000235F8AEF8B0>
           └ <function convert_schema at 0x00000235DFBC52D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 7, in convert_schema
    return TransacaoResponseSchema(
           └ <class 'src.core.schemas.TransacaoResponseSchema'>

TypeError: TransacaoResponseSchema.__init__() missing 1 required positional argument: 'transacao_id'
ERROR    2023-03-26 15:07:08.915 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x00000235DB5913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x00000235DB4EF1C0>
           └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000235DB4EE830>
    └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000235DB45FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>
    │    └ <function subprocess_started at 0x00000235DD86D6C0>
    └ <SpawnProcess name='SpawnProcess-26' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000235DB45F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000235DD84A170>
           │       │   └ <uvicorn.server.Server object at 0x00000235DB45F7C0>
           │       └ <function run at 0x00000235DB592560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000235DD8EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000235DD149E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000235DD149D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000235DD14B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000235DD09ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235DB548610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235F8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000235DDF5EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000235DB548610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235F8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000235F8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235F8AEE4D0>
          └ <fastapi.applications.FastAPI object at 0x00000235DDF5EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235F8AC2DD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235F8AEE4A0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000235F8AEE4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235F8AC2DD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000235F8AEE3B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000235F8AEE4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000235F8AC2DD0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000235F8AEF430>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000235DDFBA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000235F8AEF430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000235F8AEE350>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000235F8AEF430>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000235F8AC3130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235F8AEE320>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000235F8AEE350>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000235F8AEE2C0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000235F8AEE320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000235F8A29150>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000235F8AEE2C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000235DDF0D990>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000235F8AC3250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000235F8AC13F0>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000235F8AEEB90>
                     └ <function get_request_handler.<locals>.app at 0x00000235F8AC1360>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000235DDF0C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000235F8AEF8B0>, 'usuario_id': 3}
                 │         └ <function get_transacao_by_usuario_id at 0x00000235DFBC5C60>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000235F8AD01F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 45, in get_transacao_by_usuario_id
    transacao = service.get_transacao_by_usuario_id(db, usuario_id)
                │       │                           │   └ 3
                │       │                           └ <sqlalchemy.orm.session.Session object at 0x00000235F8AEF8B0>
                │       └ <function get_transacao_by_usuario_id at 0x00000235DFBC5480>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 39, in get_transacao_by_usuario_id
    return convert_schema(db.query(Transacao).filter(Transacao.usuario_id == usuario_id).first())
           │              │  │     │                 │         │             └ 3
           │              │  │     │                 │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000235DF37EB60>
           │              │  │     │                 └ <class 'src.core.models.Transacao'>
           │              │  │     └ <class 'src.core.models.Transacao'>
           │              │  └ <function Session.query at 0x00000235DF249360>
           │              └ <sqlalchemy.orm.session.Session object at 0x00000235F8AEF8B0>
           └ <function convert_schema at 0x00000235DFBC52D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 7, in convert_schema
    return TransacaoResponseSchema(
           └ <class 'src.core.schemas.TransacaoResponseSchema'>

TypeError: TransacaoResponseSchema.__init__() missing 1 required positional argument: 'transacao_id'
INFO     2023-03-26 15:07:47.132 request id: app - uvicorn.server:serve - Started server process [12572]
INFO     2023-03-26 15:07:47.132 request id: app - uvicorn.server:serve - Started server process [12572]
INFO     2023-03-26 15:07:47.132 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:07:47.133 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:07:47.133 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:07:47.134 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:07:53.481 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56074 - "GET /api/v1/transacoes/3 HTTP/1.1" 200
INFO     2023-03-26 15:10:09.204 request id: app - uvicorn.server:serve - Started server process [5472]
INFO     2023-03-26 15:10:09.204 request id: app - uvicorn.server:serve - Started server process [5472]
INFO     2023-03-26 15:10:09.204 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:10:09.204 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:10:09.205 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:10:09.205 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:10:56.262 request id: app - uvicorn.server:serve - Started server process [15692]
INFO     2023-03-26 15:10:56.262 request id: app - uvicorn.server:serve - Started server process [15692]
INFO     2023-03-26 15:10:56.262 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:10:56.263 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:10:56.263 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:10:56.263 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:11:04.778 request id: app - uvicorn.server:serve - Started server process [3056]
INFO     2023-03-26 15:11:04.778 request id: app - uvicorn.server:serve - Started server process [3056]
INFO     2023-03-26 15:11:04.778 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:11:04.779 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:11:04.779 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:11:04.779 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:11:07.838 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56119 - "GET /api/v1/transacoes/3 HTTP/1.1" 200
INFO     2023-03-26 15:13:57.989 request id: app - uvicorn.server:serve - Started server process [2368]
INFO     2023-03-26 15:13:57.989 request id: app - uvicorn.server:serve - Started server process [2368]
INFO     2023-03-26 15:13:57.990 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:13:57.990 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:13:57.991 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:13:57.991 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:14:00.404 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56151 - "GET /api/v1/transacoes/3 HTTP/1.1" 500
ERROR    2023-03-26 15:14:00.405 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x000001E9F8C713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x000001E9F8BCF1C0>
           └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E9F8BCE830>
    └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E9F8B3FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>
    │    └ <function subprocess_started at 0x000001E9FAF2D6C0>
    └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E9F8B3F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001E9FAF0A170>
           │       │   └ <uvicorn.server.Server object at 0x000001E9F8B3F7C0>
           │       └ <function run at 0x000001E9F8C72560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E9FAFAEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E9FA809E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E9FA809D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E9FA80B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E9FA75ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E9F8C28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E996...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E9FB61EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E9F8C28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E996...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E996...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E9962426B0>
          └ <fastapi.applications.FastAPI object at 0x000001E9FB61EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E99620F130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E996242680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E9962426B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E99620F130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001E996242560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E996242680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E99620F130>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001E9962430A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001E9FB67A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001E9962430A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001E996242620>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001E9962430A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001E99620F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E9962424D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001E996242620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E9962423B0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E9962424D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001E996179240>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E9962423B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001E9FB5CD990>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001E99620D480>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E9962433A0>
                     └ <function get_request_handler.<locals>.app at 0x000001E99620D3F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E9FB5CC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001E9962439A0>, 'usuario_id': 3}
                 │         └ <function get_transacao_by_usuario_id at 0x000001E9FD285E10>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E9962202E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 45, in get_transacao_by_usuario_id
    transacao = service.get_transacao_by_usuario_id(db, usuario_id)
                │       │                           │   └ 3
                │       │                           └ <sqlalchemy.orm.session.Session object at 0x000001E9962439A0>
                │       └ <function get_transacao_by_usuario_id at 0x000001E9FD285630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 47, in get_transacao_by_usuario_id
    return convert_schema(db.query(Transacao).filter(Transacao.usuario_id == usuario_id).first())
           │              │  │     │                 │         │             └ 3
           │              │  │     │                 │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001E9FCA3EC00>
           │              │  │     │                 └ <class 'src.core.models.Transacao'>
           │              │  │     └ <class 'src.core.models.Transacao'>
           │              │  └ <function Session.query at 0x000001E9FC909360>
           │              └ <sqlalchemy.orm.session.Session object at 0x000001E9962439A0>
           └ <function convert_schema at 0x000001E9FD285360>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 19, in convert_schema
    usuario_id=model.usuario.usuario_id,
               │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001E9FCA3E5C0>
               └ <src.core.models.Transacao object at 0x000001E9962F4580>

AttributeError: 'Usuario' object has no attribute 'usuario_id'
ERROR    2023-03-26 15:14:00.423 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x000001E9F8C713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x000001E9F8BCF1C0>
           └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E9F8BCE830>
    └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E9F8B3FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>
    │    └ <function subprocess_started at 0x000001E9FAF2D6C0>
    └ <SpawnProcess name='SpawnProcess-31' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E9F8B3F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001E9FAF0A170>
           │       │   └ <uvicorn.server.Server object at 0x000001E9F8B3F7C0>
           │       └ <function run at 0x000001E9F8C72560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E9FAFAEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E9FA809E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E9FA809D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E9FA80B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E9FA75ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E9F8C28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E996...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E9FB61EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E9F8C28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E996...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E996...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E9962426B0>
          └ <fastapi.applications.FastAPI object at 0x000001E9FB61EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E99620F130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E996242680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E9962426B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E99620F130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001E996242560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E996242680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E99620F130>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001E9962430A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001E9FB67A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001E9962430A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001E996242620>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001E9962430A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001E99620F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E9962424D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001E996242620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E9962423B0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E9962424D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001E996179240>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E9962423B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001E9FB5CD990>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E99620F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001E99620D480>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E9962433A0>
                     └ <function get_request_handler.<locals>.app at 0x000001E99620D3F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E9FB5CC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001E9962439A0>, 'usuario_id': 3}
                 │         └ <function get_transacao_by_usuario_id at 0x000001E9FD285E10>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E9962202E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 45, in get_transacao_by_usuario_id
    transacao = service.get_transacao_by_usuario_id(db, usuario_id)
                │       │                           │   └ 3
                │       │                           └ <sqlalchemy.orm.session.Session object at 0x000001E9962439A0>
                │       └ <function get_transacao_by_usuario_id at 0x000001E9FD285630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 47, in get_transacao_by_usuario_id
    return convert_schema(db.query(Transacao).filter(Transacao.usuario_id == usuario_id).first())
           │              │  │     │                 │         │             └ 3
           │              │  │     │                 │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001E9FCA3EC00>
           │              │  │     │                 └ <class 'src.core.models.Transacao'>
           │              │  │     └ <class 'src.core.models.Transacao'>
           │              │  └ <function Session.query at 0x000001E9FC909360>
           │              └ <sqlalchemy.orm.session.Session object at 0x000001E9962439A0>
           └ <function convert_schema at 0x000001E9FD285360>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 19, in convert_schema
    usuario_id=model.usuario.usuario_id,
               │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001E9FCA3E5C0>
               └ <src.core.models.Transacao object at 0x000001E9962F4580>

AttributeError: 'Usuario' object has no attribute 'usuario_id'
INFO     2023-03-26 15:14:45.227 request id: app - uvicorn.server:serve - Started server process [2180]
INFO     2023-03-26 15:14:45.227 request id: app - uvicorn.server:serve - Started server process [2180]
INFO     2023-03-26 15:14:45.228 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:14:45.228 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:14:45.228 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:14:45.228 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:14:47.717 request id: app - uvicorn.server:serve - Started server process [356]
INFO     2023-03-26 15:14:47.718 request id: app - uvicorn.server:serve - Started server process [356]
INFO     2023-03-26 15:14:47.718 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:14:47.718 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:14:47.719 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:14:47.719 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:16:04.419 request id: app - uvicorn.server:serve - Started server process [2380]
INFO     2023-03-26 15:16:04.419 request id: app - uvicorn.server:serve - Started server process [2380]
INFO     2023-03-26 15:16:04.420 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:16:04.420 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:16:04.420 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:16:04.420 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:16:08.568 request id: app - uvicorn.server:serve - Started server process [16112]
INFO     2023-03-26 15:16:08.568 request id: app - uvicorn.server:serve - Started server process [16112]
INFO     2023-03-26 15:16:08.568 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:16:08.568 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:16:08.569 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:16:08.569 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:16:10.483 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56181 - "GET /api/v1/transacoes/3 HTTP/1.1" 500
ERROR    2023-03-26 15:16:10.483 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x0000023F219713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x0000023F218CF1C0>
           └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000023F218CE830>
    └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000023F2183FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>
    │    └ <function subprocess_started at 0x0000023F23BDD6C0>
    └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000023F2183F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000023F23BBA170>
           │       │   └ <uvicorn.server.Server object at 0x0000023F2183F7C0>
           │       └ <function run at 0x0000023F21972560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000023F23C5EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000023F234F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000023F234F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000023F234FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000023F2345ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023F21928610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023F3E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000023F242CEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023F21928610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023F3E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023F3E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023F3EECE680>
          └ <fastapi.applications.FastAPI object at 0x0000023F242CEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023F3EE9F0A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023F3EECE650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023F3EECE680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023F3EE9F0A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000023F3EECE560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023F3EECE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023F3EE9F0A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023F3EECF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000023F2432A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000023F3EECF160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023F3EECE500>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023F3EECF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000023F3EE9F250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023F3EECE4D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023F3EECE500>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023F3EECE470>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023F3EECE4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000023F3ED79300>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023F3EECE470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000023F2427D990>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000023F3EE9D3F0>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000023F3EECF460>
                     └ <function get_request_handler.<locals>.app at 0x0000023F3EE9D360>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000023F2427C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000023F3EECFA60>, 'usuario_id': 3}
                 │         └ <function get_transacao_by_usuario_id at 0x0000023F25F39D80>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000023F3EEB03A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 45, in get_transacao_by_usuario_id
    transacao = service.get_transacao_by_usuario_id(db, usuario_id)
                │       │                           │   └ 3
                │       │                           └ <sqlalchemy.orm.session.Session object at 0x0000023F3EECFA60>
                │       └ <function get_transacao_by_usuario_id at 0x0000023F25F395A0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 47, in get_transacao_by_usuario_id
    return convert_schema(db.query(Transacao).filter(Transacao.usuario_id == usuario_id).first())
           │              │  │     │                 │         │             └ 3
           │              │  │     │                 │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000023F256EEB60>
           │              │  │     │                 └ <class 'src.core.models.Transacao'>
           │              │  │     └ <class 'src.core.models.Transacao'>
           │              │  └ <function Session.query at 0x0000023F255B9360>
           │              └ <sqlalchemy.orm.session.Session object at 0x0000023F3EECFA60>
           └ <function convert_schema at 0x0000023F25F392D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 7, in convert_schema
    return TransacaoResponseSchema(
           └ <class 'src.core.schemas.TransacaoResponseSchema'>

TypeError: TransacaoResponseSchema.__init__() got an unexpected keyword argument 'usuario_id'
ERROR    2023-03-26 15:16:10.500 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x0000023F219713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x0000023F218CF1C0>
           └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000023F218CE830>
    └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000023F2183FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>
    │    └ <function subprocess_started at 0x0000023F23BDD6C0>
    └ <SpawnProcess name='SpawnProcess-35' parent=11556 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000023F2183F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=788, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000023F23BBA170>
           │       │   └ <uvicorn.server.Server object at 0x0000023F2183F7C0>
           │       └ <function run at 0x0000023F21972560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000023F23C5EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000023F234F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000023F234F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000023F234FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000023F2345ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023F21928610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023F3E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000023F242CEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000023F21928610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023F3E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023F3E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023F3EECE680>
          └ <fastapi.applications.FastAPI object at 0x0000023F242CEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023F3EE9F0A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023F3EECE650>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000023F3EECE680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023F3EE9F0A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000023F3EECE560>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000023F3EECE650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000023F3EE9F0A0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023F3EECF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000023F2432A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000023F3EECF160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023F3EECE500>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000023F3EECF160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000023F3EE9F250>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023F3EECE4D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000023F3EECE500>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023F3EECE470>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000023F3EECE4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000023F3ED79300>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000023F3EECE470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000023F2427D990>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000023F3EE9F2E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000023F3EE9D3F0>
          └ APIRoute(path='/api/v1/transacoes/{usuario_id}', name='get_transacao_by_usuario_id', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000023F3EECF460>
                     └ <function get_request_handler.<locals>.app at 0x0000023F3EE9D360>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000023F2427C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000023F3EECFA60>, 'usuario_id': 3}
                 │         └ <function get_transacao_by_usuario_id at 0x0000023F25F39D80>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000023F3EEB03A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 45, in get_transacao_by_usuario_id
    transacao = service.get_transacao_by_usuario_id(db, usuario_id)
                │       │                           │   └ 3
                │       │                           └ <sqlalchemy.orm.session.Session object at 0x0000023F3EECFA60>
                │       └ <function get_transacao_by_usuario_id at 0x0000023F25F395A0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 47, in get_transacao_by_usuario_id
    return convert_schema(db.query(Transacao).filter(Transacao.usuario_id == usuario_id).first())
           │              │  │     │                 │         │             └ 3
           │              │  │     │                 │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000023F256EEB60>
           │              │  │     │                 └ <class 'src.core.models.Transacao'>
           │              │  │     └ <class 'src.core.models.Transacao'>
           │              │  └ <function Session.query at 0x0000023F255B9360>
           │              └ <sqlalchemy.orm.session.Session object at 0x0000023F3EECFA60>
           └ <function convert_schema at 0x0000023F25F392D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 7, in convert_schema
    return TransacaoResponseSchema(
           └ <class 'src.core.schemas.TransacaoResponseSchema'>

TypeError: TransacaoResponseSchema.__init__() got an unexpected keyword argument 'usuario_id'
INFO     2023-03-26 15:16:26.515 request id: app - uvicorn.server:serve - Started server process [9188]
INFO     2023-03-26 15:16:26.515 request id: app - uvicorn.server:serve - Started server process [9188]
INFO     2023-03-26 15:16:26.516 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:16:26.516 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:16:26.517 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:16:26.517 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:16:38.873 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:56200 - "GET /api/v1/transacoes/3 HTTP/1.1" 200
INFO     2023-03-26 15:58:06.939 request id: app - uvicorn.server:serve - Started server process [8900]
INFO     2023-03-26 15:58:06.939 request id: app - uvicorn.server:serve - Started server process [8900]
INFO     2023-03-26 15:58:06.939 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:58:06.940 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 15:58:06.940 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 15:58:06.941 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:47:36.796 request id: app - uvicorn.server:serve - Started server process [8868]
INFO     2023-03-26 16:47:36.796 request id: app - uvicorn.server:serve - Started server process [8868]
INFO     2023-03-26 16:47:36.796 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:47:36.797 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:47:36.797 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:47:36.797 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:48:48.500 request id: app - uvicorn.server:serve - Started server process [5700]
INFO     2023-03-26 16:48:48.500 request id: app - uvicorn.server:serve - Started server process [5700]
INFO     2023-03-26 16:48:48.500 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:48:48.502 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:48:48.502 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:48:48.502 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:48:49.689 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57208 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 16:48:49.893 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57208 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 16:49:34.263 request id: app - uvicorn.server:serve - Started server process [14824]
INFO     2023-03-26 16:49:34.264 request id: app - uvicorn.server:serve - Started server process [14824]
INFO     2023-03-26 16:49:34.264 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:49:34.265 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:49:34.266 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:49:34.266 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:50:17.333 request id: app - uvicorn.server:serve - Started server process [10296]
INFO     2023-03-26 16:50:17.333 request id: app - uvicorn.server:serve - Started server process [10296]
INFO     2023-03-26 16:50:17.334 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:50:17.334 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:50:17.334 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:50:17.335 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:50:25.133 request id: app - uvicorn.server:serve - Started server process [8976]
INFO     2023-03-26 16:50:25.133 request id: app - uvicorn.server:serve - Started server process [8976]
INFO     2023-03-26 16:50:25.134 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:50:25.134 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:50:25.135 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:50:25.135 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:50:49.659 request id: app - uvicorn.server:serve - Started server process [11664]
INFO     2023-03-26 16:50:49.659 request id: app - uvicorn.server:serve - Started server process [11664]
INFO     2023-03-26 16:50:49.659 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:50:49.660 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:50:49.660 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:50:49.660 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:51:07.235 request id: app - uvicorn.server:serve - Started server process [15712]
INFO     2023-03-26 16:51:07.236 request id: app - uvicorn.server:serve - Started server process [15712]
INFO     2023-03-26 16:51:07.236 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:51:07.236 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:51:07.236 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:51:07.237 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:51:35.897 request id: app - uvicorn.server:serve - Started server process [10856]
INFO     2023-03-26 16:51:35.898 request id: app - uvicorn.server:serve - Started server process [10856]
INFO     2023-03-26 16:51:35.898 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:51:35.898 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:51:35.899 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:51:35.900 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:51:41.762 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57315 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 16:51:41.859 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57315 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 16:52:21.606 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57316 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 16:52:21.606 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002294E8313F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002294E78F1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002294E78E830>
    └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002294E6FFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>
    │    └ <function subprocess_started at 0x0000022950AAD6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002294E6FF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000022950A8A170>
           │       │   └ <uvicorn.server.Server object at 0x000002294E6FF7C0>
           │       └ <function run at 0x000002294E832560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022950B2EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000229503B9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000229503B9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000229503BB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002295031ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002294E7E8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002296B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002295119EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002294E7E8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002296B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002296B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002296BDCBC40>
          └ <fastapi.applications.FastAPI object at 0x000002295119EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002296BD73C70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002296BDCBC40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002296BD73C70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000022951193F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002296BDCBB20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002296BDDCC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000229511FA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002296BDDCC10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002296BDCBAC0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002296BDDCC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002296BD73BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002296BDCBA90>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002296BDCBAC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002296BDCBA30>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002296BDCBA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002296BCEA8C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002296BDCBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002295114D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002296BD71C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002296BDDC340>
                     └ <function get_request_handler.<locals>.app at 0x000002296BD71BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002295114C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002296BDDF400>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000022952E263B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002296BDB4D90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002296BDDF400>
                │       └ <function create_transacao at 0x0000022952E25F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <sqlalchemy.orm.query.Query object at 0x000002296BED1C30>
                  └ <function update_patrimonio_add at 0x0000022952E25FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in update_patrimonio_add
    total_patrimonio_qtd = patrimonio_exists.quantidade + transacao.quantidade
                           │                              │         └ 10
                           │                              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                           └ <sqlalchemy.orm.query.Query object at 0x000002296BED1C30>

AttributeError: 'Query' object has no attribute 'quantidade'
ERROR    2023-03-26 16:52:21.624 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002294E8313F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002294E78F1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002294E78E830>
    └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002294E6FFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>
    │    └ <function subprocess_started at 0x0000022950AAD6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=15536 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002294E6FF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000022950A8A170>
           │       │   └ <uvicorn.server.Server object at 0x000002294E6FF7C0>
           │       └ <function run at 0x000002294E832560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000022950B2EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000229503B9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000229503B9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000229503BB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002295031ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002294E7E8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002296B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002295119EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002294E7E8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002296B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002296B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002296BDCBC40>
          └ <fastapi.applications.FastAPI object at 0x000002295119EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002296BD73C70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002296BDCBC40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002296BD73C70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000022951193F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002296BDCBB20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002296BDCBC10...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002296BDDCC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000229511FA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002296BDDCC10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002296BDCBAC0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002296BDDCC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002296BD73BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002296BDCBA90>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002296BDCBAC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002296BDCBA30>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002296BDCBA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002296BCEA8C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002296BDCBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002295114D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002296BD73B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002296BD71C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002296BDDC340>
                     └ <function get_request_handler.<locals>.app at 0x000002296BD71BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002295114C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002296BDDF400>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000022952E263B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002296BDB4D90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002296BDDF400>
                │       └ <function create_transacao at 0x0000022952E25F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <sqlalchemy.orm.query.Query object at 0x000002296BED1C30>
                  └ <function update_patrimonio_add at 0x0000022952E25FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in update_patrimonio_add
    total_patrimonio_qtd = patrimonio_exists.quantidade + transacao.quantidade
                           │                              │         └ 10
                           │                              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                           └ <sqlalchemy.orm.query.Query object at 0x000002296BED1C30>

AttributeError: 'Query' object has no attribute 'quantidade'
INFO     2023-03-26 16:53:32.475 request id: app - uvicorn.server:serve - Started server process [14972]
INFO     2023-03-26 16:53:32.476 request id: app - uvicorn.server:serve - Started server process [14972]
INFO     2023-03-26 16:53:32.476 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:53:32.476 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:53:32.477 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:53:32.478 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:53:36.161 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57341 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 16:53:36.161 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002B0FCD713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002B0FCCCF1C0>
           └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002B0FCCCE830>
    └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002B0FCC3FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>
    │    └ <function subprocess_started at 0x000002B0FF01D6C0>
    └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002B0FCC3F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002B0FEFFA170>
           │       │   └ <uvicorn.server.Server object at 0x000002B0FCC3F7C0>
           │       └ <function run at 0x000002B0FCD72560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002B0FF09EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002B0FE8F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002B0FE8F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002B0FE8FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002B0FE85ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B0FCD28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B09A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002B0FF70EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B0FCD28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B09A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B09A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B09A3FBC40>
          └ <fastapi.applications.FastAPI object at 0x000002B0FF70EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B09A3A3BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B09A3FBC40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B09A3A3BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002B0FF703F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002B09A3FBAF0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B09A40C640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002B0FF76A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002B09A40C640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B09A3FBA90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B09A40C640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002B09A420040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B09A3FB8B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B09A3FBA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B09A3FB850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B09A3FB8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002B09A3026E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B09A3FB850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002B0FF6BD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002B09A3A1C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002B09A40C940>
                     └ <function get_request_handler.<locals>.app at 0x000002B09A3A1BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002B0FF6BC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002B09A40CFA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000002B0813B63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002B09A3E4BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002B09A40CFA0>
                │       └ <function create_transacao at 0x000002B0813B5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <sqlalchemy.orm.query.Query object at 0x000002B09A4A96C0>
                  └ <function update_patrimonio_add at 0x000002B0813B5FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in update_patrimonio_add
    total_patrimonio_qtd = patrimonio_exists.quantidade + transacao.quantidade
                           │                              │         └ 10
                           │                              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                           └ <sqlalchemy.orm.query.Query object at 0x000002B09A4A96C0>

AttributeError: 'Query' object has no attribute 'quantidade'
ERROR    2023-03-26 16:53:36.181 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002B0FCD713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002B0FCCCF1C0>
           └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002B0FCCCE830>
    └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002B0FCC3FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>
    │    └ <function subprocess_started at 0x000002B0FF01D6C0>
    └ <SpawnProcess name='SpawnProcess-4' parent=15536 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002B0FCC3F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002B0FEFFA170>
           │       │   └ <uvicorn.server.Server object at 0x000002B0FCC3F7C0>
           │       └ <function run at 0x000002B0FCD72560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002B0FF09EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002B0FE8F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002B0FE8F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002B0FE8FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002B0FE85ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B0FCD28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B09A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002B0FF70EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B0FCD28610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B09A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B09A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B09A3FBC40>
          └ <fastapi.applications.FastAPI object at 0x000002B0FF70EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B09A3A3BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B09A3FBC40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B09A3A3BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002B0FF703F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002B09A3FBAF0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002B09A3FBC10...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B09A40C640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002B0FF76A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002B09A40C640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B09A3FBA90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B09A40C640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002B09A420040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B09A3FB8B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B09A3FBA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B09A3FB850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B09A3FB8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002B09A3026E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B09A3FB850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002B0FF6BD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B09A4200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002B09A3A1C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002B09A40C940>
                     └ <function get_request_handler.<locals>.app at 0x000002B09A3A1BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002B0FF6BC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002B09A40CFA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000002B0813B63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002B09A3E4BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002B09A40CFA0>
                │       └ <function create_transacao at 0x000002B0813B5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <sqlalchemy.orm.query.Query object at 0x000002B09A4A96C0>
                  └ <function update_patrimonio_add at 0x000002B0813B5FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in update_patrimonio_add
    total_patrimonio_qtd = patrimonio_exists.quantidade + transacao.quantidade
                           │                              │         └ 10
                           │                              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                           └ <sqlalchemy.orm.query.Query object at 0x000002B09A4A96C0>

AttributeError: 'Query' object has no attribute 'quantidade'
INFO     2023-03-26 16:54:22.498 request id: app - uvicorn.server:serve - Started server process [12420]
INFO     2023-03-26 16:54:22.498 request id: app - uvicorn.server:serve - Started server process [12420]
INFO     2023-03-26 16:54:22.498 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:54:22.499 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:54:22.499 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:54:22.499 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:54:25.215 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57360 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 16:54:25.456 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57360 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 16:55:22.812 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57361 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 16:55:22.813 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 340
               │     └ 3
               └ <function _main at 0x000002CFBE2713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 340
           │    └ <function BaseProcess._bootstrap at 0x000002CFBE1CF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002CFBE1CE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002CFBE13FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>
    │    └ <function subprocess_started at 0x000002CFC053D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002CFBE13F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002CFC051A170>
           │       │   └ <uvicorn.server.Server object at 0x000002CFBE13F7C0>
           │       └ <function run at 0x000002CFBE272560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002CFC05BEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002CFBFE19E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002CFBFE19D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002CFBFE1B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002CFBFD6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002CFBE228610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002CFDB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002CFC0C2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002CFBE228610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002CFDB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002CFDB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002CFDB7DCA00>
          └ <fastapi.applications.FastAPI object at 0x000002CFC0C2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002CFDB7D4790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002CFDB7DCA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002CFDB7D4790>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002CFC0C23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002CFDB7DC8E0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002CFDB7DFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002CFC0C8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002CFDB7DFD90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002CFDB7DC880>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002CFDB7DFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002CFDB7D48B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002CFDB7DC850>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002CFDB7DC880>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002CFDB7DC7F0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002CFDB7DC850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002CFDB6BA380>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002CFDB7DC7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002CFC0BDD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002CFDB786830>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002CFDB7DD1B0>
                     └ <function get_request_handler.<locals>.app at 0x000002CFDB7867A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002CFC0BDC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002CFDB7DFBB0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000002CFC28A6320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002CFDB7B5B10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002CFDB7DFBB0>
                │       └ <function create_transacao at 0x000002CFC28A5EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <sqlalchemy.orm.query.Query object at 0x000002CFDB88EA40>
                  └ <function update_patrimonio_add at 0x000002CFC28A5F30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in update_patrimonio_add
    total_patrimonio_qtd = patrimonio_exists.quantidade + transacao.quantidade
                           │                              │         └ 10
                           │                              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                           └ <sqlalchemy.orm.query.Query object at 0x000002CFDB88EA40>

AttributeError: 'Query' object has no attribute 'quantidade'
ERROR    2023-03-26 16:55:22.830 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 340
               │     └ 3
               └ <function _main at 0x000002CFBE2713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 340
           │    └ <function BaseProcess._bootstrap at 0x000002CFBE1CF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002CFBE1CE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002CFBE13FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>
    │    └ <function subprocess_started at 0x000002CFC053D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=7596 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002CFBE13F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002CFC051A170>
           │       │   └ <uvicorn.server.Server object at 0x000002CFBE13F7C0>
           │       └ <function run at 0x000002CFBE272560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002CFC05BEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002CFBFE19E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002CFBFE19D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002CFBFE1B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002CFBFD6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002CFBE228610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002CFDB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002CFC0C2EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002CFBE228610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002CFDB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002CFDB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002CFDB7DCA00>
          └ <fastapi.applications.FastAPI object at 0x000002CFC0C2EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002CFDB7D4790>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002CFDB7DCA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002CFDB7D4790>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002CFC0C23F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002CFDB7DC8E0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002CFDB7DC9D0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002CFDB7DFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002CFC0C8A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002CFDB7DFD90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002CFDB7DC880>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002CFDB7DFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002CFDB7D48B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002CFDB7DC850>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002CFDB7DC880>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002CFDB7DC7F0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002CFDB7DC850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002CFDB6BA380>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002CFDB7DC7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002CFC0BDD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002CFDB7D45E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002CFDB786830>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002CFDB7DD1B0>
                     └ <function get_request_handler.<locals>.app at 0x000002CFDB7867A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002CFC0BDC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002CFDB7DFBB0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000002CFC28A6320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002CFDB7B5B10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002CFDB7DFBB0>
                │       └ <function create_transacao at 0x000002CFC28A5EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <sqlalchemy.orm.query.Query object at 0x000002CFDB88EA40>
                  └ <function update_patrimonio_add at 0x000002CFC28A5F30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in update_patrimonio_add
    total_patrimonio_qtd = patrimonio_exists.quantidade + transacao.quantidade
                           │                              │         └ 10
                           │                              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                           └ <sqlalchemy.orm.query.Query object at 0x000002CFDB88EA40>

AttributeError: 'Query' object has no attribute 'quantidade'
INFO     2023-03-26 16:56:31.291 request id: app - uvicorn.server:serve - Started server process [15392]
INFO     2023-03-26 16:56:31.292 request id: app - uvicorn.server:serve - Started server process [15392]
INFO     2023-03-26 16:56:31.292 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:56:31.292 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:56:31.293 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:56:31.294 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:57:18.196 request id: app - uvicorn.server:serve - Started server process [7632]
INFO     2023-03-26 16:57:18.197 request id: app - uvicorn.server:serve - Started server process [7632]
INFO     2023-03-26 16:57:18.197 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:57:18.197 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:57:18.198 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:57:18.198 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:57:36.195 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57444 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 16:57:36.195 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001C3700CE7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001C370C0B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001C30A4C7840; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001C36CF013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001C36CE5F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C36CE5E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C36CDCFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>
    │    └ <function subprocess_started at 0x000001C36F19D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C36CDCF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001C36F17A170>
           │       │   └ <uvicorn.server.Server object at 0x000001C36CDCF7C0>
           │       └ <function run at 0x000001C36CF02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C36F21EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C36EA89E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C36EA89D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C36EA8B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C36E9EADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C36CEB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C30A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C36F88EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C36CEB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C30A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C30A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C30A42BB50>
          └ <fastapi.applications.FastAPI object at 0x000001C36F88EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C30A3D39A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C30A42BB50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C30A3D39A0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001C36F883F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001C30A42B910>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001C30A448640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001C36F8EA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001C30A448640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001C30A42BA90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001C30A448640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001C30A450040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C30A42B970>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001C30A42BA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001C30A42B850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C30A42B970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001C30A3326E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001C30A42B850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001C36F83D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001C30A3D1C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C30A448940>
                     └ <function get_request_handler.<locals>.app at 0x000001C30A3D1BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C36F83C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001C3715063B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C30A414BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>
                │       └ <function create_transacao at 0x000001C371505F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 40, in create_transacao
    and Patrimonio.usuario_id == transacao.usuario_id).first()
        │          │             │         └ 3
        │          │             └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
        │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001C370E920C0>
        └ <class 'src.core.models.Patrimonio'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x000001C370AF2710>
           └ <sqlalchemy.orm.query.Query object at 0x000001C30A4D96F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x000001C370B78D30>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x000001C30A4957B0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001C370B78CA0>
           └ <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x000001C370A2C790>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001C37003F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001C30A448FD0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001C37003F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001C37003F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001C37003F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001C37003F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001C3700CE7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001C370C0B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001C30A4C7840; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2023-03-26 16:57:36.222 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001C3700CE7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001C370C0B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001C30A4C7840; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001C36CF013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001C36CE5F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001C36CE5E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001C36CDCFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>
    │    └ <function subprocess_started at 0x000001C36F19D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=6428 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001C36CDCF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=792, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001C36F17A170>
           │       │   └ <uvicorn.server.Server object at 0x000001C36CDCF7C0>
           │       └ <function run at 0x000001C36CF02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001C36F21EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001C36EA89E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001C36EA89D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C36EA8B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C36E9EADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C36CEB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C30A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001C36F88EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001C36CEB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C30A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C30A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C30A42BB50>
          └ <fastapi.applications.FastAPI object at 0x000001C36F88EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C30A3D39A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001C30A42BB50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001C30A3D39A0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001C36F883F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001C30A42B910>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001C30A42BB20...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001C30A448640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001C36F8EA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001C30A448640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001C30A42BA90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001C30A448640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001C30A450040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C30A42B970>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001C30A42BA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001C30A42B850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001C30A42B970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001C30A3326E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001C30A42B850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001C36F83D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001C30A4500D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001C30A3D1C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001C30A448940>
                     └ <function get_request_handler.<locals>.app at 0x000001C30A3D1BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001C36F83C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001C3715063B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001C30A414BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>
                │       └ <function create_transacao at 0x000001C371505F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 40, in create_transacao
    and Patrimonio.usuario_id == transacao.usuario_id).first()
        │          │             │         └ 3
        │          │             └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
        │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001C370E920C0>
        └ <class 'src.core.models.Patrimonio'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x000001C370AF2710>
           └ <sqlalchemy.orm.query.Query object at 0x000001C30A4D96F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x000001C370B78D30>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x000001C30A4957B0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001C370B78CA0>
           └ <sqlalchemy.orm.session.Session object at 0x000001C30A448FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x000001C370A2C790>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001C37003F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001C30A448FD0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001C37003F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001C37003F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001C37003F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001C37003F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001C3700CE7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001C370C0B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C30A4DA0E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001C30A4C7840; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2023-03-26 16:59:27.096 request id: app - uvicorn.server:serve - Started server process [5012]
INFO     2023-03-26 16:59:27.096 request id: app - uvicorn.server:serve - Started server process [5012]
INFO     2023-03-26 16:59:27.097 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:59:27.097 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 16:59:27.098 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:59:27.099 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 16:59:44.942 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57479 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 16:59:50.068 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E193DFC0; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 652
               │     └ 3
               └ <function _main at 0x00000231C5E87760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 652
           │    └ <function BaseProcess._bootstrap at 0x00000231C5DDAE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000231C5DDA4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000231C5E91E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    └ <function subprocess_started at 0x00000231C5F3F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000231C5E91F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000231C5F1FEB0>
           │       │   └ <uvicorn.server.Server object at 0x00000231C5E91F00>
           │       └ <function run at 0x00000231C46BF010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000231C5FC6FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000231C46D0A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000231C46D09D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000231C46D24D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000231C4721B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>
          └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E1864430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E1864430>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000231C65B64D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000231E1832350>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E1833040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000231C65B6E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E1833040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E1833040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000231E18736D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000231E15F4D90>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000231C6577010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000231E180C310>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000231E1833340>
                     └ <function get_request_handler.<locals>.app at 0x00000231E180C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000231C6575870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000231E1833910>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000231C891DA20>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000231E17F75B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000231E1833910>
                │       └ <function create_transacao at 0x00000231C891D630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 40, in create_transacao
    and Patrimonio.usuario_id == transacao.usuario_id).first()
        │          │             │         └ 3
        │          │             └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
        │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000231C8357D80>
        └ <class 'src.core.models.Patrimonio'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x00000231C5488160>
           └ <sqlalchemy.orm.query.Query object at 0x00000231E1939660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x00000231C803EEF0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x00000231E1833910>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x00000231E1939360>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000231C803EE60>
           └ <sqlalchemy.orm.session.Session object at 0x00000231E1833910>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x00000231C53C20E0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000231C6BA2DD0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x00000231E1938DC0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000231C6BA30A0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000231C6BA3250>
          └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000231C6BA32E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000231C6BA3520>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E193DFC0; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2023-03-26 16:59:50.133 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E193DFC0; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 652
               │     └ 3
               └ <function _main at 0x00000231C5E87760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 652
           │    └ <function BaseProcess._bootstrap at 0x00000231C5DDAE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000231C5DDA4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000231C5E91E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    └ <function subprocess_started at 0x00000231C5F3F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000231C5E91F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000231C5F1FEB0>
           │       │   └ <uvicorn.server.Server object at 0x00000231C5E91F00>
           │       └ <function run at 0x00000231C46BF010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000231C5FC6FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000231C46D0A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000231C46D09D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000231C46D24D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000231C4721B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>
          └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E1864430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E1864430>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000231C65B64D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000231E1832350>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E1833040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000231C65B6E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E1833040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E1833040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000231E18736D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000231E15F4D90>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000231C6577010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E18732E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000231E180C310>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000231E1833340>
                     └ <function get_request_handler.<locals>.app at 0x00000231E180C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000231C6575870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000231E1833910>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000231C891DA20>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000231E17F75B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000231E1833910>
                │       └ <function create_transacao at 0x00000231C891D630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 40, in create_transacao
    and Patrimonio.usuario_id == transacao.usuario_id).first()
        │          │             │         └ 3
        │          │             └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
        │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000231C8357D80>
        └ <class 'src.core.models.Patrimonio'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x00000231C5488160>
           └ <sqlalchemy.orm.query.Query object at 0x00000231E1939660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x00000231C803EEF0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x00000231E1833910>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x00000231E1939360>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000231C803EE60>
           └ <sqlalchemy.orm.session.Session object at 0x00000231E1833910>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x00000231C53C20E0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000231C6BA2DD0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x00000231E1938DC0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000231C6BA30A0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000231C6BA3250>
          └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000231C6BA32E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000231C6BA3520>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E19399C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E193DFC0; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2023-03-26 17:01:39.533 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57480 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:01:39.535 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E165D380; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 652
               │     └ 3
               └ <function _main at 0x00000231C5E87760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 652
           │    └ <function BaseProcess._bootstrap at 0x00000231C5DDAE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000231C5DDA4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000231C5E91E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    └ <function subprocess_started at 0x00000231C5F3F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000231C5E91F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000231C5F1FEB0>
           │       │   └ <uvicorn.server.Server object at 0x00000231C5E91F00>
           │       └ <function run at 0x00000231C46BF010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000231C5FC6FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000231C46D0A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000231C46D09D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000231C46D24D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000231C4721B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>
          └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E18645E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E18645E0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000231C65B64D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000231E1832350>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E193AB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000231C65B6E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E193AB00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E193AB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000231E1B2F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000231E15F4D90>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000231C6577010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000231E180C310>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000231E193B400>
                     └ <function get_request_handler.<locals>.app at 0x00000231E180C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000231C6575870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000231C891DA20>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000231E17F75B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>
                │       └ <function create_transacao at 0x00000231C891D630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 40, in create_transacao
    and Patrimonio.usuario_id == transacao.usuario_id).first()
        │          │             │         └ 3
        │          │             └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
        │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000231C8357D80>
        └ <class 'src.core.models.Patrimonio'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x00000231C5488160>
           └ <sqlalchemy.orm.query.Query object at 0x00000231E1C66B60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x00000231C803EEF0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x00000231E1C64DC0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000231C803EE60>
           └ <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x00000231C53C20E0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000231C6BA2DD0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x00000231E1C66BF0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000231C6BA30A0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000231C6BA3250>
          └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000231C6BA32E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000231C6BA3520>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E165D380; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2023-03-26 17:01:39.575 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E165D380; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 652
               │     └ 3
               └ <function _main at 0x00000231C5E87760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 652
           │    └ <function BaseProcess._bootstrap at 0x00000231C5DDAE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000231C5DDA4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000231C5E91E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>
    │    └ <function subprocess_started at 0x00000231C5F3F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=9652 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000231C5E91F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=924, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000231C5F1FEB0>
           │       │   └ <uvicorn.server.Server object at 0x00000231C5E91F00>
           │       └ <function run at 0x00000231C46BF010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000231C5FC6FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000231C46D0A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000231C46D09D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000231C46D24D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000231C4721B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000231C60C0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000231E1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>
          └ <fastapi.applications.FastAPI object at 0x00000231C65AEB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E18645E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000231E18324A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000231E18645E0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000231C65B64D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000231E1832350>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000231E1832470...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E193AB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000231C65B6E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E193AB00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000231E193AB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000231E1B2F370>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000231E1831F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000231E1832320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000231E15F4D90>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000231E18322C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000231C6577010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000231E1B2F5B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000231E180C310>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000231E193B400>
                     └ <function get_request_handler.<locals>.app at 0x00000231E180C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000231C6575870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000231C891DA20>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000231E17F75B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>
                │       └ <function create_transacao at 0x00000231C891D630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 40, in create_transacao
    and Patrimonio.usuario_id == transacao.usuario_id).first()
        │          │             │         └ 3
        │          │             └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
        │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000231C8357D80>
        └ <class 'src.core.models.Patrimonio'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x00000231C5488160>
           └ <sqlalchemy.orm.query.Query object at 0x00000231E1C66B60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x00000231C803EEF0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x00000231E1C64DC0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000231C803EE60>
           └ <sqlalchemy.orm.session.Session object at 0x00000231E1939D50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x00000231C53C20E0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000231C6BA2DD0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x00000231E1C66BF0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000231C6BA30A0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000231C6BA3250>
          └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000231C6BA32E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000231C6BA3520>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231C6C26DD0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000231C81002E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E1C66FE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000231E165D380; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2023-03-26 17:03:01.270 request id: app - uvicorn.server:serve - Started server process [13920]
INFO     2023-03-26 17:03:01.270 request id: app - uvicorn.server:serve - Started server process [13920]
INFO     2023-03-26 17:03:01.270 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:01.271 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:01.271 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:03:01.271 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:03:04.447 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57562 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:03:04.447 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B6FF6027A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001B6FF93B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001B6993A7840; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 340
               │     └ 3
               └ <function _main at 0x000001B6FBC113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 340
           │    └ <function BaseProcess._bootstrap at 0x000001B6FBB6F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B6FBB6E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B6FBADFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>
    │    └ <function subprocess_started at 0x000001B6FDECD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B6FBADF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001B6FDEAA170>
           │       │   └ <uvicorn.server.Server object at 0x000001B6FBADF7C0>
           │       └ <function run at 0x000001B6FBC12560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B6FDF4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B6FD7A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B6FD7A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B6FD7AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B6FD6FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B6FBBC8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B699...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B6FE5BEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B6FBBC8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B699...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B699...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B69930B970>
          └ <fastapi.applications.FastAPI object at 0x000001B6FE5BEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6992B3C70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B69930B970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6992B3C70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001B6FE5B3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001B69930B850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B699328550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001B6FE61A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001B699328550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B69930B7F0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B699328550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001B699334040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B69930B7C0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B69930B7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B69930B760>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B69930B7C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001B6991965F0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B69930B760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001B6FE56D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001B6992B1C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B699328850>
                     └ <function get_request_handler.<locals>.app at 0x000001B6992B1BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B6FE56C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001B6802B63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B6992F8AC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>
                │       └ <function create_transacao at 0x000001B6802B5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 39, in create_transacao
    patrimonio_exists = db.query(Patrimonio).filter(Patrimonio.codigo_ativo == transacao.codigo_ativo).first()
                        │  │     │                  │          │               │         └ 'ITSA4'
                        │  │     │                  │          │               └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                        │  │     │                  │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001B6FFBC1DA0>
                        │  │     │                  └ <class 'src.core.models.Patrimonio'>
                        │  │     └ <class 'src.core.models.Patrimonio'>
                        │  └ <function Session.query at 0x000001B6FF8A9360>
                        └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x000001B6FF822710>
           └ <sqlalchemy.orm.query.Query object at 0x000001B6993B1600>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x000001B6FF8A8D30>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x000001B699375750>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001B6FF8A8CA0>
           └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x000001B6FF75C790>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001B6FF56F0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001B699328EE0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001B6FF56F370>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001B6FF56F520>
          └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001B6FF56F5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001B6FF56F7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B6FF6027A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001B6FF93B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001B6993A7840; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
ERROR    2023-03-26 17:03:04.474 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B6FF6027A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001B6FF93B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001B6993A7840; closed: -1>

psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 340
               │     └ 3
               └ <function _main at 0x000001B6FBC113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 340
           │    └ <function BaseProcess._bootstrap at 0x000001B6FBB6F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B6FBB6E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B6FBADFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>
    │    └ <function subprocess_started at 0x000001B6FDECD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14012 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B6FBADF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001B6FDEAA170>
           │       │   └ <uvicorn.server.Server object at 0x000001B6FBADF7C0>
           │       └ <function run at 0x000001B6FBC12560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B6FDF4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B6FD7A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B6FD7A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B6FD7AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B6FD6FADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B6FBBC8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B699...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B6FE5BEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B6FBBC8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B699...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B699...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B69930B970>
          └ <fastapi.applications.FastAPI object at 0x000001B6FE5BEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6992B3C70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B69930B970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B6992B3C70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001B6FE5B3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001B69930B850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B69930B940...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B699328550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001B6FE61A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001B699328550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B69930B7F0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B699328550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001B699334040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B69930B7C0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B69930B7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B69930B760>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B69930B7C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001B6991965F0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B69930B760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001B6FE56D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B6993340D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001B6992B1C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B699328850>
                     └ <function get_request_handler.<locals>.app at 0x000001B6992B1BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B6FE56C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001B6802B63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B6992F8AC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>
                │       └ <function create_transacao at 0x000001B6802B5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 39, in create_transacao
    patrimonio_exists = db.query(Patrimonio).filter(Patrimonio.codigo_ativo == transacao.codigo_ativo).first()
                        │  │     │                  │          │               │         └ 'ITSA4'
                        │  │     │                  │          │               └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                        │  │     │                  │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001B6FFBC1DA0>
                        │  │     │                  └ <class 'src.core.models.Patrimonio'>
                        │  │     └ <class 'src.core.models.Patrimonio'>
                        │  └ <function Session.query at 0x000001B6FF8A9360>
                        └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2752, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x000001B6FF822710>
           └ <sqlalchemy.orm.query.Query object at 0x000001B6993B1600>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x000001B6FF8A8D30>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x000001B699375750>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2229, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001B6FF8A8CA0>
           └ <sqlalchemy.orm.session.Session object at 0x000001B699328EB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2124, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x000001B6FF75C790>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\context.py", line 253, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001B6FF56F0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001B699328EE0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001B6FF56F370>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001B6FF56F520>
          └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001B6FF56F5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001B6FF56F7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ InvalidTextRepresentation('invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimonio."CODIGO_ATIVO" = \'ITSA4\...
          │                    │              └ (<class 'psycopg2.errors.InvalidTextRepresentation'>, InvalidTextRepresentation('invalid input syntax for type integer: "ITSA...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DataError('(psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"\nLINE 3: WHERE patrimon...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001B6FF6027A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001B6FF93B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001B6993B1FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}
    │      │       └ 'SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", pat...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001B6993A7840; closed: -1>

sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type integer: "ITSA4"
LINE 3: WHERE patrimonio."CODIGO_ATIVO" = 'ITSA4' 
                                          ^

[SQL: SELECT patrimonio."PATRIMONIO_ID" AS "patrimonio_PATRIMONIO_ID", patrimonio."CODIGO_ATIVO" AS "patrimonio_CODIGO_ATIVO", patrimonio."PRECO_MEDIO" AS "patrimonio_PRECO_MEDIO", patrimonio."QUANTIDADE" AS "patrimonio_QUANTIDADE", patrimonio."CATEGORIA" AS "patrimonio_CATEGORIA", patrimonio."TOTAL" AS "patrimonio_TOTAL", patrimonio."USUARIO_ID" AS "patrimonio_USUARIO_ID" 
FROM patrimonio 
WHERE patrimonio."CODIGO_ATIVO" = %(CODIGO_ATIVO_1)s 
 LIMIT %(param_1)s]
[parameters: {'CODIGO_ATIVO_1': 'ITSA4', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
INFO     2023-03-26 17:03:37.038 request id: app - uvicorn.server:serve - Started server process [2184]
INFO     2023-03-26 17:03:37.038 request id: app - uvicorn.server:serve - Started server process [2184]
INFO     2023-03-26 17:03:37.039 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:37.039 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:37.040 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:03:37.041 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:03:54.019 request id: app - uvicorn.server:serve - Started server process [744]
INFO     2023-03-26 17:03:54.019 request id: app - uvicorn.server:serve - Started server process [744]
INFO     2023-03-26 17:03:54.020 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:54.020 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:54.020 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:03:54.020 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:03:56.122 request id: app - uvicorn.server:serve - Started server process [8644]
INFO     2023-03-26 17:03:56.123 request id: app - uvicorn.server:serve - Started server process [8644]
INFO     2023-03-26 17:03:56.123 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:56.123 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:03:56.124 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:03:56.124 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:04:13.237 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 17:04:13.237 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 17:04:15.123 request id: app - uvicorn.server:serve - Started server process [7616]
INFO     2023-03-26 17:04:15.123 request id: app - uvicorn.server:serve - Started server process [7616]
INFO     2023-03-26 17:04:15.123 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:04:15.124 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:04:15.124 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:04:15.124 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:04:18.461 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57592 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:04:18.462 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000025C4E5C13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000025C4E51F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000025C4E51E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000025C4E48FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>
    │    └ <function subprocess_started at 0x0000025C5082D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000025C4E48F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000025C5080A170>
           │       │   └ <uvicorn.server.Server object at 0x0000025C4E48F7C0>
           │       └ <function run at 0x0000025C4E5C2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000025C508AEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000025C50149E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000025C50149D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000025C5014B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000025C500AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025C4E578610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025C6B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000025C50F1EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025C4E578610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025C6B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025C6B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025C6BB4D060>
          └ <fastapi.applications.FastAPI object at 0x0000025C50F1EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025C6BB448B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025C6BB4D060>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025C6BB448B0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000025C50F13F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000025C6BB4CF40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000025C6BB4DC00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000025C50F7A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000025C6BB4DC00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000025C6BB4CEE0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000025C6BB4DC00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000025C6BB44C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025C6BB4CEB0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000025C6BB4CEE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000025C6BB4CE50>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025C6BB4CEB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000025C6BA5A980>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000025C6BB4CE50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000025C50ECD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000025C6BAFA830>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000025C6BB4DF00>
                     └ <function get_request_handler.<locals>.app at 0x0000025C6BAFA7A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000025C50ECC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000025C6BB4E560>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000025C52B96320>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000025C6BB22170>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000025C6BB4E560>
                │       └ <function create_transacao at 0x0000025C52B95EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 49, in create_transacao
    _patrimonio = create_patrimonio(transacao)
                  │                 └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  └ <function create_patrimonio at 0x0000025C52B95FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 74, in create_patrimonio
    categoria=transacao.tipo_ativo,
              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...

AttributeError: 'TransacaoRequestSchema' object has no attribute 'tipo_ativo'
ERROR    2023-03-26 17:04:18.480 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000025C4E5C13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000025C4E51F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000025C4E51E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000025C4E48FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>
    │    └ <function subprocess_started at 0x0000025C5082D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=6508 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000025C4E48F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000025C5080A170>
           │       │   └ <uvicorn.server.Server object at 0x0000025C4E48F7C0>
           │       └ <function run at 0x0000025C4E5C2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000025C508AEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000025C50149E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000025C50149D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000025C5014B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000025C500AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025C4E578610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025C6B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000025C50F1EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000025C4E578610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025C6B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025C6B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025C6BB4D060>
          └ <fastapi.applications.FastAPI object at 0x0000025C50F1EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025C6BB448B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000025C6BB4D060>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000025C6BB448B0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000025C50F13F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000025C6BB4CF40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000025C6BB4D030...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000025C6BB4DC00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000025C50F7A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000025C6BB4DC00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000025C6BB4CEE0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000025C6BB4DC00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000025C6BB44C10>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025C6BB4CEB0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000025C6BB4CEE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000025C6BB4CE50>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000025C6BB4CEB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000025C6BA5A980>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000025C6BB4CE50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000025C50ECD990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000025C6BB44CA0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000025C6BAFA830>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000025C6BB4DF00>
                     └ <function get_request_handler.<locals>.app at 0x0000025C6BAFA7A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000025C50ECC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000025C6BB4E560>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000025C52B96320>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000025C6BB22170>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000025C6BB4E560>
                │       └ <function create_transacao at 0x0000025C52B95EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 49, in create_transacao
    _patrimonio = create_patrimonio(transacao)
                  │                 └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  └ <function create_patrimonio at 0x0000025C52B95FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 74, in create_patrimonio
    categoria=transacao.tipo_ativo,
              └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...

AttributeError: 'TransacaoRequestSchema' object has no attribute 'tipo_ativo'
INFO     2023-03-26 17:04:30.460 request id: app - uvicorn.server:serve - Started server process [7624]
INFO     2023-03-26 17:04:30.460 request id: app - uvicorn.server:serve - Started server process [7624]
INFO     2023-03-26 17:04:30.461 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:04:30.461 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:04:30.461 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:04:30.462 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:04:34.019 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57601 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:04:34.019 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000185585D27A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001855890B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CATEGORIA': 'Ações', 'CODIGO_ATIVO': 'ITSA4', 'ORDEM': 'Compra', 'CORRETORA': 'Rico', 'TIPO_ATIVO': None, 'DATA': datetime....
    │      │       └ 'INSERT INTO transacoes ("CATEGORIA", "CODIGO_ATIVO", "ORDEM", "CORRETORA", "TIPO_ATIVO", "DATA", "QUANTIDADE", "PRECO", "TOT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000185722A3920; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "TIPO_ATIVO" of relation "transacoes" violates not-null constraint
DETAIL:  Failing row contains (1, Ações, ITSA4, Compra, Rico, null, 2023-03-26 00:00:00, 10, 8.5, 85.0, 3).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x0000018554BD13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x0000018554B2F1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018554B2E830>
    └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000018554A9FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>
    │    └ <function subprocess_started at 0x0000018556E9D6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000018554A9F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000018556E7A170>
           │       │   └ <uvicorn.server.Server object at 0x0000018554A9F7C0>
           │       └ <function run at 0x0000018554BD2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018556F1EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000018556779E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000018556779D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001855677B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000185566CADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018554B88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018572...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001855758EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018554B88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018572...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018572...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000185721BBA60>
          └ <fastapi.applications.FastAPI object at 0x000001855758EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018572163C70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000185721BBA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018572163C70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000018557583F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000185721BB940>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000185721D8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000185575EA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000185721D8640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000185721BB8E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000185721D8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000185721E4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000185721BB8B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000185721BB8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000185721BB850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000185721BB8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000185720E26E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000185721BB850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001855753D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000018572161C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000185721D8940>
                     └ <function get_request_handler.<locals>.app at 0x0000018572161BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001855753C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000185592063B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000185721A4BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>
                │       └ <function create_transacao at 0x0000018559205F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 52, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x0000018558878A60>
    └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000018558867C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>
                └ <function SessionTransaction.commit at 0x0000018558867BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000018558867B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>
                └ <function SessionTransaction._prepare_impl at 0x0000018558867A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001855887A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001855887A830>
    └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000185722BDA00>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "TIPO_ATIVO" of relation "transacoes" violates not-nu...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000018558864AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018572221810>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018572221810>
    │   └ <function SaveUpdateAll.execute at 0x00000185588653F0>
    └ SaveUpdateAll(Mapper[Transacao(transacoes)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000018558802C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001855884C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001855853F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001857226B310>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001855853F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001855853F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001855853F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001855853F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "TIPO_ATIVO" of relation "transacoes" violates not-null constraint\nDETAIL:  Failing r...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "TIPO_ATIVO" of relation "transacoes" vio...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "TIPO_ATIVO" of relation "transacoes" violates not-nu...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000185585D27A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001855890B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CATEGORIA': 'Ações', 'CODIGO_ATIVO': 'ITSA4', 'ORDEM': 'Compra', 'CORRETORA': 'Rico', 'TIPO_ATIVO': None, 'DATA': datetime....
    │      │       └ 'INSERT INTO transacoes ("CATEGORIA", "CODIGO_ATIVO", "ORDEM", "CORRETORA", "TIPO_ATIVO", "DATA", "QUANTIDADE", "PRECO", "TOT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000185722A3920; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "TIPO_ATIVO" of relation "transacoes" violates not-null constraint
DETAIL:  Failing row contains (1, Ações, ITSA4, Compra, Rico, null, 2023-03-26 00:00:00, 10, 8.5, 85.0, 3).

[SQL: INSERT INTO transacoes ("CATEGORIA", "CODIGO_ATIVO", "ORDEM", "CORRETORA", "TIPO_ATIVO", "DATA", "QUANTIDADE", "PRECO", "TOTAL", "USUARIO_ID") VALUES (%(CATEGORIA)s, %(CODIGO_ATIVO)s, %(ORDEM)s, %(CORRETORA)s, %(TIPO_ATIVO)s, %(DATA)s, %(QUANTIDADE)s, %(PRECO)s, %(TOTAL)s, %(USUARIO_ID)s) RETURNING transacoes."TRANSACAO_ID"]
[parameters: {'CATEGORIA': 'Ações', 'CODIGO_ATIVO': 'ITSA4', 'ORDEM': 'Compra', 'CORRETORA': 'Rico', 'TIPO_ATIVO': None, 'DATA': datetime.date(2023, 3, 26), 'QUANTIDADE': 10, 'PRECO': 8.5, 'TOTAL': 85.0, 'USUARIO_ID': 3}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2023-03-26 17:04:34.046 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000185585D27A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001855890B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CATEGORIA': 'Ações', 'CODIGO_ATIVO': 'ITSA4', 'ORDEM': 'Compra', 'CORRETORA': 'Rico', 'TIPO_ATIVO': None, 'DATA': datetime....
    │      │       └ 'INSERT INTO transacoes ("CATEGORIA", "CODIGO_ATIVO", "ORDEM", "CORRETORA", "TIPO_ATIVO", "DATA", "QUANTIDADE", "PRECO", "TOT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000185722A3920; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "TIPO_ATIVO" of relation "transacoes" violates not-null constraint
DETAIL:  Failing row contains (1, Ações, ITSA4, Compra, Rico, null, 2023-03-26 00:00:00, 10, 8.5, 85.0, 3).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x0000018554BD13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x0000018554B2F1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018554B2E830>
    └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000018554A9FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>
    │    └ <function subprocess_started at 0x0000018556E9D6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=6508 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000018554A9F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000018556E7A170>
           │       │   └ <uvicorn.server.Server object at 0x0000018554A9F7C0>
           │       └ <function run at 0x0000018554BD2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018556F1EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000018556779E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000018556779D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001855677B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000185566CADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018554B88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018572...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001855758EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018554B88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018572...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018572...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000185721BBA60>
          └ <fastapi.applications.FastAPI object at 0x000001855758EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018572163C70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000185721BBA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000018572163C70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000018557583F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000185721BB940>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000185721BBA30...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000185721D8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000185575EA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000185721D8640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000185721BB8E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000185721D8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000185721E4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000185721BB8B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000185721BB8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000185721BB850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000185721BB8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000185720E26E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000185721BB850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001855753D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000185721E40D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000018572161C60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000185721D8940>
                     └ <function get_request_handler.<locals>.app at 0x0000018572161BD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001855753C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000185592063B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000185721A4BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>
                │       └ <function create_transacao at 0x0000018559205F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 52, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x0000018558878A60>
    └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x0000018558867C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>
                └ <function SessionTransaction.commit at 0x0000018558867BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x0000018558867B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>
                └ <function SessionTransaction._prepare_impl at 0x0000018558867A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001855887A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x0000018572178180>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001855887A830>
    └ <sqlalchemy.orm.session.Session object at 0x00000185721D8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000185722BDA00>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "TIPO_ATIVO" of relation "transacoes" violates not-nu...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x0000018558864AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018572221810>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x0000018572221810>
    │   └ <function SaveUpdateAll.execute at 0x00000185588653F0>
    └ SaveUpdateAll(Mapper[Transacao(transacoes)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x0000018558802C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001855884C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001855853F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001857226B310>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001855853F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001855853F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001855853F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001855853F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "TIPO_ATIVO" of relation "transacoes" violates not-null constraint\nDETAIL:  Failing r...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "TIPO_ATIVO" of relation "transacoes" vio...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "TIPO_ATIVO" of relation "transacoes" violates not-nu...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000185585D27A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001855890B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001857226A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CATEGORIA': 'Ações', 'CODIGO_ATIVO': 'ITSA4', 'ORDEM': 'Compra', 'CORRETORA': 'Rico', 'TIPO_ATIVO': None, 'DATA': datetime....
    │      │       └ 'INSERT INTO transacoes ("CATEGORIA", "CODIGO_ATIVO", "ORDEM", "CORRETORA", "TIPO_ATIVO", "DATA", "QUANTIDADE", "PRECO", "TOT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000185722A3920; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "TIPO_ATIVO" of relation "transacoes" violates not-null constraint
DETAIL:  Failing row contains (1, Ações, ITSA4, Compra, Rico, null, 2023-03-26 00:00:00, 10, 8.5, 85.0, 3).

[SQL: INSERT INTO transacoes ("CATEGORIA", "CODIGO_ATIVO", "ORDEM", "CORRETORA", "TIPO_ATIVO", "DATA", "QUANTIDADE", "PRECO", "TOTAL", "USUARIO_ID") VALUES (%(CATEGORIA)s, %(CODIGO_ATIVO)s, %(ORDEM)s, %(CORRETORA)s, %(TIPO_ATIVO)s, %(DATA)s, %(QUANTIDADE)s, %(PRECO)s, %(TOTAL)s, %(USUARIO_ID)s) RETURNING transacoes."TRANSACAO_ID"]
[parameters: {'CATEGORIA': 'Ações', 'CODIGO_ATIVO': 'ITSA4', 'ORDEM': 'Compra', 'CORRETORA': 'Rico', 'TIPO_ATIVO': None, 'DATA': datetime.date(2023, 3, 26), 'QUANTIDADE': 10, 'PRECO': 8.5, 'TOTAL': 85.0, 'USUARIO_ID': 3}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2023-03-26 17:05:15.477 request id: app - uvicorn.server:serve - Started server process [6780]
INFO     2023-03-26 17:05:15.477 request id: app - uvicorn.server:serve - Started server process [6780]
INFO     2023-03-26 17:05:15.477 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:05:15.477 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:05:15.478 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:05:15.478 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:05:37.073 request id: app - uvicorn.server:serve - Started server process [5392]
INFO     2023-03-26 17:05:37.073 request id: app - uvicorn.server:serve - Started server process [5392]
INFO     2023-03-26 17:05:37.073 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:05:37.074 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:05:37.074 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:05:37.074 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:05:39.299 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57619 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:05:50.820 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57620 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:05:50.821 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002EE05ED13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002EE05E2F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002EE05E2E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002EE05D9FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>
    │    └ <function subprocess_started at 0x000002EE081DD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002EE05D9F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002EE081BA170>
           │       │   └ <uvicorn.server.Server object at 0x000002EE05D9F7C0>
           │       └ <function run at 0x000002EE05ED2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002EE0825EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002EE07AB9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002EE07AB9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002EE07ABB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002EE07A0ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002EE05E88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002EE23...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002EE088CEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002EE05E88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002EE23...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002EE23...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002EE23508E20>
          └ <fastapi.applications.FastAPI object at 0x000002EE088CEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002EE235B7AC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002EE23508E20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002EE235B7AC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002EE088C3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002EE23508D00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002EE23509630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002EE0892A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002EE23509630>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002EE23508CA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002EE23509630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002EE23504820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002EE23508C70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002EE23508CA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002EE23508C10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002EE23508C70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002EE23352800>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002EE23508C10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002EE0887D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002EE234AE7A0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002EE23509A50>
                     └ <function get_request_handler.<locals>.app at 0x000002EE234AE710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002EE0887C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002EE23509F30>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000002EE0A546320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002EE234DDF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002EE23509F30>
                │       └ <function create_transacao at 0x000002EE0A545EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <src.core.models.Patrimonio object at 0x000002EE235ED9C0>
                  └ <function update_patrimonio_add at 0x000002EE0A545F30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 67, in update_patrimonio_add
    preco_medio=(patrimonio_exists.total + total_transacao) / total_patrimonio_qtd
                 │                 │       │                  └ 30
                 │                 │       └ 170.0
                 │                 └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000002EE09ECDF80>
                 └ <src.core.models.Patrimonio object at 0x000002EE235ED9C0>

TypeError: unsupported operand type(s) for +: 'decimal.Decimal' and 'float'
ERROR    2023-03-26 17:05:50.839 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002EE05ED13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002EE05E2F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002EE05E2E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002EE05D9FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>
    │    └ <function subprocess_started at 0x000002EE081DD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002EE05D9F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002EE081BA170>
           │       │   └ <uvicorn.server.Server object at 0x000002EE05D9F7C0>
           │       └ <function run at 0x000002EE05ED2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002EE0825EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002EE07AB9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002EE07AB9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002EE07ABB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002EE07A0ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002EE05E88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002EE23...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002EE088CEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002EE05E88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002EE23...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002EE23...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002EE23508E20>
          └ <fastapi.applications.FastAPI object at 0x000002EE088CEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002EE235B7AC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002EE23508E20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002EE235B7AC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000002EE088C3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002EE23508D00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002EE23508DF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002EE23509630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002EE0892A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002EE23509630>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002EE23508CA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002EE23509630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002EE23504820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002EE23508C70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002EE23508CA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002EE23508C10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002EE23508C70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002EE23352800>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002EE23508C10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002EE0887D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002EE235048B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002EE234AE7A0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002EE23509A50>
                     └ <function get_request_handler.<locals>.app at 0x000002EE234AE710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002EE0887C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002EE23509F30>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000002EE0A546320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002EE234DDF30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000002EE23509F30>
                │       └ <function create_transacao at 0x000002EE0A545EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <src.core.models.Patrimonio object at 0x000002EE235ED9C0>
                  └ <function update_patrimonio_add at 0x000002EE0A545F30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 67, in update_patrimonio_add
    preco_medio=(patrimonio_exists.total + total_transacao) / total_patrimonio_qtd
                 │                 │       │                  └ 30
                 │                 │       └ 170.0
                 │                 └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000002EE09ECDF80>
                 └ <src.core.models.Patrimonio object at 0x000002EE235ED9C0>

TypeError: unsupported operand type(s) for +: 'decimal.Decimal' and 'float'
INFO     2023-03-26 17:06:39.141 request id: app - uvicorn.server:serve - Started server process [11960]
INFO     2023-03-26 17:06:39.142 request id: app - uvicorn.server:serve - Started server process [11960]
INFO     2023-03-26 17:06:39.142 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:06:39.142 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:06:39.142 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:06:39.143 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:06:46.757 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57634 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:06:46.758 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001699E8813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001699E7DF1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001699E7DE830>
    └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001699E74FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>
    │    └ <function subprocess_started at 0x00000169A0B4D6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001699E74F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000169A0B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001699E74F7C0>
           │       └ <function run at 0x000001699E882560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000169A0BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000169A0429E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000169A0429D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000169A042B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000169A037ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001699E838610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000169BB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000169A123EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001699E838610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000169BB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000169BB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000169BBDFB820>
          └ <fastapi.applications.FastAPI object at 0x00000169A123EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000169BBD9FC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000169BBDFB820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000169BBD9FC70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000169A1233F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000169BBDFB700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000169BBE18400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000169A129A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000169BBE18400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000169BBDFB6A0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000169BBE18400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000169BBE20040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000169BBDFB670>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000169BBDFB6A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000169BBDFB610>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000169BBDFB670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000169BBCC64A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000169BBDFB610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000169A11ED990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000169BBD9DC60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000169BBE18700>
                     └ <function get_request_handler.<locals>.app at 0x00000169BBD9DBD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000169A11EC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000169BBE18D60>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000169A2EB63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000169BBDE4970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000169BBE18D60>
                │       └ <function create_transacao at 0x00000169A2EB5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <src.core.models.Patrimonio object at 0x00000169BBE689D0>
                  └ <function update_patrimonio_add at 0x00000169A2EB5FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 62, in update_patrimonio_add
    preco_medio = (patrimonio_exists.total + total_transacao) / total_patrimonio_qtd
                   │                 │       │                  └ 30
                   │                 │       └ 170.0
                   │                 └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000169A283DF80>
                   └ <src.core.models.Patrimonio object at 0x00000169BBE689D0>

TypeError: unsupported operand type(s) for +: 'decimal.Decimal' and 'float'
ERROR    2023-03-26 17:06:46.776 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001699E8813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001699E7DF1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001699E7DE830>
    └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001699E74FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>
    │    └ <function subprocess_started at 0x00000169A0B4D6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001699E74F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000169A0B2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001699E74F7C0>
           │       └ <function run at 0x000001699E882560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000169A0BCEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000169A0429E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000169A0429D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000169A042B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000169A037ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001699E838610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000169BB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000169A123EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001699E838610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000169BB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000169BB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000169BBDFB820>
          └ <fastapi.applications.FastAPI object at 0x00000169A123EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000169BBD9FC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000169BBDFB820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000169BBD9FC70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000169A1233F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000169BBDFB700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000169BBDFB7F0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000169BBE18400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000169A129A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000169BBE18400>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000169BBDFB6A0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000169BBE18400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000169BBE20040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000169BBDFB670>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000169BBDFB6A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000169BBDFB610>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000169BBDFB670>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000169BBCC64A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000169BBDFB610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000169A11ED990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000169BBE200D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000016...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000169BBD9DC60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000169BBE18700>
                     └ <function get_request_handler.<locals>.app at 0x00000169BBD9DBD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000169A11EC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000169BBE18D60>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000169A2EB63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000169BBDE4970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000169BBE18D60>
                │       └ <function create_transacao at 0x00000169A2EB5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 42, in create_transacao
    _patrimonio = update_patrimonio_add(patrimonio_exists, transacao)
                  │                     │                  └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                  │                     └ <src.core.models.Patrimonio object at 0x00000169BBE689D0>
                  └ <function update_patrimonio_add at 0x00000169A2EB5FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 62, in update_patrimonio_add
    preco_medio = (patrimonio_exists.total + total_transacao) / total_patrimonio_qtd
                   │                 │       │                  └ 30
                   │                 │       └ 170.0
                   │                 └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000169A283DF80>
                   └ <src.core.models.Patrimonio object at 0x00000169BBE689D0>

TypeError: unsupported operand type(s) for +: 'decimal.Decimal' and 'float'
INFO     2023-03-26 17:07:51.374 request id: app - uvicorn.server:serve - Started server process [3056]
INFO     2023-03-26 17:07:51.374 request id: app - uvicorn.server:serve - Started server process [3056]
INFO     2023-03-26 17:07:51.375 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:07:51.375 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:07:51.375 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:07:51.376 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:07:58.888 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57674 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:07:58.889 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DE4217E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001DE42CBB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 30, 'CATEGORIA': 'Ações', 'TOTAL': 255.0, 'USUARIO_ID': 3}
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001DE5C5EA420; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"
DETAIL:  Key ("CODIGO_ATIVO")=(ITSA4) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x000001DE3EF813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x000001DE3EEDF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DE3EEDE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DE3EE4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>
    │    └ <function subprocess_started at 0x000001DE4124D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DE3EE4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001DE4122A170>
           │       │   └ <uvicorn.server.Server object at 0x000001DE3EE4F7C0>
           │       └ <function run at 0x000001DE3EF82560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DE412CEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DE40B29E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DE40B29D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DE40B2B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DE40A7ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DE3EF38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DE5C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DE4193EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DE3EF38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DE5C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DE5C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DE5C50BB20>
          └ <fastapi.applications.FastAPI object at 0x000001DE4193EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DE5C4AFC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DE5C50BB20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DE5C4AFC70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001DE41933F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001DE5C50BA00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DE5C528610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001DE4199A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001DE5C528610>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DE5C50B970>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DE5C528610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001DE5C530040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DE5C50B880>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DE5C50B970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DE5C50B820>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DE5C50B880>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001DE5C3C26B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DE5C50B820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001DE418ED990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001DE5C4ADC60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DE5C528910>
                     └ <function get_request_handler.<locals>.app at 0x000001DE5C4ADBD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DE418EC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001DE435B63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DE5C4F4B80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>
                │       └ <function create_transacao at 0x000001DE435B5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 45, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x000001DE42C28A60>
    └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001DE42C17C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>
                └ <function SessionTransaction.commit at 0x000001DE42C17BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001DE42C17B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>
                └ <function SessionTransaction._prepare_impl at 0x000001DE42C17A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001DE42C2A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001DE42C2A830>
    └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001DE5C5DB740>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001DE42C14AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001DE5C5717B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001DE5C5717B0>
    │   └ <function SaveUpdateAll.execute at 0x000001DE42C153F0>
    └ SaveUpdateAll(Mapper[Patrimonio(patrimonio)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001DE42BB2C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001DE42BFC280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001DE420EF0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001DE5C5B3040>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001DE420EF370>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001DE420EF520>
          └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001DE420EF5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001DE420EF7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"\nDETAIL:  Key ("CODIGO_ATIVO")=(...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "ix_patrimonio_CO...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DE4217E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001DE42CBB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 30, 'CATEGORIA': 'Ações', 'TOTAL': 255.0, 'USUARIO_ID': 3}
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001DE5C5EA420; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"
DETAIL:  Key ("CODIGO_ATIVO")=(ITSA4) already exists.

[SQL: INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_ATIVO)s, %(PRECO_MEDIO)s, %(QUANTIDADE)s, %(CATEGORIA)s, %(TOTAL)s, %(USUARIO_ID)s) RETURNING patrimonio."PATRIMONIO_ID"]
[parameters: {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 30, 'CATEGORIA': 'Ações', 'TOTAL': 255.0, 'USUARIO_ID': 3}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2023-03-26 17:07:58.916 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DE4217E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001DE42CBB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 30, 'CATEGORIA': 'Ações', 'TOTAL': 255.0, 'USUARIO_ID': 3}
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001DE5C5EA420; closed: -1>

psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"
DETAIL:  Key ("CODIGO_ATIVO")=(ITSA4) already exists.



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x000001DE3EF813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x000001DE3EEDF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001DE3EEDE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001DE3EE4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>
    │    └ <function subprocess_started at 0x000001DE4124D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001DE3EE4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=772, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001DE4122A170>
           │       │   └ <uvicorn.server.Server object at 0x000001DE3EE4F7C0>
           │       └ <function run at 0x000001DE3EF82560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001DE412CEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001DE40B29E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001DE40B29D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DE40B2B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DE40A7ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DE3EF38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DE5C...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001DE4193EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001DE3EF38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DE5C...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001DE5C...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DE5C50BB20>
          └ <fastapi.applications.FastAPI object at 0x000001DE4193EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DE5C4AFC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001DE5C50BB20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001DE5C4AFC70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001DE41933F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001DE5C50BA00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001DE5C50BAF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DE5C528610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001DE4199A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001DE5C528610>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DE5C50B970>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001DE5C528610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001DE5C530040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DE5C50B880>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001DE5C50B970>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DE5C50B820>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001DE5C50B880>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001DE5C3C26B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001DE5C50B820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001DE418ED990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001DE5C5300D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001DE5C4ADC60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001DE5C528910>
                     └ <function get_request_handler.<locals>.app at 0x000001DE5C4ADBD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001DE418EC4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001DE435B63B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001DE5C4F4B80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>
                │       └ <function create_transacao at 0x000001DE435B5F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 45, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x000001DE42C28A60>
    └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001DE42C17C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>
                └ <function SessionTransaction.commit at 0x000001DE42C17BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001DE42C17B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>
                └ <function SessionTransaction._prepare_impl at 0x000001DE42C17A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001DE42C2A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001DE5C2FD940>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001DE42C2A830>
    └ <sqlalchemy.orm.session.Session object at 0x000001DE5C528F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001DE5C5DB740>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001DE42C14AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001DE5C5717B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001DE5C5717B0>
    │   └ <function SaveUpdateAll.execute at 0x000001DE42C153F0>
    └ SaveUpdateAll(Mapper[Patrimonio(patrimonio)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001DE42BB2C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001DE42BFC280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001DE420EF0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001DE5C5B3040>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001DE420EF370>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001DE420EF520>
          └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001DE420EF5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001DE420EF7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ UniqueViolation('duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"\nDETAIL:  Key ("CODIGO_ATIVO")=(...
          │                    │              └ (<class 'psycopg2.errors.UniqueViolation'>, UniqueViolation('duplicate key value violates unique constraint "ix_patrimonio_CO...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001DE4217E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001DE42CBB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001DE5C5B1F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 30, 'CATEGORIA': 'Ações', 'TOTAL': 255.0, 'USUARIO_ID': 3}
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001DE5C5EA420; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "ix_patrimonio_CODIGO_ATIVO"
DETAIL:  Key ("CODIGO_ATIVO")=(ITSA4) already exists.

[SQL: INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_ATIVO)s, %(PRECO_MEDIO)s, %(QUANTIDADE)s, %(CATEGORIA)s, %(TOTAL)s, %(USUARIO_ID)s) RETURNING patrimonio."PATRIMONIO_ID"]
[parameters: {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 30, 'CATEGORIA': 'Ações', 'TOTAL': 255.0, 'USUARIO_ID': 3}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2023-03-26 17:08:31.343 request id: app - uvicorn.server:serve - Started server process [2520]
INFO     2023-03-26 17:08:31.344 request id: app - uvicorn.server:serve - Started server process [2520]
INFO     2023-03-26 17:08:31.344 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:08:31.344 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:08:31.345 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:08:31.345 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:08:33.659 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57687 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:08:33.659 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x0000018614AD13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x0000018614A2F1C0>
           └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018614A2E830>
    └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001861499FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>
    │    └ <function subprocess_started at 0x0000018616DDD6C0>
    └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001861499F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000018616DBA170>
           │       │   └ <uvicorn.server.Server object at 0x000001861499F7C0>
           │       └ <function run at 0x0000018614AD2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018616E5EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000186166B9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000186166B9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000186166BB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001861660ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018614A88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018632...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000186174CEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018614A88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018632...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018632...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001863212B910>
          └ <fastapi.applications.FastAPI object at 0x00000186174CEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000186320CFC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001863212B910>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000186320CFC70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000186174C3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001863212B7F0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000186321484F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001861752A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000186321484F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001863212B790>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000186321484F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000018632154040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001863212B760>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001863212B790>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001863212B700>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001863212B760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000018632056590>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001863212B700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001861747D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000186320CDC60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000186321487F0>
                     └ <function get_request_handler.<locals>.app at 0x00000186320CDBD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001861747C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000018632148E50>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000186191463B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000018632114A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>
                │       └ <function create_transacao at 0x0000018619145F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 46, in create_transacao
    db.refresh(_patrimonio)
    │  │       └ <src.core.models.Patrimonio object at 0x0000018632197E80>
    │  └ <function Session.refresh at 0x00000186187B95A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x000001863217B400>
    │    └ <function Session._expire_state at 0x00000186187B97E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x000001863217B400>
    │    └ <function Session._validate_persistent at 0x00000186187BA0E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x18632197e80>' is not persistent within this Session
ERROR    2023-03-26 17:08:33.678 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x0000018614AD13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x0000018614A2F1C0>
           └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000018614A2E830>
    └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001861499FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>
    │    └ <function subprocess_started at 0x0000018616DDD6C0>
    └ <SpawnProcess name='SpawnProcess-4' parent=4496 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001861499F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000018616DBA170>
           │       │   └ <uvicorn.server.Server object at 0x000001861499F7C0>
           │       └ <function run at 0x0000018614AD2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000018616E5EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000186166B9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000186166B9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000186166BB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001861660ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018614A88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018632...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000186174CEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000018614A88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018632...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018632...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001863212B910>
          └ <fastapi.applications.FastAPI object at 0x00000186174CEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000186320CFC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001863212B910>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000186320CFC70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000186174C3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001863212B7F0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001863212B8E0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000186321484F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001861752A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000186321484F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001863212B790>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000186321484F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000018632154040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001863212B760>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001863212B790>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001863212B700>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001863212B760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000018632056590>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001863212B700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001861747D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000186321540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000018...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000186320CDC60>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000186321487F0>
                     └ <function get_request_handler.<locals>.app at 0x00000186320CDBD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001861747C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000018632148E50>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000186191463B0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000018632114A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>
                │       └ <function create_transacao at 0x0000018619145F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 46, in create_transacao
    db.refresh(_patrimonio)
    │  │       └ <src.core.models.Patrimonio object at 0x0000018632197E80>
    │  └ <function Session.refresh at 0x00000186187B95A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x000001863217B400>
    │    └ <function Session._expire_state at 0x00000186187B97E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x000001863217B400>
    │    └ <function Session._validate_persistent at 0x00000186187BA0E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000018632148E50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x18632197e80>' is not persistent within this Session
INFO     2023-03-26 17:09:12.934 request id: app - uvicorn.server:serve - Started server process [6004]
INFO     2023-03-26 17:09:12.935 request id: app - uvicorn.server:serve - Started server process [6004]
INFO     2023-03-26 17:09:12.935 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:09:12.935 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:09:12.936 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:09:12.936 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:09:16.030 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57707 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:10:24.528 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57723 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:14:03.798 request id: app - uvicorn.server:serve - Started server process [2964]
INFO     2023-03-26 17:14:03.799 request id: app - uvicorn.server:serve - Started server process [2964]
INFO     2023-03-26 17:14:03.799 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:14:03.799 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:14:03.800 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:14:03.800 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:14:12.398 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57770 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:16:51.961 request id: app - uvicorn.server:serve - Started server process [7264]
INFO     2023-03-26 17:16:51.961 request id: app - uvicorn.server:serve - Started server process [7264]
INFO     2023-03-26 17:16:51.962 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:16:51.962 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:16:51.962 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:16:51.963 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:17:52.667 request id: app - uvicorn.server:serve - Started server process [12540]
INFO     2023-03-26 17:17:52.667 request id: app - uvicorn.server:serve - Started server process [12540]
INFO     2023-03-26 17:17:52.668 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:17:52.668 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:17:52.668 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:17:52.669 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:18:16.160 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:57836 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:27:10.341 request id: app - uvicorn.server:serve - Started server process [7600]
INFO     2023-03-26 17:27:10.341 request id: app - uvicorn.server:serve - Started server process [7600]
INFO     2023-03-26 17:27:10.341 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:27:10.342 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:27:10.342 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:27:10.342 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:29:00.290 request id: app - uvicorn.server:serve - Started server process [11860]
INFO     2023-03-26 17:29:00.290 request id: app - uvicorn.server:serve - Started server process [11860]
INFO     2023-03-26 17:29:00.290 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:29:00.291 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:29:00.291 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:29:00.291 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:29:16.747 request id: app - uvicorn.server:serve - Started server process [10456]
INFO     2023-03-26 17:29:16.747 request id: app - uvicorn.server:serve - Started server process [10456]
INFO     2023-03-26 17:29:16.748 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:29:16.748 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:29:16.748 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:29:16.748 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:29:34.813 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58045 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:29:55.982 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58046 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:31:59.842 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58082 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:31:59.843 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x000001BA46CC13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x000001BA46C1F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BA46C1E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BA46B8FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>
    │    └ <function subprocess_started at 0x000001BA48FBD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BA46B8F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001BA48F9A170>
           │       │   └ <uvicorn.server.Server object at 0x000001BA46B8F7C0>
           │       └ <function run at 0x000001BA46CC2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BA4903EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BA48899E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BA48899D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BA4889B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BA487EADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BA46C78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BA64...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BA496AEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BA46C78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BA64...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BA64...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BA6426CE80>
          └ <fastapi.applications.FastAPI object at 0x000001BA496AEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BA490BB130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BA6426CE80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BA490BB130>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001BA496A3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001BA6426CD60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BA6426DA20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001BA4970A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001BA6426DA20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BA6426CD00>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BA6426DA20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001BA64264820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BA6426CCD0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BA6426CD00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BA6426CC70>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BA6426CCD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001BA641327A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BA6426CC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001BA4965D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001BA642167A0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BA6426DA50>
                     └ <function get_request_handler.<locals>.app at 0x000001BA64216710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BA4965C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001BA6426D0C0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001BA4B326290>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BA64241F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Venda', corretora='Rico', data=datetime.date(2023, 3, ...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001BA6426D0C0>
                │       └ <function create_transacao at 0x000001BA4B325EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 51, in create_transacao
    _trasacao.resultado = _trasacao.preco - patrimonio_exists.preco_medio
    │         │           │         │       │                 └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001BA4ACB1E40>
    │         │           │         │       └ <src.core.models.Patrimonio object at 0x000001BA6434A530>
    │         │           │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001BA4AACEC00>
    │         │           └ <src.core.models.Transacao object at 0x000001BA6426DC60>
    │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001BA4AACED40>
    └ <src.core.models.Transacao object at 0x000001BA6426DC60>

TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
ERROR    2023-03-26 17:31:59.860 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x000001BA46CC13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x000001BA46C1F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001BA46C1E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001BA46B8FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>
    │    └ <function subprocess_started at 0x000001BA48FBD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=4584 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001BA46B8F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001BA48F9A170>
           │       │   └ <uvicorn.server.Server object at 0x000001BA46B8F7C0>
           │       └ <function run at 0x000001BA46CC2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001BA4903EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001BA48899E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001BA48899D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001BA4889B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001BA487EADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BA46C78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BA64...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001BA496AEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001BA46C78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BA64...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001BA64...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BA6426CE80>
          └ <fastapi.applications.FastAPI object at 0x000001BA496AEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BA490BB130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001BA6426CE80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001BA490BB130>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001BA496A3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001BA6426CD60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001BA6426CE50...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BA6426DA20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001BA4970A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001BA6426DA20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BA6426CD00>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001BA6426DA20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001BA64264820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BA6426CCD0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001BA6426CD00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BA6426CC70>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001BA6426CCD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001BA641327A0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001BA6426CC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001BA4965D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001BA64264AF0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001BA642167A0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001BA6426DA50>
                     └ <function get_request_handler.<locals>.app at 0x000001BA64216710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001BA4965C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001BA6426D0C0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001BA4B326290>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001BA64241F90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Venda', corretora='Rico', data=datetime.date(2023, 3, ...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001BA6426D0C0>
                │       └ <function create_transacao at 0x000001BA4B325EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 51, in create_transacao
    _trasacao.resultado = _trasacao.preco - patrimonio_exists.preco_medio
    │         │           │         │       │                 └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001BA4ACB1E40>
    │         │           │         │       └ <src.core.models.Patrimonio object at 0x000001BA6434A530>
    │         │           │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001BA4AACEC00>
    │         │           └ <src.core.models.Transacao object at 0x000001BA6426DC60>
    │         └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001BA4AACED40>
    └ <src.core.models.Transacao object at 0x000001BA6426DC60>

TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
INFO     2023-03-26 17:32:23.400 request id: app - uvicorn.server:serve - Started server process [11940]
INFO     2023-03-26 17:32:23.400 request id: app - uvicorn.server:serve - Started server process [11940]
INFO     2023-03-26 17:32:23.400 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:32:23.401 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:32:23.401 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:32:23.402 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:32:26.458 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58092 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:33:06.165 request id: app - uvicorn.server:serve - Started server process [16196]
INFO     2023-03-26 17:33:06.165 request id: app - uvicorn.server:serve - Started server process [16196]
INFO     2023-03-26 17:33:06.165 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:33:06.166 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:33:06.166 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:33:06.166 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:37:30.198 request id: app - uvicorn.server:serve - Started server process [13932]
INFO     2023-03-26 17:37:30.199 request id: app - uvicorn.server:serve - Started server process [13932]
INFO     2023-03-26 17:37:30.199 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:37:30.199 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:37:30.200 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:37:30.200 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:38:20.622 request id: app - uvicorn.server:serve - Started server process [13536]
INFO     2023-03-26 17:38:20.622 request id: app - uvicorn.server:serve - Started server process [13536]
INFO     2023-03-26 17:38:20.623 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:38:20.623 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:38:20.623 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:38:20.623 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:40:02.073 request id: app - uvicorn.server:serve - Started server process [6752]
INFO     2023-03-26 17:40:02.073 request id: app - uvicorn.server:serve - Started server process [6752]
INFO     2023-03-26 17:40:02.074 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:40:02.075 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:40:02.076 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:40:02.076 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:40:16.888 request id: app - uvicorn.server:serve - Started server process [9568]
INFO     2023-03-26 17:40:16.889 request id: app - uvicorn.server:serve - Started server process [9568]
INFO     2023-03-26 17:40:16.889 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:40:16.890 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:40:16.890 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:40:16.890 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:40:54.534 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58181 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:40:54.535 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x000001CF08DA13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x000001CF08CFF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001CF08CFE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001CF08C6FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>
    │    └ <function subprocess_started at 0x000001CF0B07D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001CF08C6F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001CF0B05A170>
           │       │   └ <uvicorn.server.Server object at 0x000001CF08C6F7C0>
           │       └ <function run at 0x000001CF08DA2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001CF0B0FEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001CF0A959E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001CF0A959D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CF0A95B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CF0A8AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CF08D58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CF26...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001CF0B76EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CF08D58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CF26...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CF26...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CF2639BF70>
          └ <fastapi.applications.FastAPI object at 0x000001CF0B76EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CF26343BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CF2639BF70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CF26343BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001CF0B763F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001CF2639BE20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CF263ACA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001CF0B7CA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001CF263ACA60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CF2639BEE0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CF263ACA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001CF26343F40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CF2639BD90>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CF2639BEE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CF2639BC70>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CF2639BD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001CF262C2B00>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CF2639BC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001CF0B71D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001CF26341BD0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001CF263ACD60>
                     └ <function get_request_handler.<locals>.app at 0x000001CF26341B40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001CF0B71C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001CF263AD3C0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001CF0D3EA290>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001CF26384FD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001CF263AD3C0>
                │       └ <function create_transacao at 0x000001CF0D3E9EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 28, in create_transacao
    _trasacao = Transacao(
                └ <class 'src.core.models.Transacao'>

TypeError: __init__() missing 1 required positional argument: 'patrimonio_id'
ERROR    2023-03-26 17:40:54.551 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 344
               │     └ 3
               └ <function _main at 0x000001CF08DA13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 344
           │    └ <function BaseProcess._bootstrap at 0x000001CF08CFF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001CF08CFE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001CF08C6FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>
    │    └ <function subprocess_started at 0x000001CF0B07D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=16296 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001CF08C6F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001CF0B05A170>
           │       │   └ <uvicorn.server.Server object at 0x000001CF08C6F7C0>
           │       └ <function run at 0x000001CF08DA2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001CF0B0FEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001CF0A959E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001CF0A959D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CF0A95B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CF0A8AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CF08D58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CF26...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001CF0B76EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001CF08D58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CF26...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001CF26...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CF2639BF70>
          └ <fastapi.applications.FastAPI object at 0x000001CF0B76EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CF26343BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001CF2639BF70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001CF26343BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001CF0B763F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001CF2639BE20>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001CF2639BF40...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CF263ACA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001CF0B7CA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001CF263ACA60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CF2639BEE0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001CF263ACA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001CF26343F40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CF2639BD90>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001CF2639BEE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CF2639BC70>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001CF2639BD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001CF262C2B00>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001CF2639BC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001CF0B71D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001CF263C0040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001C...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001CF26341BD0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001CF263ACD60>
                     └ <function get_request_handler.<locals>.app at 0x000001CF26341B40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001CF0B71C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001CF263AD3C0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001CF0D3EA290>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001CF26384FD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001CF263AD3C0>
                │       └ <function create_transacao at 0x000001CF0D3E9EA0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 28, in create_transacao
    _trasacao = Transacao(
                └ <class 'src.core.models.Transacao'>

TypeError: __init__() missing 1 required positional argument: 'patrimonio_id'
INFO     2023-03-26 17:41:17.381 request id: app - uvicorn.server:serve - Started server process [4164]
INFO     2023-03-26 17:41:17.381 request id: app - uvicorn.server:serve - Started server process [4164]
INFO     2023-03-26 17:41:17.382 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:41:17.382 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:41:17.382 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:41:17.383 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:41:28.825 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58194 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:42:59.320 request id: app - uvicorn.server:serve - Started server process [15680]
INFO     2023-03-26 17:42:59.320 request id: app - uvicorn.server:serve - Started server process [15680]
INFO     2023-03-26 17:42:59.320 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:42:59.321 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:42:59.321 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:42:59.321 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:43:19.159 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58210 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:43:19.160 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000012E8C0813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000012E8BFDF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000012E8BFDE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000012E8BF4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>
    │    └ <function subprocess_started at 0x0000012E8E2FD6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000012E8BF4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000012E8E2DA170>
           │       │   └ <uvicorn.server.Server object at 0x0000012E8BF4F7C0>
           │       └ <function run at 0x0000012E8C082560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000012E8E37EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000012E8DC09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000012E8DC09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000012E8DC0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000012E8DB6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000012E8C038610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012EA9...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000012E8E9EEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000012E8C038610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012EA9...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012EA9...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000012EA95CBA60>
          └ <fastapi.applications.FastAPI object at 0x0000012E8E9EEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000012EA9573BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000012EA95CBA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000012EA9573BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000012E8E9E3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000012EA95CB940>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000012EA95E8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000012E8EA4A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000012EA95E8640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000012EA95CB8E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000012EA95E8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000012EA9573F40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000012EA95CB8B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000012EA95CB8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000012EA95CB850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000012EA95CB8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000012EA94EE6E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000012EA95CB850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000012E8E99D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000012EA9571BD0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000012EA95E8940>
                     └ <function get_request_handler.<locals>.app at 0x0000012EA9571B40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000012E8E99C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000012E9066A320>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000012EA95B4BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>
                │       └ <function create_transacao at 0x0000012E90669F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in create_transacao
    db.refresh(_patrimonio)
    │  │       └ <src.core.models.Patrimonio object at 0x0000012EA963A230>
    │  └ <function Session.refresh at 0x0000012E8FCD95A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x0000012E8FFC35E0>
    │    └ <function Session._expire_state at 0x0000012E8FCD97E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x0000012E8FFC35E0>
    │    └ <function Session._validate_persistent at 0x0000012E8FCDA0E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x12ea963a230>' is not persistent within this Session
ERROR    2023-03-26 17:43:19.182 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000012E8C0813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000012E8BFDF1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000012E8BFDE830>
    └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000012E8BF4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>
    │    └ <function subprocess_started at 0x0000012E8E2FD6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=16296 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000012E8BF4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000012E8E2DA170>
           │       │   └ <uvicorn.server.Server object at 0x0000012E8BF4F7C0>
           │       └ <function run at 0x0000012E8C082560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000012E8E37EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000012E8DC09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000012E8DC09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000012E8DC0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000012E8DB6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000012E8C038610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012EA9...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000012E8E9EEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000012E8C038610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012EA9...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012EA9...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000012EA95CBA60>
          └ <fastapi.applications.FastAPI object at 0x0000012E8E9EEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000012EA9573BE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000012EA95CBA60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000012EA9573BE0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000012E8E9E3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000012EA95CB940>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000012EA95CBA30...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000012EA95E8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000012E8EA4A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000012EA95E8640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000012EA95CB8E0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000012EA95E8640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000012EA9573F40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000012EA95CB8B0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000012EA95CB8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000012EA95CB850>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000012EA95CB8B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000012EA94EE6E0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000012EA95CB850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000012E8E99D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000012EA95F4040>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000012...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000012EA9571BD0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000012EA95E8940>
                     └ <function get_request_handler.<locals>.app at 0x0000012EA9571B40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000012E8E99C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000012E9066A320>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000012EA95B4BB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>
                │       └ <function create_transacao at 0x0000012E90669F30>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in create_transacao
    db.refresh(_patrimonio)
    │  │       └ <src.core.models.Patrimonio object at 0x0000012EA963A230>
    │  └ <function Session.refresh at 0x0000012E8FCD95A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x0000012E8FFC35E0>
    │    └ <function Session._expire_state at 0x0000012E8FCD97E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x0000012E8FFC35E0>
    │    └ <function Session._validate_persistent at 0x0000012E8FCDA0E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000012EA95E8FA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x12ea963a230>' is not persistent within this Session
INFO     2023-03-26 17:43:39.760 request id: app - uvicorn.server:serve - Started server process [9552]
INFO     2023-03-26 17:43:39.760 request id: app - uvicorn.server:serve - Started server process [9552]
INFO     2023-03-26 17:43:39.761 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:43:39.761 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:43:39.761 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:43:39.762 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:43:55.507 request id: app - uvicorn.server:serve - Started server process [6744]
INFO     2023-03-26 17:43:55.507 request id: app - uvicorn.server:serve - Started server process [6744]
INFO     2023-03-26 17:43:55.508 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:43:55.508 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:43:55.509 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:43:55.510 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:46:05.451 request id: app - uvicorn.server:serve - Started server process [2576]
INFO     2023-03-26 17:46:05.452 request id: app - uvicorn.server:serve - Started server process [2576]
INFO     2023-03-26 17:46:05.453 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:46:05.453 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:46:05.454 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:46:05.454 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:46:07.890 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58310 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 17:46:07.891 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 632
               │     └ 3
               └ <function _main at 0x000001A0B5967760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 632
           │    └ <function BaseProcess._bootstrap at 0x000001A0B58BAE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A0B58BA4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A0B5971E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>
    │    └ <function subprocess_started at 0x000001A0B5A1F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=1004, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A0B5971F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=1004, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A0B59FFEB0>
           │       │   └ <uvicorn.server.Server object at 0x000001A0B5971F00>
           │       └ <function run at 0x000001A0B419F010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A0B5AA6FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A0B41B0A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A0B41B09D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A0B41B24D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A0B4201B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A0B5BA0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A0D1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A0B608EB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A0B5BA0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A0D1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A0D1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A0D1272650>
          └ <fastapi.applications.FastAPI object at 0x000001A0B608EB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A0D127A0E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A0D1272650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A0D127A0E0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A0B60964D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A0D1272530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A0D12731C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A0B6096E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A0D12731C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A0D12724D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A0D12731C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A0D127A7A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A0D12724A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A0D12724D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A0D1272440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A0D12724A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A0D1180F40>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A0D1272440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A0B6057010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A0D12541F0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A0D12734C0>
                     └ <function get_request_handler.<locals>.app at 0x000001A0D1254160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A0B6055870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001A0B83FD990>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A0D1233730>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>
                │       └ <function create_transacao at 0x000001A0B83FD630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in create_transacao
    db.flush(_patrimonio)
    │  │     └ <src.core.models.Patrimonio object at 0x000001A0D142D120>
    │  └ <function Session.flush at 0x000001A0B7B288B0>
    └ <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ <src.core.models.Patrimonio object at 0x000001A0D142D120>
    │    └ <function Session._flush at 0x000001A0B7B28A60>
    └ <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4198, in _flush
    for o in objects:
             └ <src.core.models.Patrimonio object at 0x000001A0D142D120>

TypeError: 'Patrimonio' object is not iterable
ERROR    2023-03-26 17:46:07.941 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 632
               │     └ 3
               └ <function _main at 0x000001A0B5967760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 632
           │    └ <function BaseProcess._bootstrap at 0x000001A0B58BAE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A0B58BA4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A0B5971E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>
    │    └ <function subprocess_started at 0x000001A0B5A1F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=14984 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=1004, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A0B5971F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=1004, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A0B59FFEB0>
           │       │   └ <uvicorn.server.Server object at 0x000001A0B5971F00>
           │       └ <function run at 0x000001A0B419F010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A0B5AA6FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A0B41B0A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A0B41B09D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A0B41B24D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A0B4201B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A0B5BA0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A0D1...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A0B608EB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A0B5BA0A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A0D1...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A0D1...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A0D1272650>
          └ <fastapi.applications.FastAPI object at 0x000001A0B608EB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A0D127A0E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A0D1272650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A0D127A0E0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A0B60964D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A0D1272530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A0D1272620...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A0D12731C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A0B6096E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A0D12731C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A0D12724D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A0D12731C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A0D127A7A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A0D12724A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A0D12724D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A0D1272440>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A0D12724A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A0D1180F40>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A0D1272440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A0B6057010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A0D127A710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A0D12541F0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A0D12734C0>
                     └ <function get_request_handler.<locals>.app at 0x000001A0D1254160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A0B6055870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001A0B83FD990>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A0D1233730>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>
                │       └ <function create_transacao at 0x000001A0B83FD630>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 61, in create_transacao
    db.flush(_patrimonio)
    │  │     └ <src.core.models.Patrimonio object at 0x000001A0D142D120>
    │  └ <function Session.flush at 0x000001A0B7B288B0>
    └ <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ <src.core.models.Patrimonio object at 0x000001A0D142D120>
    │    └ <function Session._flush at 0x000001A0B7B28A60>
    └ <sqlalchemy.orm.session.Session object at 0x000001A0D1273A90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4198, in _flush
    for o in objects:
             └ <src.core.models.Patrimonio object at 0x000001A0D142D120>

TypeError: 'Patrimonio' object is not iterable
INFO     2023-03-26 17:47:03.847 request id: app - uvicorn.server:serve - Started server process [7900]
INFO     2023-03-26 17:47:03.847 request id: app - uvicorn.server:serve - Started server process [7900]
INFO     2023-03-26 17:47:03.848 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:47:03.848 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:47:03.849 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:47:03.850 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:47:37.259 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58353 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:47:49.772 request id: app - uvicorn.server:serve - Started server process [3272]
INFO     2023-03-26 17:47:49.772 request id: app - uvicorn.server:serve - Started server process [3272]
INFO     2023-03-26 17:47:49.773 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:47:49.773 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 17:47:49.773 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:47:49.774 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 17:48:25.617 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58365 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 17:50:24.968 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58399 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:10:16.365 request id: app - uvicorn.server:serve - Started server process [2820]
INFO     2023-03-26 18:10:16.366 request id: app - uvicorn.server:serve - Started server process [2820]
INFO     2023-03-26 18:10:16.366 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:10:16.366 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:10:16.367 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:10:16.367 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:12:05.731 request id: app - uvicorn.server:serve - Started server process [10076]
INFO     2023-03-26 18:12:05.731 request id: app - uvicorn.server:serve - Started server process [10076]
INFO     2023-03-26 18:12:05.732 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:12:05.732 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:12:05.732 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:12:05.733 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:15:33.529 request id: app - uvicorn.server:serve - Started server process [14680]
INFO     2023-03-26 18:15:33.530 request id: app - uvicorn.server:serve - Started server process [14680]
INFO     2023-03-26 18:15:33.530 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:15:33.530 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:15:33.531 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:15:33.531 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:15:56.207 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58622 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 18:15:56.208 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\clsregistry.py", line 532, in __call__
    x = eval(self.arg, globals(), self._dict)
             │    │               │    └ <member '_dict' of '_class_resolver' objects>
             │    │               └ <sqlalchemy.orm.clsregistry._class_resolver object at 0x000001EB7538EB00>
             │    └ <member 'arg' of '_class_resolver' objects>
             └ <sqlalchemy.orm.clsregistry._class_resolver object at 0x000001EB7538EB00>

  File "<string>", line 1, in <module>

NameError: name 'transacao_patrimonio' is not defined


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 340
               │     └ 3
               └ <function _main at 0x000001EB57DD13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 340
           │    └ <function BaseProcess._bootstrap at 0x000001EB57D2F1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=332 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001EB57D2E830>
    └ <SpawnProcess name='SpawnProcess-3' parent=332 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001EB57C9FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=332 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=332 started>
    │    └ <function subprocess_started at 0x000001EB5A09D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=332 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001EB57C9F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001EB5A07A170>
           │       │   └ <uvicorn.server.Server object at 0x000001EB57C9F7C0>
           │       └ <function run at 0x000001EB57DD2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001EB5A11EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001EB59979E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001EB59979D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001EB5997B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001EB598CADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001EB57D88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001EB75...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001EB5A78EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001EB57D88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001EB75...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001EB75...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001EB75340490>
          └ <fastapi.applications.FastAPI object at 0x000001EB5A78EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001EB753540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001EB75340490>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001EB753540D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001EB5A783F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001EB75340370>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001EB75341030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001EB5A7EA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001EB75341030>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001EB75340310>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001EB75341030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001EB75354430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001EB753402E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001EB75340310>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001EB75340280>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001EB753402E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001EB7523F0D0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001EB75340280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001EB5A73D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001EB752DE050>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001EB75341330>
                     └ <function get_request_handler.<locals>.app at 0x000001EB752DDFC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001EB5A73C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001EB75341990>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001EB5C40E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001EB753155A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001EB75341990>
                │       └ <function create_transacao at 0x000001EB5C40E3B0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 28, in create_transacao
    _trasacao = Transacao(
                └ <class 'src.core.models.Transacao'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {}
    │       │        │    │     └ ('Ações', 'ITSA4', 'Compra', 'Rico', datetime.date(2023, 3, 26), 10, 8.5, 3)
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000001EB752A26E0>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001EB5BD064D0>
    └ <ClassManager of <class 'src.core.models.Transacao'> at 1eb5bd74f90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000001EB752A26E0>, ('Ações', 'ITSA4', 'Compra', 'Rico', datetime.date(2023, ...
    └ <function _event_on_init at 0x000001EB5B9C6CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x000001EB5B9B7250>
    └ <Mapper at 0x1eb5bd48670; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001EB5A93B460>
    │                      └ <Mapper at 0x1eb5bd48670; Transacao>
    └ <function _configure_registries at 0x000001EB5B9C6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001EB5B9C6A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001EB5B9B7130>
    └ <Mapper at 0x1eb5bd48670; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001EB5B8B4B80>
    └ <Relationship at 0x1eb5bbae660; pratrimonios>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001EB5B992680>
    └ <Relationship at 0x1eb5bbae660; pratrimonios>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1631, in do_init
    self._process_dependent_arguments()
    │    └ <function RelationshipProperty._process_dependent_arguments at 0x000001EB5B9927A0>
    └ <Relationship at 0x1eb5bbae660; pratrimonios>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1673, in _process_dependent_arguments
    rel_arg._resolve_against_registry(self._clsregistry_resolvers[1])
    │       │                         │    └ (<function _resolver.<locals>.resolve_name at 0x000001EB753C0C10>, <function _resolver.<locals>.resolve_arg at 0x000001EB753A...
    │       │                         └ <Relationship at 0x1eb5bbae660; pratrimonios>
    │       └ <function _RelationshipArg._resolve_against_registry at 0x000001EB5B990CA0>
    └ _RelationshipArg(name='secondary', argument='transacao_patrimonio', resolved=None)

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 261, in _resolve_against_registry
    self.resolved = clsregistry_resolver(
    │    │          └ <function _resolver.<locals>.resolve_arg at 0x000001EB753A3400>
    │    └ <member 'resolved' of '_RelationshipArg' objects>
    └ _RelationshipArg(name='secondary', argument='transacao_patrimonio', resolved=None)

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\clsregistry.py", line 539, in __call__
    self._raise_for_name(n.args[0], n)
    │    └ <function _class_resolver._raise_for_name at 0x000001EB5BA69630>
    └ <sqlalchemy.orm.clsregistry._class_resolver object at 0x000001EB7538EB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\clsregistry.py", line 500, in _raise_for_name
    raise exc.InvalidRequestError(
          │   └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Transacao(transacoes)], expression 'transacao_patrimonio' failed to locate a name ("name 'transacao_patrimonio' is not defined"). If this is a class name, consider adding this relationship() to the <class 'src.core.models.Transacao'> class after both dependent classes have been defined.
ERROR    2023-03-26 18:15:56.232 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\clsregistry.py", line 532, in __call__
    x = eval(self.arg, globals(), self._dict)
             │    │               │    └ <member '_dict' of '_class_resolver' objects>
             │    │               └ <sqlalchemy.orm.clsregistry._class_resolver object at 0x000001EB7538EB00>
             │    └ <member 'arg' of '_class_resolver' objects>
             └ <sqlalchemy.orm.clsregistry._class_resolver object at 0x000001EB7538EB00>

  File "<string>", line 1, in <module>

NameError: name 'transacao_patrimonio' is not defined


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 340
               │     └ 3
               └ <function _main at 0x000001EB57DD13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 340
           │    └ <function BaseProcess._bootstrap at 0x000001EB57D2F1C0>
           └ <SpawnProcess name='SpawnProcess-3' parent=332 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001EB57D2E830>
    └ <SpawnProcess name='SpawnProcess-3' parent=332 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001EB57C9FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=332 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=332 started>
    │    └ <function subprocess_started at 0x000001EB5A09D6C0>
    └ <SpawnProcess name='SpawnProcess-3' parent=332 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001EB57C9F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001EB5A07A170>
           │       │   └ <uvicorn.server.Server object at 0x000001EB57C9F7C0>
           │       └ <function run at 0x000001EB57DD2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001EB5A11EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001EB59979E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001EB59979D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001EB5997B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001EB598CADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001EB57D88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001EB75...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001EB5A78EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001EB57D88610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001EB75...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001EB75...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001EB75340490>
          └ <fastapi.applications.FastAPI object at 0x000001EB5A78EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001EB753540D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001EB75340490>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001EB753540D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001EB5A783F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001EB75340370>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001EB75340460...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001EB75341030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001EB5A7EA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001EB75341030>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001EB75340310>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001EB75341030>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001EB75354430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001EB753402E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001EB75340310>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001EB75340280>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001EB753402E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001EB7523F0D0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001EB75340280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001EB5A73D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001EB753544C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001EB752DE050>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001EB75341330>
                     └ <function get_request_handler.<locals>.app at 0x000001EB752DDFC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001EB5A73C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001EB75341990>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001EB5C40E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001EB753155A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001EB75341990>
                │       └ <function create_transacao at 0x000001EB5C40E3B0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 28, in create_transacao
    _trasacao = Transacao(
                └ <class 'src.core.models.Transacao'>

  File "<string>", line 4, in __init__

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state.py", line 570, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {}
    │       │        │    │     └ ('Ações', 'ITSA4', 'Compra', 'Rico', datetime.date(2023, 3, 26), 10, 8.5, 3)
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0x000001EB752A26E0>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0x000001EB5BD064D0>
    └ <ClassManager of <class 'src.core.models.Transacao'> at 1eb5bd74f90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\event\attr.py", line 487, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0x000001EB752A26E0>, ('Ações', 'ITSA4', 'Compra', 'Rico', datetime.date(2023, ...
    └ <function _event_on_init at 0x000001EB5B9C6CB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4378, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0x000001EB5B9B7250>
    └ <Mapper at 0x1eb5bd48670; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2374, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x000001EB5A93B460>
    │                      └ <Mapper at 0x1eb5bd48670; Transacao>
    └ <function _configure_registries at 0x000001EB5B9C6950>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4186, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x000001EB5B9C6A70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 4228, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x000001EB5B9B7130>
    └ <Mapper at 0x1eb5bd48670; Transacao>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\mapper.py", line 2391, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x000001EB5B8B4B80>
    └ <Relationship at 0x1eb5bbae660; pratrimonios>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\interfaces.py", line 544, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x000001EB5B992680>
    └ <Relationship at 0x1eb5bbae660; pratrimonios>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1631, in do_init
    self._process_dependent_arguments()
    │    └ <function RelationshipProperty._process_dependent_arguments at 0x000001EB5B9927A0>
    └ <Relationship at 0x1eb5bbae660; pratrimonios>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 1673, in _process_dependent_arguments
    rel_arg._resolve_against_registry(self._clsregistry_resolvers[1])
    │       │                         │    └ (<function _resolver.<locals>.resolve_name at 0x000001EB753C0C10>, <function _resolver.<locals>.resolve_arg at 0x000001EB753A...
    │       │                         └ <Relationship at 0x1eb5bbae660; pratrimonios>
    │       └ <function _RelationshipArg._resolve_against_registry at 0x000001EB5B990CA0>
    └ _RelationshipArg(name='secondary', argument='transacao_patrimonio', resolved=None)

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\relationships.py", line 261, in _resolve_against_registry
    self.resolved = clsregistry_resolver(
    │    │          └ <function _resolver.<locals>.resolve_arg at 0x000001EB753A3400>
    │    └ <member 'resolved' of '_RelationshipArg' objects>
    └ _RelationshipArg(name='secondary', argument='transacao_patrimonio', resolved=None)

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\clsregistry.py", line 539, in __call__
    self._raise_for_name(n.args[0], n)
    │    └ <function _class_resolver._raise_for_name at 0x000001EB5BA69630>
    └ <sqlalchemy.orm.clsregistry._class_resolver object at 0x000001EB7538EB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\clsregistry.py", line 500, in _raise_for_name
    raise exc.InvalidRequestError(
          │   └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Transacao(transacoes)], expression 'transacao_patrimonio' failed to locate a name ("name 'transacao_patrimonio' is not defined"). If this is a class name, consider adding this relationship() to the <class 'src.core.models.Transacao'> class after both dependent classes have been defined.
INFO     2023-03-26 18:21:56.817 request id: app - uvicorn.server:serve - Started server process [13000]
INFO     2023-03-26 18:21:56.817 request id: app - uvicorn.server:serve - Started server process [13000]
INFO     2023-03-26 18:21:56.817 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:21:56.818 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:21:56.818 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:21:56.818 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:22:29.502 request id: app - uvicorn.server:serve - Started server process [16344]
INFO     2023-03-26 18:22:29.502 request id: app - uvicorn.server:serve - Started server process [16344]
INFO     2023-03-26 18:22:29.503 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:22:29.503 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:22:29.503 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:22:29.504 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:22:36.162 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58746 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 18:22:36.162 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000111C439E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000111C46DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'PATRIMONIO_ID': 1}
    │      │       └ 'INSERT INTO patrimonio_transacao ("PATRIMONIO_ID") VALUES (%(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000111DE056420; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, null, 1).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x00000111C09E13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x00000111C093F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000111C093E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000111C08AFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>
    │    └ <function subprocess_started at 0x00000111C2C6D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000111C08AF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000111C2C4A170>
           │       │   └ <uvicorn.server.Server object at 0x00000111C08AF7C0>
           │       └ <function run at 0x00000111C09E2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000111C2CEEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000111C2569E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000111C2569D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000111C256B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000111C24CADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000111C0998610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000111DD...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000111C335EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000111C0998610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000111DD...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000111DD...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000111DDF55D20>
          └ <fastapi.applications.FastAPI object at 0x00000111C335EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000111DDF50E50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000111DDF55D20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000111DDF50E50>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000111C3353F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000111DDF55C00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000111DDF568C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000111C33BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000111DDF568C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000111DDF55BA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000111DDF568C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000111DDF511B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000111DDF55B70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000111DDF55BA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000111DDF55B10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000111DDF55B70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000111DDDDB1C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000111DDF55B10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000111C330D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000111DDEFEDD0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000111DDF56BC0>
                     └ <function get_request_handler.<locals>.app at 0x00000111DDEFED40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000111C330C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000111C4FDE710>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000111DDF2AE30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>
                │       └ <function create_transacao at 0x00000111C4FDE320>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 70, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x00000111C4648A60>
    └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x00000111C4637C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>
                └ <function SessionTransaction.commit at 0x00000111C4637BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x00000111C4637B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>
                └ <function SessionTransaction._prepare_impl at 0x00000111C4637A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x00000111C464A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x00000111C464A830>
    └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000111DE070800>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000111C4634AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000111DDF9F8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000111DDF9F8E0>
    │   └ <function SaveUpdateAll.execute at 0x00000111C46353F0>
    └ SaveUpdateAll(Mapper[PatrimonioTransacao(patrimonio_transacao)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x00000111C45D2C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x00000111C461C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x00000111C430F0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x00000111DE01DBA0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000111C430F370>
           └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000111C430F520>
          └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000111C430F5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000111C430F7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "id" of relation "patrimonio_transacao" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "id" of relation "patrimonio_transacao" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000111C439E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000111C46DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'PATRIMONIO_ID': 1}
    │      │       └ 'INSERT INTO patrimonio_transacao ("PATRIMONIO_ID") VALUES (%(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000111DE056420; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, null, 1).

[SQL: INSERT INTO patrimonio_transacao ("PATRIMONIO_ID") VALUES (%(PATRIMONIO_ID)s)]
[parameters: {'PATRIMONIO_ID': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2023-03-26 18:22:36.189 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000111C439E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000111C46DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'PATRIMONIO_ID': 1}
    │      │       └ 'INSERT INTO patrimonio_transacao ("PATRIMONIO_ID") VALUES (%(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000111DE056420; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, null, 1).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 328
               │     └ 3
               └ <function _main at 0x00000111C09E13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 328
           │    └ <function BaseProcess._bootstrap at 0x00000111C093F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000111C093E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000111C08AFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>
    │    └ <function subprocess_started at 0x00000111C2C6D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=10680 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000111C08AF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=780, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000111C2C4A170>
           │       │   └ <uvicorn.server.Server object at 0x00000111C08AF7C0>
           │       └ <function run at 0x00000111C09E2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000111C2CEEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000111C2569E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000111C2569D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000111C256B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000111C24CADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000111C0998610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000111DD...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000111C335EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000111C0998610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000111DD...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000111DD...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000111DDF55D20>
          └ <fastapi.applications.FastAPI object at 0x00000111C335EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000111DDF50E50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000111DDF55D20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000111DDF50E50>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000111C3353F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000111DDF55C00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x00000111DDF55CF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000111DDF568C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000111C33BA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000111DDF568C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000111DDF55BA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000111DDF568C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000111DDF511B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000111DDF55B70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000111DDF55BA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000111DDF55B10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000111DDF55B70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000111DDDDB1C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000111DDF55B10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000111C330D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000111DDF51240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000011...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000111DDEFEDD0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000111DDF56BC0>
                     └ <function get_request_handler.<locals>.app at 0x00000111DDEFED40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000111C330C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x00000111C4FDE710>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000111DDF2AE30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>
                │       └ <function create_transacao at 0x00000111C4FDE320>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 70, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x00000111C4648A60>
    └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x00000111C4637C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>
                └ <function SessionTransaction.commit at 0x00000111C4637BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x00000111C4637B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>
                └ <function SessionTransaction._prepare_impl at 0x00000111C4637A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x00000111C464A680>
    │    └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x00000111DDF5CB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x00000111C464A830>
    └ <sqlalchemy.orm.session.Session object at 0x00000111DDF57220>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x00000111DE070800>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x00000111C4634AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000111DDF9F8E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x00000111DDF9F8E0>
    │   └ <function SaveUpdateAll.execute at 0x00000111C46353F0>
    └ SaveUpdateAll(Mapper[PatrimonioTransacao(patrimonio_transacao)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x00000111C45D2C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x00000111C461C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x00000111C430F0A0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x00000111DE01DBA0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000111C430F370>
           └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000111C430F520>
          └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000111C430F5B0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000111C430F7F0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "id" of relation "patrimonio_transacao" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "id" of relation "patrimonio_transacao" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000111C439E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x00000111C46DB8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000111DE01D660>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'PATRIMONIO_ID': 1}
    │      │       └ 'INSERT INTO patrimonio_transacao ("PATRIMONIO_ID") VALUES (%(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x00000111DE056420; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, null, 1).

[SQL: INSERT INTO patrimonio_transacao ("PATRIMONIO_ID") VALUES (%(PATRIMONIO_ID)s)]
[parameters: {'PATRIMONIO_ID': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2023-03-26 18:23:04.057 request id: app - uvicorn.server:serve - Started server process [372]
INFO     2023-03-26 18:23:04.058 request id: app - uvicorn.server:serve - Started server process [372]
INFO     2023-03-26 18:23:04.058 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:04.059 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:04.059 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:04.060 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:24.031 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 18:23:24.032 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 18:23:24.033 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:24.033 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:24.034 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:24.035 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:35.781 request id: app - uvicorn.server:serve - Started server process [13872]
INFO     2023-03-26 18:23:35.782 request id: app - uvicorn.server:serve - Started server process [13872]
INFO     2023-03-26 18:23:35.782 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:35.783 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:35.784 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:35.784 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:51.907 request id: app - uvicorn.server:serve - Started server process [13724]
INFO     2023-03-26 18:23:51.907 request id: app - uvicorn.server:serve - Started server process [13724]
INFO     2023-03-26 18:23:51.907 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:51.908 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:23:51.908 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:51.908 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:23:54.949 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58777 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 18:23:54.950 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F39C71E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F39CA5B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TRANSACAO_ID': 1, 'PATRIMONIO_ID': 2}
    │      │       └ 'INSERT INTO patrimonio_transacao ("TRANSACAO_ID", "PATRIMONIO_ID") VALUES (%(TRANSACAO_ID)s, %(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F3B642C820; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, 1, 2).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001F398D813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001F398CDF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F398CDE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F398C4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>
    │    └ <function subprocess_started at 0x000001F39AFED6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F398C4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001F39AFCA170>
           │       │   └ <uvicorn.server.Server object at 0x000001F398C4F7C0>
           │       └ <function run at 0x000001F398D82560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F39B06EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F39A909E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F39A909D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F39A90B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F39A86ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F398D38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F3B6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F39B6DEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F398D38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F3B6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F3B6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F3B6334130>
          └ <fastapi.applications.FastAPI object at 0x000001F39B6DEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F3B63440D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F3B6334130>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F3B63440D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001F39B6D3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001F3B6327FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F3B6334CD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001F39B73A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001F3B6334CD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F3B6327F70>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F3B6334CD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001F3B6344430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F3B6327F40>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F3B6327F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F3B6327EE0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F3B6327F40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001F3B6242D70>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F3B6327EE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001F39B68D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001F3B62D2050>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F3B6334FD0>
                     └ <function get_request_handler.<locals>.app at 0x000001F3B62D1FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F39B68C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001F39D35E710>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F3B6305240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>
                │       └ <function create_transacao at 0x000001F39D35E320>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 70, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x000001F39C9C8A60>
    └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001F39C9B7C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>
                └ <function SessionTransaction.commit at 0x000001F39C9B7BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001F39C9B7B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>
                └ <function SessionTransaction._prepare_impl at 0x000001F39C9B7A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001F39C9CA680>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001F39C9CA830>
    └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001F3B644D040>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001F39C9B4AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F3B63CFEE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F3B63CFEE0>
    │   └ <function SaveUpdateAll.execute at 0x000001F39C9B53F0>
    └ SaveUpdateAll(Mapper[PatrimonioTransacao(patrimonio_transacao)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001F39C952C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001F39C99C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001F39C68F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001F3B64181F0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001F39C68F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001F39C68F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001F39C68F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001F39C68F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "id" of relation "patrimonio_transacao" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "id" of relation "patrimonio_transacao" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F39C71E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F39CA5B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TRANSACAO_ID': 1, 'PATRIMONIO_ID': 2}
    │      │       └ 'INSERT INTO patrimonio_transacao ("TRANSACAO_ID", "PATRIMONIO_ID") VALUES (%(TRANSACAO_ID)s, %(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F3B642C820; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, 1, 2).

[SQL: INSERT INTO patrimonio_transacao ("TRANSACAO_ID", "PATRIMONIO_ID") VALUES (%(TRANSACAO_ID)s, %(PATRIMONIO_ID)s)]
[parameters: {'TRANSACAO_ID': 1, 'PATRIMONIO_ID': 2}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR    2023-03-26 18:23:54.979 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F39C71E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F39CA5B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TRANSACAO_ID': 1, 'PATRIMONIO_ID': 2}
    │      │       └ 'INSERT INTO patrimonio_transacao ("TRANSACAO_ID", "PATRIMONIO_ID") VALUES (%(TRANSACAO_ID)s, %(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F3B642C820; closed: -1>

psycopg2.errors.NotNullViolation: null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, 1, 2).



The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001F398D813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001F398CDF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F398CDE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F398C4FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>
    │    └ <function subprocess_started at 0x000001F39AFED6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=8488 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F398C4F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001F39AFCA170>
           │       │   └ <uvicorn.server.Server object at 0x000001F398C4F7C0>
           │       └ <function run at 0x000001F398D82560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F39B06EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F39A909E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F39A909D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F39A90B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F39A86ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F398D38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F3B6...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F39B6DEB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F398D38610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F3B6...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F3B6...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F3B6334130>
          └ <fastapi.applications.FastAPI object at 0x000001F39B6DEB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F3B63440D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F3B6334130>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F3B63440D0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001F39B6D3F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001F3B6327FD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F3B6334100...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F3B6334CD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001F39B73A200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001F3B6334CD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F3B6327F70>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F3B6334CD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001F3B6344430>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F3B6327F40>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F3B6327F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F3B6327EE0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F3B6327F40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001F3B6242D70>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F3B6327EE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001F39B68D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F3B63444C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001F3B62D2050>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F3B6334FD0>
                     └ <function get_request_handler.<locals>.app at 0x000001F3B62D1FC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F39B68C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x000001F39D35E710>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F3B6305240>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Compra', corretora='Rico', data=datetime.date(2023, 3,...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>
                │       └ <function create_transacao at 0x000001F39D35E320>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 70, in create_transacao
    db.commit()
    │  └ <function Session.commit at 0x000001F39C9C8A60>
    └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1903, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0x000001F39C9B7C70>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>

  File "<string>", line 2, in commit

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>
                └ <function SessionTransaction.commit at 0x000001F39C9B7BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1218, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000001F39C9B7B50>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>

  File "<string>", line 2, in _prepare_impl

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>
                └ <function SessionTransaction._prepare_impl at 0x000001F39C9B7A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1193, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0x000001F39C9CA680>
    │    └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000001F3B6293740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001F39C9CA830>
    └ <sqlalchemy.orm.session.Session object at 0x000001F3B6335630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001F3B644D040>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001F39C9B4AF0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F3B63CFEE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F3B63CFEE0>
    │   └ <function SaveUpdateAll.execute at 0x000001F39C9B53F0>
    └ SaveUpdateAll(Mapper[PatrimonioTransacao(patrimonio_transacao)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001F39C952C20>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001F39C99C280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001F39C68F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001F3B64181F0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001F39C68F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001F39C68F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001F39C68F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001F39C68F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ NotNullViolation('null value in column "id" of relation "patrimonio_transacao" violates not-null constraint\nDETAIL:  Failing...
          │                    │              └ (<class 'psycopg2.errors.NotNullViolation'>, NotNullViolation('null value in column "id" of relation "patrimonio_transacao" v...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F39C71E7A0>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F39CA5B8B0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F3B63CFA90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'TRANSACAO_ID': 1, 'PATRIMONIO_ID': 2}
    │      │       └ 'INSERT INTO patrimonio_transacao ("TRANSACAO_ID", "PATRIMONIO_ID") VALUES (%(TRANSACAO_ID)s, %(PATRIMONIO_ID)s)'
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F3B642C820; closed: -1>

sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "patrimonio_transacao" violates not-null constraint
DETAIL:  Failing row contains (null, 1, 2).

[SQL: INSERT INTO patrimonio_transacao ("TRANSACAO_ID", "PATRIMONIO_ID") VALUES (%(TRANSACAO_ID)s, %(PATRIMONIO_ID)s)]
[parameters: {'TRANSACAO_ID': 1, 'PATRIMONIO_ID': 2}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO     2023-03-26 18:25:08.608 request id: app - uvicorn.server:serve - Started server process [1200]
INFO     2023-03-26 18:25:08.609 request id: app - uvicorn.server:serve - Started server process [1200]
INFO     2023-03-26 18:25:08.609 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:25:08.609 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:25:08.610 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:25:08.610 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:25:40.083 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58804 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:27:21.137 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58829 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:27:25.918 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58829 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:36:59.595 request id: app - uvicorn.server:serve - Started server process [2912]
INFO     2023-03-26 18:36:59.595 request id: app - uvicorn.server:serve - Started server process [2912]
INFO     2023-03-26 18:36:59.595 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:36:59.596 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:36:59.596 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:36:59.596 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:38:04.832 request id: app - uvicorn.server:serve - Started server process [1932]
INFO     2023-03-26 18:38:04.832 request id: app - uvicorn.server:serve - Started server process [1932]
INFO     2023-03-26 18:38:04.833 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:38:04.833 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:38:04.834 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:38:04.835 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:39:13.414 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:58933 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 18:39:13.415 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 892
               │     └ 3
               └ <function _main at 0x0000027DC95D7760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 892
           │    └ <function BaseProcess._bootstrap at 0x0000027DC952AE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000027DC952A4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000027DC95E1E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>
    │    └ <function subprocess_started at 0x0000027DC968F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=816, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000027DC95E1F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=816, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000027DC966FEB0>
           │       │   └ <uvicorn.server.Server object at 0x0000027DC95E1F00>
           │       └ <function run at 0x0000027DC7E0F010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000027DC9716FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027DC7E20A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027DC7E209D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000027DC7E224D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000027DC7E71B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027DC9810A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027DE4...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027DC9CFEB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027DC9810A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027DE4...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027DE4...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027DE4F2AC50>
          └ <fastapi.applications.FastAPI object at 0x0000027DC9CFEB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027DE4F52710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027DE4F2AC50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027DE4F52710>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000027DC9D064D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000027DE4F2AB00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000027DE4F2B7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000027DC9D06E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000027DE4F2B7F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000027DE4F2AAD0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000027DE4F2B7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000027DE4F52DD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027DE4F2AA10>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000027DE4F2AAD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027DE4F2A9B0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027DE4F2AA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000027DE4BD9570>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027DE4F2A9B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000027DC9CC7010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000027DE4F00790>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000027DE4F2BAF0>
                     └ <function get_request_handler.<locals>.app at 0x0000027DE4F00700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027DC9CC5870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000027DCC079EA0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000027DE4EF7DC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Venda', corretora='Rico', data=datetime.date(2023, 3, ...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>
                │       └ <function create_transacao at 0x0000027DCC079B40>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 65, in create_transacao
    db.refresh(patrimonio_exists)
    │  │       └ <src.core.models.Patrimonio object at 0x0000027DE50CE5C0>
    │  └ <function Session.refresh at 0x0000027DCB793760>
    └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x0000027DE50F6560>
    │    └ <function Session._expire_state at 0x0000027DCB7939A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x0000027DE50F6560>
    │    └ <function Session._validate_persistent at 0x0000027DCB798310>
    └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x27de50ce5c0>' is not persistent within this Session
ERROR    2023-03-26 18:39:13.467 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 892
               │     └ 3
               └ <function _main at 0x0000027DC95D7760>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 892
           │    └ <function BaseProcess._bootstrap at 0x0000027DC952AE60>
           └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000027DC952A4D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000027DC95E1E70>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>
    │    └ <function subprocess_started at 0x0000027DC968F760>
    └ <SpawnProcess name='SpawnProcess-1' parent=11208 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=816, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000027DC95E1F00>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=816, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000027DC966FEB0>
           │       │   └ <uvicorn.server.Server object at 0x0000027DC95E1F00>
           │       └ <function run at 0x0000027DC7E0F010>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000027DC9716FF0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027DC7E20A60>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027DC7E209D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000027DC7E224D0>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000027DC7E71B40>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027DC9810A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027DE4...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027DC9CFEB00>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027DC9810A60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027DE4...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027DE4...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027DE4F2AC50>
          └ <fastapi.applications.FastAPI object at 0x0000027DC9CFEB00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027DE4F52710>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000027DE4F2AC50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '179', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000027DE4F52710>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000027DC9D064D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000027DE4F2AB00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000027DE4F2AC20...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000027DE4F2B7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000027DC9D06E60>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000027DE4F2B7F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000027DE4F2AAD0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000027DE4F2B7F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000027DE4F52DD0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027DE4F2AA10>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000027DE4F2AAD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027DE4F2A9B0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000027DE4F2AA10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000027DE4BD9570>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027DE4F2A9B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000027DC9CC7010>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027DE4F52D40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000027DE4F00790>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000027DE4F2BAF0>
                     └ <function get_request_handler.<locals>.app at 0x0000027DE4F00700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027DC9CC5870>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000027DCC079EA0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000027DE4EF7DC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Venda', corretora='Rico', data=datetime.date(2023, 3, ...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>
                │       └ <function create_transacao at 0x0000027DCC079B40>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 65, in create_transacao
    db.refresh(patrimonio_exists)
    │  │       └ <src.core.models.Patrimonio object at 0x0000027DE50CE5C0>
    │  └ <function Session.refresh at 0x0000027DCB793760>
    └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x0000027DE50F6560>
    │    └ <function Session._expire_state at 0x0000027DCB7939A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x0000027DE50F6560>
    │    └ <function Session._validate_persistent at 0x0000027DCB798310>
    └ <sqlalchemy.orm.session.Session object at 0x0000027DE4D8AD10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x27de50ce5c0>' is not persistent within this Session
INFO     2023-03-26 18:44:18.883 request id: app - uvicorn.server:serve - Started server process [2816]
INFO     2023-03-26 18:44:18.883 request id: app - uvicorn.server:serve - Started server process [2816]
INFO     2023-03-26 18:44:18.884 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:44:18.885 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:44:18.886 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:44:18.887 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:45:35.842 request id: app - uvicorn.server:serve - Started server process [16224]
INFO     2023-03-26 18:45:35.842 request id: app - uvicorn.server:serve - Started server process [16224]
INFO     2023-03-26 18:45:35.843 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:45:35.844 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:45:35.844 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:45:35.845 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:49:35.489 request id: app - uvicorn.server:serve - Started server process [4512]
INFO     2023-03-26 18:49:35.489 request id: app - uvicorn.server:serve - Started server process [4512]
INFO     2023-03-26 18:49:35.490 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:49:35.490 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:49:35.490 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:49:35.491 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:50:10.365 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59042 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:50:20.604 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59043 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:50:32.494 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59051 - "POST /api/v1/transacoes/ HTTP/1.1" 400
INFO     2023-03-26 18:50:54.504 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59052 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 18:50:54.505 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000024F870913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000024F86FEF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=312 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024F86FEE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=312 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024F86F5FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=312 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=312 started>
    │    └ <function subprocess_started at 0x0000024F8938D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=312 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024F86F5F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000024F8936A170>
           │       │   └ <uvicorn.server.Server object at 0x0000024F86F5F7C0>
           │       └ <function run at 0x0000024F87092560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024F8940EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024F88C69E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024F88C69D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024F88C6B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024F88BBADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024F87048610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024FA4...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024F89A7EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024F87048610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024FA4...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024FA4...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024FA461FE20>
          └ <fastapi.applications.FastAPI object at 0x0000024F89A7EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024FA4630280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024FA461FE20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '180', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024FA4630280>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000024F89A73F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000024FA461FD00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024FA4763640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000024F89ADA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000024FA4763640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024FA461FCA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024FA4763640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024FA46F6680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024FA461FC70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024FA461FCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024FA461FC10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024FA461FC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000024FA450AAA0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024FA461FC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000024F89A2D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000024FA45D6290>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024FA47636D0>
                     └ <function get_request_handler.<locals>.app at 0x0000024FA45D6200>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024F89A2C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000024F8B6FA9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024FA4604F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Venda', corretora='Rico', data=datetime.date(2023, 3, ...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>
                │       └ <function create_transacao at 0x0000024F8B6FA3B0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 51, in create_transacao
    db.refresh(patrimonio_exists)
    │  │       └ <src.core.models.Patrimonio object at 0x0000024FA4763190>
    │  └ <function Session.refresh at 0x0000024F8AD695A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x0000024FA4677940>
    │    └ <function Session._expire_state at 0x0000024F8AD697E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x0000024FA4677940>
    │    └ <function Session._validate_persistent at 0x0000024F8AD6A0E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x24fa4763190>' is not persistent within this Session
ERROR    2023-03-26 18:50:54.523 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000024F870913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000024F86FEF1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=312 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024F86FEE830>
    └ <SpawnProcess name='SpawnProcess-1' parent=312 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024F86F5FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=312 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=312 started>
    │    └ <function subprocess_started at 0x0000024F8938D6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=312 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024F86F5F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000024F8936A170>
           │       │   └ <uvicorn.server.Server object at 0x0000024F86F5F7C0>
           │       └ <function run at 0x0000024F87092560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024F8940EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024F88C69E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024F88C69D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024F88C6B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024F88BBADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024F87048610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024FA4...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024F89A7EB60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024F87048610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024FA4...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024FA4...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024FA461FE20>
          └ <fastapi.applications.FastAPI object at 0x0000024F89A7EB60>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024FA4630280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024FA461FE20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '180', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024FA4630280>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000024F89A73F40>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000024FA461FD00>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x0000024FA461FDF0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024FA4763640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000024F89ADA200>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000024FA4763640>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024FA461FCA0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024FA4763640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024FA46F6680>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024FA461FC70>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024FA461FCA0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024FA461FC10>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024FA461FC70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000024FA450AAA0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024FA461FC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000024F89A2D990>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024FA46F5A20>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000024FA45D6290>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024FA47636D0>
                     └ <function get_request_handler.<locals>.app at 0x0000024FA45D6200>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024F89A2C4C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>, 'transacao_request': TransacaoRequestSchema(categoria='...
                 │         └ <function create at 0x0000024F8B6FA9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024FA4604F70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 26, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria='Ações', codigo_ativo='ITSA4', ordem='Venda', corretora='Rico', data=datetime.date(2023, 3, ...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>
                │       └ <function create_transacao at 0x0000024F8B6FA3B0>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 51, in create_transacao
    db.refresh(patrimonio_exists)
    │  │       └ <src.core.models.Patrimonio object at 0x0000024FA4763190>
    │  └ <function Session.refresh at 0x0000024F8AD695A0>
    └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2988, in refresh
    self._expire_state(state, attribute_names)
    │    │             │      └ None
    │    │             └ <sqlalchemy.orm.state.InstanceState object at 0x0000024FA4677940>
    │    └ <function Session._expire_state at 0x0000024F8AD697E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3114, in _expire_state
    self._validate_persistent(state)
    │    │                    └ <sqlalchemy.orm.state.InstanceState object at 0x0000024FA4677940>
    │    └ <function Session._validate_persistent at 0x0000024F8AD6A0E0>
    └ <sqlalchemy.orm.session.Session object at 0x0000024FA46380A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3941, in _validate_persistent
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.InvalidRequestError: Instance '<Patrimonio at 0x24fa4763190>' is not persistent within this Session
INFO     2023-03-26 18:52:41.516 request id: app - uvicorn.server:serve - Started server process [2652]
INFO     2023-03-26 18:52:41.516 request id: app - uvicorn.server:serve - Started server process [2652]
INFO     2023-03-26 18:52:41.517 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:52:41.517 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:52:41.517 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:52:41.518 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:52:51.578 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59110 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:54:36.660 request id: app - uvicorn.server:serve - Started server process [6248]
INFO     2023-03-26 18:54:36.661 request id: app - uvicorn.server:serve - Started server process [6248]
INFO     2023-03-26 18:54:36.661 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:54:36.661 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:54:36.662 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:54:36.662 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:55:01.875 request id: app - uvicorn.server:serve - Started server process [13136]
INFO     2023-03-26 18:55:01.876 request id: app - uvicorn.server:serve - Started server process [13136]
INFO     2023-03-26 18:55:01.876 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:55:01.876 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:55:01.877 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:55:01.877 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:55:23.171 request id: app - uvicorn.server:serve - Started server process [9568]
INFO     2023-03-26 18:55:23.171 request id: app - uvicorn.server:serve - Started server process [9568]
INFO     2023-03-26 18:55:23.172 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:55:23.172 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 18:55:23.173 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:55:23.173 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 18:56:23.363 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59184 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:56:31.618 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59185 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:56:51.113 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59190 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:56:55.495 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59190 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:57:54.760 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59200 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 18:58:26.744 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59201 - "POST /api/v1/transacoes/ HTTP/1.1" 400
INFO     2023-03-26 18:58:32.768 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59207 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 19:05:18.409 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59601 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 19:06:00.036 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59608 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 19:06:48.449 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59630 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 19:06:58.063 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:59631 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 19:17:56.773 request id: app - uvicorn.server:serve - Started server process [6120]
INFO     2023-03-26 19:17:56.773 request id: app - uvicorn.server:serve - Started server process [6120]
INFO     2023-03-26 19:17:56.774 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:17:56.774 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:17:56.774 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:17:56.775 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:18:33.529 request id: app - uvicorn.server:serve - Started server process [13600]
INFO     2023-03-26 19:18:33.530 request id: app - uvicorn.server:serve - Started server process [13600]
INFO     2023-03-26 19:18:33.530 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:18:33.530 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:18:33.531 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:18:33.531 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:20:58.751 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 19:20:58.751 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 19:22:33.474 request id: app - uvicorn.server:serve - Started server process [17376]
INFO     2023-03-26 19:22:33.475 request id: app - uvicorn.server:serve - Started server process [17376]
INFO     2023-03-26 19:22:33.475 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:22:33.475 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:22:33.476 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:22:33.476 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:25:00.729 request id: app - uvicorn.server:serve - Started server process [16672]
INFO     2023-03-26 19:25:00.730 request id: app - uvicorn.server:serve - Started server process [16672]
INFO     2023-03-26 19:25:00.730 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:25:00.730 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:25:00.731 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:25:00.731 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:25:59.894 request id: app - uvicorn.server:serve - Started server process [7700]
INFO     2023-03-26 19:25:59.895 request id: app - uvicorn.server:serve - Started server process [7700]
INFO     2023-03-26 19:25:59.895 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:25:59.895 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:25:59.896 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:25:59.896 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:31:19.153 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 19:31:19.153 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 19:31:19.154 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:31:19.154 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:31:19.154 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:31:19.154 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:50:59.315 request id: app - uvicorn.server:serve - Started server process [14932]
INFO     2023-03-26 19:50:59.315 request id: app - uvicorn.server:serve - Started server process [14932]
INFO     2023-03-26 19:50:59.316 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:50:59.316 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:50:59.317 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:50:59.318 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:51:38.045 request id: app - uvicorn.server:serve - Started server process [5452]
INFO     2023-03-26 19:51:38.046 request id: app - uvicorn.server:serve - Started server process [5452]
INFO     2023-03-26 19:51:38.046 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:51:38.047 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:51:38.047 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:51:38.048 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:52:42.972 request id: app - uvicorn.server:serve - Started server process [1996]
INFO     2023-03-26 19:52:42.972 request id: app - uvicorn.server:serve - Started server process [1996]
INFO     2023-03-26 19:52:42.972 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:52:42.973 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 19:52:42.973 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 19:52:42.973 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:07:38.250 request id: app - uvicorn.server:serve - Started server process [14456]
INFO     2023-03-26 20:07:38.250 request id: app - uvicorn.server:serve - Started server process [14456]
INFO     2023-03-26 20:07:38.251 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:07:38.251 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:07:38.251 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:07:38.252 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:08:06.103 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60511 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 20:08:06.227 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60511 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 20:08:17.100 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60512 - "POST /api/v1/analises/acoes/importacao HTTP/1.1" 500
ERROR    2023-03-26 20:08:17.101 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002393DDB13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002393DD0F1C0>
           └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002393DD0E830>
    └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002393DC7FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>
    │    └ <function subprocess_started at 0x000002394004D6C0>
    └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002393DC7F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002394002A170>
           │       │   └ <uvicorn.server.Server object at 0x000002393DC7F7C0>
           │       └ <function run at 0x000002393DDB2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000239400CEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002393F939E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002393F939D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002393F93B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002393F89ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002393DD68610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002395B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002394073EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002393DD68610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002395B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002395B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002395B32ABF0>
          └ <fastapi.applications.FastAPI object at 0x000002394073EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002395B3341F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002395B32ABF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002395B3341F0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000023940798040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002395B32AAD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002395B3537F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002394079A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002395B3537F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002395B32AA70>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002395B3537F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002395B3344C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002395B32AA40>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002395B32AA70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002395B32A9E0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002395B32AA40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002395B2400D0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002395B32A9E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000239406EDA20>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002395B2DF6D0>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002395B353550>
                     └ <function get_request_handler.<locals>.app at 0x000002395B2DF640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000239406EC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002395B353010>}
                 │         └ <function importar_acoes at 0x0000023959F8B760>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002395B317E20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 98, in importar_acoes
    service.import_acoes(db)
    │       │            └ <sqlalchemy.orm.session.Session object at 0x000002395B353010>
    │       └ <function import_acoes at 0x0000023959F8A200>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 345, in import_acoes
    count = db.query(models.Acao).count()
            │  │     └ <module 'src.core.models' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\core\\models.py'>
            │  └ <function Session.query at 0x0000023941A213F0>
            └ <sqlalchemy.orm.session.Session object at 0x000002395B353010>

AttributeError: module 'src.core.models' has no attribute 'Acao'
ERROR    2023-03-26 20:08:17.118 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002393DDB13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002393DD0F1C0>
           └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002393DD0E830>
    └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002393DC7FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>
    │    └ <function subprocess_started at 0x000002394004D6C0>
    └ <SpawnProcess name='SpawnProcess-9' parent=17264 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002393DC7F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002394002A170>
           │       │   └ <uvicorn.server.Server object at 0x000002393DC7F7C0>
           │       └ <function run at 0x000002393DDB2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000239400CEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002393F939E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002393F939D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002393F93B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002393F89ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002393DD68610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002395B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002394073EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002393DD68610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002395B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002395B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002395B32ABF0>
          └ <fastapi.applications.FastAPI object at 0x000002394073EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002395B3341F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002395B32ABF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '0', 'sec-ch-ua': '"Google Chrome";v="111", ...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002395B3341F0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x0000023940798040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002395B32AAD0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002395B32ABC0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002395B3537F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002394079A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002395B3537F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002395B32AA70>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002395B3537F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002395B3344C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002395B32AA40>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002395B32AA70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002395B32A9E0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002395B32AA40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002395B2400D0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002395B32A9E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000239406EDA20>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002395B3345E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000023...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002395B2DF6D0>
          └ APIRoute(path='/api/v1/analises/acoes/importacao', name='importar_acoes', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002395B353550>
                     └ <function get_request_handler.<locals>.app at 0x000002395B2DF640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000239406EC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002395B353010>}
                 │         └ <function importar_acoes at 0x0000023959F8B760>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002395B317E20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\router.py", line 98, in importar_acoes
    service.import_acoes(db)
    │       │            └ <sqlalchemy.orm.session.Session object at 0x000002395B353010>
    │       └ <function import_acoes at 0x0000023959F8A200>
    └ <module 'src.analise.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\analise\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\analise\service.py", line 345, in import_acoes
    count = db.query(models.Acao).count()
            │  │     └ <module 'src.core.models' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\core\\models.py'>
            │  └ <function Session.query at 0x0000023941A213F0>
            └ <sqlalchemy.orm.session.Session object at 0x000002395B353010>

AttributeError: module 'src.core.models' has no attribute 'Acao'
INFO     2023-03-26 20:09:08.348 request id: app - uvicorn.server:serve - Started server process [17244]
INFO     2023-03-26 20:09:08.348 request id: app - uvicorn.server:serve - Started server process [17244]
INFO     2023-03-26 20:09:08.349 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:09:08.349 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:09:08.349 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:09:08.349 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:09:16.280 request id: app - uvicorn.server:serve - Started server process [10412]
INFO     2023-03-26 20:09:16.280 request id: app - uvicorn.server:serve - Started server process [10412]
INFO     2023-03-26 20:09:16.281 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:09:16.281 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:09:16.282 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:09:16.282 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:09:52.961 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60541 - "POST /api/v1/analises/acoes/importacao HTTP/1.1" 200
INFO     2023-03-26 20:10:01.314 request id: app - src.analise.service:import_fundos_imobiliarios - Inicio da Importação de fundos Imobiliários
INFO     2023-03-26 20:10:01.596 request id: app - src.analise.service:import_fundos_imobiliarios - Fim da Importação de fundos Imobiliários
INFO     2023-03-26 20:10:01.597 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60542 - "POST /api/v1/analises/fundos-imobiliarios/importacao HTTP/1.1" 200
INFO     2023-03-26 20:11:22.763 request id: app - uvicorn.server:serve - Started server process [17372]
INFO     2023-03-26 20:11:22.764 request id: app - uvicorn.server:serve - Started server process [17372]
INFO     2023-03-26 20:11:22.764 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:11:22.764 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:11:22.765 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:11:22.765 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:13:40.474 request id: app - uvicorn.server:serve - Started server process [4500]
INFO     2023-03-26 20:13:40.475 request id: app - uvicorn.server:serve - Started server process [4500]
INFO     2023-03-26 20:13:40.475 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:13:40.475 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:13:40.475 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:13:40.476 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:13:48.626 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60591 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 20:13:48.752 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60591 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 20:14:32.301 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60595 - "POST /api/v1/usuarios/ HTTP/1.1" 200
INFO     2023-03-26 20:16:33.517 request id: app - uvicorn.server:serve - Started server process [4748]
INFO     2023-03-26 20:16:33.517 request id: app - uvicorn.server:serve - Started server process [4748]
INFO     2023-03-26 20:16:33.517 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:16:33.518 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:16:33.518 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:16:33.518 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:17:45.440 request id: app - uvicorn.server:serve - Started server process [16628]
INFO     2023-03-26 20:17:45.441 request id: app - uvicorn.server:serve - Started server process [16628]
INFO     2023-03-26 20:17:45.441 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:17:45.441 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:17:45.442 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:17:45.442 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:18:10.173 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60652 - "POST /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 20:18:10.174 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F848B06830>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F848E4B8E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 10, 'CATEGORIA': <TipoCategoria.ACAO: 1>, 'TOTAL': 85.0, 'USUARIO...
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F862806A40; closed: -1>

psycopg2.ProgrammingError: can't adapt type 'TipoCategoria'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001F8451113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001F84506F1C0>
           └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F84506E830>
    └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F844FDFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>
    │    └ <function subprocess_started at 0x000001F8473DD6C0>
    └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F844FDF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001F8473BA170>
           │       │   └ <uvicorn.server.Server object at 0x000001F844FDF7C0>
           │       └ <function run at 0x000001F845112560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F84745EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F846CB9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F846CB9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F846CBB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F846C0ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8450C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F862...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F847ACEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8450C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F862...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F862...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F86271D990>
          └ <fastapi.applications.FastAPI object at 0x000001F847ACEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F862710DC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F86271D990>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '164', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F862710DC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001F847B28040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001F86271D870>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F86271E530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001F847B2A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001F86271E530>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F86271D810>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F86271E530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001F862711120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F86271D7E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F86271D810>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F86271D780>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F86271D7E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001F86258C280>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F86271D780>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001F847A7DA20>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001F8626BECB0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F86271E830>
                     └ <function get_request_handler.<locals>.app at 0x000001F8626BEC20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F847A7C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>, 'transacao_request': TransacaoRequestSchema(categoria=<...
                 │         └ <function create at 0x000001F8496F3130>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F8626EE6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 27, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='ITSA4', ordem=<OrdemOperacao.COMPRA: 1>, corretora='R...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>
                │       └ <function create_transacao at 0x000001F8496F2050>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 56, in create_transacao
    db.flush()
    │  └ <function Session.flush at 0x000001F848DB2710>
    └ <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001F848DB28C0>
    └ <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001F862530240>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(psycopg2.ProgrammingError) can't adapt type 'TipoCategoria'")

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001F848DA4B80>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F86271EEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F86271EEC0>
    │   └ <function SaveUpdateAll.execute at 0x000001F848DA5480>
    └ SaveUpdateAll(Mapper[Patrimonio(patrimonio)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001F848D42CB0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001F848D8C310>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001F848A7F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001F86281C6A0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001F848A7F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001F848A7F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001F848A7F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001F848A7F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("can't adapt type 'TipoCategoria'")
          │                    │              └ (<class 'psycopg2.ProgrammingError'>, ProgrammingError("can't adapt type 'TipoCategoria'"), <traceback object at 0x000001F862...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(psycopg2.ProgrammingError) can't adapt type 'TipoCategoria'")

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F848B06830>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F848E4B8E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 10, 'CATEGORIA': <TipoCategoria.ACAO: 1>, 'TOTAL': 85.0, 'USUARIO...
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F862806A40; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) can't adapt type 'TipoCategoria'
[SQL: INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_ATIVO)s, %(PRECO_MEDIO)s, %(QUANTIDADE)s, %(CATEGORIA)s, %(TOTAL)s, %(USUARIO_ID)s) RETURNING patrimonio."PATRIMONIO_ID"]
[parameters: {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 10, 'CATEGORIA': <TipoCategoria.ACAO: 1>, 'TOTAL': 85.0, 'USUARIO_ID': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
ERROR    2023-03-26 20:18:10.199 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F848B06830>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F848E4B8E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 10, 'CATEGORIA': <TipoCategoria.ACAO: 1>, 'TOTAL': 85.0, 'USUARIO...
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F862806A40; closed: -1>

psycopg2.ProgrammingError: can't adapt type 'TipoCategoria'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001F8451113F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001F84506F1C0>
           └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001F84506E830>
    └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001F844FDFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>
    │    └ <function subprocess_started at 0x000001F8473DD6C0>
    └ <SpawnProcess name='SpawnProcess-15' parent=17264 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001F844FDF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001F8473BA170>
           │       │   └ <uvicorn.server.Server object at 0x000001F844FDF7C0>
           │       └ <function run at 0x000001F845112560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001F84745EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001F846CB9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001F846CB9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F846CBB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F846C0ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8450C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F862...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001F847ACEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001F8450C8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F862...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F862...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F86271D990>
          └ <fastapi.applications.FastAPI object at 0x000001F847ACEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F862710DC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001F86271D990>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '164', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001F862710DC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001F847B28040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001F86271D870>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001F86271D960...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F86271E530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001F847B2A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001F86271E530>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F86271D810>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001F86271E530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001F862711120>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F86271D7E0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001F86271D810>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F86271D780>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001F86271D7E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001F86258C280>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001F86271D780>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001F847A7DA20>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001F8627111B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001F...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001F8626BECB0>
          └ APIRoute(path='/api/v1/transacoes/', name='create', methods=['POST'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001F86271E830>
                     └ <function get_request_handler.<locals>.app at 0x000001F8626BEC20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001F847A7C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>, 'transacao_request': TransacaoRequestSchema(categoria=<...
                 │         └ <function create at 0x000001F8496F3130>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001F8626EE6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 27, in create
    transacao = service.create_transacao(db, transacao_request)
                │       │                │   └ TransacaoRequestSchema(categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='ITSA4', ordem=<OrdemOperacao.COMPRA: 1>, corretora='R...
                │       │                └ <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>
                │       └ <function create_transacao at 0x000001F8496F2050>
                └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 56, in create_transacao
    db.flush()
    │  └ <function Session.flush at 0x000001F848DB2710>
    └ <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4155, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000001F848DB28C0>
    └ <sqlalchemy.orm.session.Session object at 0x000001F86271EE90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4291, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 147, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x000001F862530240>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(psycopg2.ProgrammingError) can't adapt type 'TipoCategoria'")

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 4252, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000001F848DA4B80>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F86271EEC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 467, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000001F86271EEC0>
    │   └ <function SaveUpdateAll.execute at 0x000001F848DA5480>
    └ SaveUpdateAll(Mapper[Patrimonio(patrimonio)])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 644, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000001F848D42CB0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy...
    │    └ <module 'sqlalchemy.util.preloaded' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...
    └ <module 'sqlalchemy.util' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\util\\__i...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000001F848D8C310>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1184, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x000001F848A7F130>
             └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1414, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000001F86281C6A0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 486, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001F848A7F400>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001F848A7F5B0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001F848A7F640>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001F848A7F880>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2326, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("can't adapt type 'TipoCategoria'")
          │                    │              └ (<class 'psycopg2.ProgrammingError'>, ProgrammingError("can't adapt type 'TipoCategoria'"), <traceback object at 0x000001F862...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(psycopg2.ProgrammingError) can't adapt type 'TipoCategoria'")

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F848B06830>
    │    └ <sqlalchemy.dialects.postgresql.psycopg2.PGDialect_psycopg2 object at 0x000001F848E4B8E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F8627AE740>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\engine\default.py", line 748, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 10, 'CATEGORIA': <TipoCategoria.ACAO: 1>, 'TOTAL': 85.0, 'USUARIO...
    │      │       └ 'INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_AT...
    │      └ <method 'execute' of 'psycopg2.extensions.cursor' objects>
    └ <cursor object at 0x000001F862806A40; closed: -1>

sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) can't adapt type 'TipoCategoria'
[SQL: INSERT INTO patrimonio ("CODIGO_ATIVO", "PRECO_MEDIO", "QUANTIDADE", "CATEGORIA", "TOTAL", "USUARIO_ID") VALUES (%(CODIGO_ATIVO)s, %(PRECO_MEDIO)s, %(QUANTIDADE)s, %(CATEGORIA)s, %(TOTAL)s, %(USUARIO_ID)s) RETURNING patrimonio."PATRIMONIO_ID"]
[parameters: {'CODIGO_ATIVO': 'ITSA4', 'PRECO_MEDIO': 8.5, 'QUANTIDADE': 10, 'CATEGORIA': <TipoCategoria.ACAO: 1>, 'TOTAL': 85.0, 'USUARIO_ID': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
INFO     2023-03-26 20:20:06.681 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 20:20:06.681 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2023-03-26 20:20:11.617 request id: app - uvicorn.server:serve - Started server process [7996]
INFO     2023-03-26 20:20:11.618 request id: app - uvicorn.server:serve - Started server process [7996]
INFO     2023-03-26 20:20:11.618 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:20:11.618 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:20:11.619 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:20:11.620 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:23:12.437 request id: app - uvicorn.server:serve - Started server process [5072]
INFO     2023-03-26 20:23:12.437 request id: app - uvicorn.server:serve - Started server process [5072]
INFO     2023-03-26 20:23:12.437 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:23:12.438 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:23:12.438 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:23:12.438 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:23:17.588 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60728 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 20:23:29.600 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60729 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 20:23:52.927 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60735 - "POST /api/v1/transacoes/ HTTP/1.1" 400
INFO     2023-03-26 20:24:13.423 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60736 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 20:24:25.278 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60742 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 20:24:44.842 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60743 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 20:25:17.891 request id: app - uvicorn.server:serve - Started server process [11732]
INFO     2023-03-26 20:25:17.892 request id: app - uvicorn.server:serve - Started server process [11732]
INFO     2023-03-26 20:25:17.892 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:25:17.893 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:25:17.894 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:25:17.894 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:25:26.213 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60755 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 20:26:48.183 request id: app - uvicorn.server:serve - Started server process [17072]
INFO     2023-03-26 20:26:48.184 request id: app - uvicorn.server:serve - Started server process [17072]
INFO     2023-03-26 20:26:48.184 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:26:48.184 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:26:48.185 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:26:48.185 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:26:49.894 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60788 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 20:26:50.017 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60788 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 20:27:14.583 request id: app - uvicorn.server:serve - Started server process [16648]
INFO     2023-03-26 20:27:14.583 request id: app - uvicorn.server:serve - Started server process [16648]
INFO     2023-03-26 20:27:14.583 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:27:14.584 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:27:14.584 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:27:14.584 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:27:16.338 request id: app - uvicorn.server:serve - Started server process [4756]
INFO     2023-03-26 20:27:16.339 request id: app - uvicorn.server:serve - Started server process [4756]
INFO     2023-03-26 20:27:16.339 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:27:16.339 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:27:16.339 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:27:16.340 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:43:34.126 request id: app - uvicorn.server:serve - Started server process [16760]
INFO     2023-03-26 20:43:34.126 request id: app - uvicorn.server:serve - Started server process [16760]
INFO     2023-03-26 20:43:34.126 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:43:34.127 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 20:43:34.127 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 20:43:34.127 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:04:41.554 request id: app - uvicorn.server:serve - Started server process [1788]
INFO     2023-03-26 21:04:41.554 request id: app - uvicorn.server:serve - Started server process [1788]
INFO     2023-03-26 21:04:41.554 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:04:41.555 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:04:41.555 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:04:41.555 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:05:15.187 request id: app - uvicorn.server:serve - Started server process [6164]
INFO     2023-03-26 21:05:15.188 request id: app - uvicorn.server:serve - Started server process [6164]
INFO     2023-03-26 21:05:15.188 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:05:15.188 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:05:15.188 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:05:15.189 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:05:22.480 request id: app - uvicorn.server:serve - Started server process [12536]
INFO     2023-03-26 21:05:22.481 request id: app - uvicorn.server:serve - Started server process [12536]
INFO     2023-03-26 21:05:22.481 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:05:22.481 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:05:22.482 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:05:22.482 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:05:38.646 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61226 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:05:38.647 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000252AC1713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000252AC0CF1C0>
           └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000252AC0CE830>
    └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000252AC03FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>
    │    └ <function subprocess_started at 0x00000252AE42D6C0>
    └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000252AC03F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000252AE40A170>
           │       │   └ <uvicorn.server.Server object at 0x00000252AC03F7C0>
           │       └ <function run at 0x00000252AC172560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000252AE4AEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000252ADD09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000252ADD09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000252ADD0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000252ADC5ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000252AC128610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000252C9...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000252AEB1EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000252AC128610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000252C9...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000252C9...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000252C970D930>
          └ <fastapi.applications.FastAPI object at 0x00000252AEB1EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000252C9701240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000252C970D900>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000252C970D930>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000252C9701240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000252C970D810>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000252C970D900>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000252C9701240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000252C972FF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000252AEB7A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000252C972FF40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000252C970D7B0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000252C972FF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000252C97013F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000252C970D780>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000252C970D7B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000252C970D720>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000252C970D780>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000252C9648280>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000252C970D720>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000252AEACDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000252C96A76D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000252C9738280>
                     └ <function get_request_handler.<locals>.app at 0x00000252C96A7640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000252AEACC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000252C97388E0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x00000252C90AE7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000252C96DFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x00000252C97388E0>
                  │       └ <function get_patrimonio_by_usuario at 0x00000252C90ADCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valores))
    │            │      │              └ [<src.transacoes.models.Patrimonio object at 0x00000252C9808490>, <src.transacoes.models.Patrimonio object at 0x00000252C9808...
    │            │      └ <function convert_schema at 0x00000252B0740F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 12, in convert_schema
    categoria=model.categoria,
              └ [<src.transacoes.models.Patrimonio object at 0x00000252C9808490>, <src.transacoes.models.Patrimonio object at 0x00000252C9808...

AttributeError: 'list' object has no attribute 'categoria'
ERROR    2023-03-26 21:05:38.663 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000252AC1713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000252AC0CF1C0>
           └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000252AC0CE830>
    └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000252AC03FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>
    │    └ <function subprocess_started at 0x00000252AE42D6C0>
    └ <SpawnProcess name='SpawnProcess-17' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000252AC03F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000252AE40A170>
           │       │   └ <uvicorn.server.Server object at 0x00000252AC03F7C0>
           │       └ <function run at 0x00000252AC172560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000252AE4AEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000252ADD09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000252ADD09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000252ADD0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000252ADC5ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000252AC128610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000252C9...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000252AEB1EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000252AC128610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000252C9...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000252C9...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000252C970D930>
          └ <fastapi.applications.FastAPI object at 0x00000252AEB1EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000252C9701240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000252C970D900>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000252C970D930>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000252C9701240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000252C970D810>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000252C970D900>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000252C9701240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000252C972FF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000252AEB7A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000252C972FF40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000252C970D7B0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000252C972FF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000252C97013F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000252C970D780>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000252C970D7B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000252C970D720>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000252C970D780>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000252C9648280>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000252C970D720>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000252AEACDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000252C9701480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000025...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000252C96A76D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000252C9738280>
                     └ <function get_request_handler.<locals>.app at 0x00000252C96A7640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000252AEACC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000252C97388E0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x00000252C90AE7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000252C96DFA00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x00000252C97388E0>
                  │       └ <function get_patrimonio_by_usuario at 0x00000252C90ADCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valores))
    │            │      │              └ [<src.transacoes.models.Patrimonio object at 0x00000252C9808490>, <src.transacoes.models.Patrimonio object at 0x00000252C9808...
    │            │      └ <function convert_schema at 0x00000252B0740F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 12, in convert_schema
    categoria=model.categoria,
              └ [<src.transacoes.models.Patrimonio object at 0x00000252C9808490>, <src.transacoes.models.Patrimonio object at 0x00000252C9808...

AttributeError: 'list' object has no attribute 'categoria'
INFO     2023-03-26 21:07:06.140 request id: app - uvicorn.server:serve - Started server process [2736]
INFO     2023-03-26 21:07:06.140 request id: app - uvicorn.server:serve - Started server process [2736]
INFO     2023-03-26 21:07:06.140 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:07:06.140 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:07:06.141 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:07:06.141 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:07:11.561 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61254 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:07:11.561 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002B4CB4013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002B4CB35F1C0>
           └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002B4CB35E830>
    └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002B4CB2CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>
    │    └ <function subprocess_started at 0x000002B4CD71D6C0>
    └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002B4CB2CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002B4CD6FA170>
           │       │   └ <uvicorn.server.Server object at 0x000002B4CB2CF7C0>
           │       └ <function run at 0x000002B4CB402560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002B4CD79EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002B4CCFF9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002B4CCFF9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002B4CCFFB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002B4CCF4ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B4CB3B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B4E8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002B4CDE0EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B4CB3B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B4E8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B4E8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B4E8A6DC30>
          └ <fastapi.applications.FastAPI object at 0x000002B4CDE0EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B4E8A61240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B4E8A6DC00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B4E8A6DC30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B4E8A61240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002B4E8A6DB10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B4E8A6DC00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B4E8A61240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B4E8A90280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002B4CDE6A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002B4E8A90280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B4E8A6DAB0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B4E8A90280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002B4E8A613F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B4E8A6DA80>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B4E8A6DAB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B4E8A6DA20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B4E8A6DA80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002B4E899C4C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B4E8A6DA20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002B4CDDBDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002B4E8A0B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002B4E8A90580>
                     └ <function get_request_handler.<locals>.app at 0x000002B4E8A0B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002B4CDDBC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002B4E8A90BE0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002B4E840E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002B4E8A3FD00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002B4E8A90BE0>
                  │       └ <function get_patrimonio_by_usuario at 0x000002B4E840DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x000002B4E8B64790>
    │            │      └ <function convert_schema at 0x000002B4CFA30F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x000002B4E8B64790>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
ERROR    2023-03-26 21:07:11.578 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002B4CB4013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002B4CB35F1C0>
           └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002B4CB35E830>
    └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002B4CB2CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>
    │    └ <function subprocess_started at 0x000002B4CD71D6C0>
    └ <SpawnProcess name='SpawnProcess-18' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002B4CB2CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002B4CD6FA170>
           │       │   └ <uvicorn.server.Server object at 0x000002B4CB2CF7C0>
           │       └ <function run at 0x000002B4CB402560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002B4CD79EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002B4CCFF9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002B4CCFF9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002B4CCFFB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002B4CCF4ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B4CB3B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B4E8...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002B4CDE0EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002B4CB3B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B4E8...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B4E8...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B4E8A6DC30>
          └ <fastapi.applications.FastAPI object at 0x000002B4CDE0EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B4E8A61240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B4E8A6DC00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002B4E8A6DC30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B4E8A61240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002B4E8A6DB10>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002B4E8A6DC00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002B4E8A61240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B4E8A90280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002B4CDE6A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002B4E8A90280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B4E8A6DAB0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002B4E8A90280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002B4E8A613F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B4E8A6DA80>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002B4E8A6DAB0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B4E8A6DA20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002B4E8A6DA80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002B4E899C4C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002B4E8A6DA20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002B4CDDBDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002B4E8A61480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002B4E8A0B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002B4E8A90580>
                     └ <function get_request_handler.<locals>.app at 0x000002B4E8A0B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002B4CDDBC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002B4E8A90BE0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002B4E840E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002B4E8A3FD00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002B4E8A90BE0>
                  │       └ <function get_patrimonio_by_usuario at 0x000002B4E840DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x000002B4E8B64790>
    │            │      └ <function convert_schema at 0x000002B4CFA30F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x000002B4E8B64790>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
INFO     2023-03-26 21:08:13.109 request id: app - uvicorn.server:serve - Started server process [13620]
INFO     2023-03-26 21:08:13.109 request id: app - uvicorn.server:serve - Started server process [13620]
INFO     2023-03-26 21:08:13.109 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:08:13.109 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:08:13.110 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:08:13.110 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:08:16.766 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61275 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:08:16.767 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x00000272025813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x00000272024DF1C0>
           └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000272024DE830>
    └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002720244FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>
    │    └ <function subprocess_started at 0x000002720487D6C0>
    └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002720244F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002720485A170>
           │       │   └ <uvicorn.server.Server object at 0x000002720244F7C0>
           │       └ <function run at 0x0000027202582560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000272048FEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027204159E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027204159D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002720415B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000272040AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027202538610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002721F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027204F6EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027202538610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002721F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002721F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002721FBCD780>
          └ <fastapi.applications.FastAPI object at 0x0000027204F6EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002721FBC1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002721FBCD750>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002721FBCD780>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002721FBC1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002721FBCD660>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002721FBCD750>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002721FBC1240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002721FBEFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000027204FCA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002721FBEFD90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002721FBCD600>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002721FBEFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002721FBC13F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002721FBCD5D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002721FBCD600>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002721FBCD570>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002721FBCD5D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002721FB04280>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002721FBCD570>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000027204F1DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002721FB676D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002721FBFC0D0>
                     └ <function get_request_handler.<locals>.app at 0x000002721FB67640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027204F1C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002721FBFC730>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002721F49E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002721FB9B850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002721FBFC730>
                  │       └ <function get_patrimonio_by_usuario at 0x000002721F49DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x000002721FCC82E0>
    │            │      └ <function convert_schema at 0x0000027206B90F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x000002721FCC82E0>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
ERROR    2023-03-26 21:08:16.783 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x00000272025813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x00000272024DF1C0>
           └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000272024DE830>
    └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002720244FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>
    │    └ <function subprocess_started at 0x000002720487D6C0>
    └ <SpawnProcess name='SpawnProcess-19' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002720244F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=768, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002720485A170>
           │       │   └ <uvicorn.server.Server object at 0x000002720244F7C0>
           │       └ <function run at 0x0000027202582560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000272048FEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027204159E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027204159D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002720415B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000272040AADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027202538610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002721F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027204F6EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027202538610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002721F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002721F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002721FBCD780>
          └ <fastapi.applications.FastAPI object at 0x0000027204F6EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002721FBC1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002721FBCD750>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002721FBCD780>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002721FBC1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002721FBCD660>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002721FBCD750>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002721FBC1240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002721FBEFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000027204FCA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002721FBEFD90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002721FBCD600>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002721FBEFD90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002721FBC13F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002721FBCD5D0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002721FBCD600>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002721FBCD570>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002721FBCD5D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002721FB04280>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002721FBCD570>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000027204F1DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002721FBC1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002721FB676D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002721FBFC0D0>
                     └ <function get_request_handler.<locals>.app at 0x000002721FB67640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027204F1C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002721FBFC730>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002721F49E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002721FB9B850>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002721FBFC730>
                  │       └ <function get_patrimonio_by_usuario at 0x000002721F49DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x000002721FCC82E0>
    │            │      └ <function convert_schema at 0x0000027206B90F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x000002721FCC82E0>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
INFO     2023-03-26 21:08:56.795 request id: app - uvicorn.server:serve - Started server process [16644]
INFO     2023-03-26 21:08:56.795 request id: app - uvicorn.server:serve - Started server process [16644]
INFO     2023-03-26 21:08:56.795 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:08:56.796 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:08:56.797 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:08:56.797 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:09:06.528 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61288 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:09:06.528 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 352
               │     └ 3
               └ <function _main at 0x000001ADDDD213F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 352
           │    └ <function BaseProcess._bootstrap at 0x000001ADDDC7F1C0>
           └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001ADDDC7E830>
    └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001ADDDBEFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>
    │    └ <function subprocess_started at 0x000001ADDFFAD6C0>
    └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001ADDDBEF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001ADDFF8A170>
           │       │   └ <uvicorn.server.Server object at 0x000001ADDDBEF7C0>
           │       └ <function run at 0x000001ADDDD22560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001ADE002EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001ADDF8A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001ADDF8A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001ADDF8AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001ADDF80ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ADDDCD8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ADFB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001ADE069EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ADDDCD8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ADFB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ADFB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ADFB27E080>
          └ <fastapi.applications.FastAPI object at 0x000001ADE069EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ADFB2711B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ADFB27E050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ADFB27E080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ADFB2711B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001ADFB27DEA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ADFB27E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ADFB2711B0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001ADFB2A04C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001ADE06FA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001ADFB2A04C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001ADFB27DCC0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001ADFB2A04C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001ADFB2713F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ADFB27DC90>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001ADFB27DCC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001ADFB27DC30>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ADFB27DC90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001ADFB1B4700>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001ADFB27DC30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001ADE064DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001ADFB21B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001ADFB2A07C0>
                     └ <function get_request_handler.<locals>.app at 0x000001ADFB21B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001ADE064C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001ADFB2A0E20>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000001ADFABCE7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001ADFB24BF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000001ADFB2A0E20>
                  │       └ <function get_patrimonio_by_usuario at 0x000001ADFABCDCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x000001ADFB3709D0>
    │            │      └ <function convert_schema at 0x000001ADE22C0F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x000001ADFB3709D0>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
ERROR    2023-03-26 21:09:06.545 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 352
               │     └ 3
               └ <function _main at 0x000001ADDDD213F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 352
           │    └ <function BaseProcess._bootstrap at 0x000001ADDDC7F1C0>
           └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001ADDDC7E830>
    └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001ADDDBEFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>
    │    └ <function subprocess_started at 0x000001ADDFFAD6C0>
    └ <SpawnProcess name='SpawnProcess-20' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001ADDDBEF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001ADDFF8A170>
           │       │   └ <uvicorn.server.Server object at 0x000001ADDDBEF7C0>
           │       └ <function run at 0x000001ADDDD22560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001ADE002EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001ADDF8A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001ADDF8A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001ADDF8AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001ADDF80ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ADDDCD8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ADFB...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001ADE069EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001ADDDCD8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ADFB...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001ADFB...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ADFB27E080>
          └ <fastapi.applications.FastAPI object at 0x000001ADE069EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ADFB2711B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ADFB27E050>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001ADFB27E080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ADFB2711B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001ADFB27DEA0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001ADFB27E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001ADFB2711B0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001ADFB2A04C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001ADE06FA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001ADFB2A04C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001ADFB27DCC0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001ADFB2A04C0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001ADFB2713F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ADFB27DC90>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001ADFB27DCC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001ADFB27DC30>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001ADFB27DC90>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001ADFB1B4700>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001ADFB27DC30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001ADE064DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001ADFB271480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001ADFB21B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001ADFB2A07C0>
                     └ <function get_request_handler.<locals>.app at 0x000001ADFB21B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001ADE064C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001ADFB2A0E20>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000001ADFABCE7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001ADFB24BF40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000001ADFB2A0E20>
                  │       └ <function get_patrimonio_by_usuario at 0x000001ADFABCDCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x000001ADFB3709D0>
    │            │      └ <function convert_schema at 0x000001ADE22C0F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x000001ADFB3709D0>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
INFO     2023-03-26 21:10:15.437 request id: app - uvicorn.server:serve - Started server process [5700]
INFO     2023-03-26 21:10:15.437 request id: app - uvicorn.server:serve - Started server process [5700]
INFO     2023-03-26 21:10:15.438 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:10:15.438 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:10:15.439 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:10:15.439 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:10:23.189 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61309 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:10:23.189 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000276672813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000276671DF1C0>
           └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000276671DE830>
    └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002766714FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>
    │    └ <function subprocess_started at 0x00000276694DD6C0>
    └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002766714F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000276694BA170>
           │       │   └ <uvicorn.server.Server object at 0x000002766714F7C0>
           │       └ <function run at 0x0000027667282560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002766955EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027668E09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027668E09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000027668E0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000027668D6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027667238610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027604...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027669BBEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027667238610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027604...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027604...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002760499A200>
          └ <fastapi.applications.FastAPI object at 0x0000027669BBEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000276049911B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002760499A1D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002760499A200>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000276049911B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002760499A0E0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002760499A1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000276049911B0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000276049C05E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000027669C1A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000276049C05E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002760499A080>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000276049C05E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000276049913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002760499A050>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002760499A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027604999FF0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002760499A050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000276048D0820>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027604999FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000027669B6DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002760493B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000276049C08E0>
                     └ <function get_request_handler.<locals>.app at 0x000002760493B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027669B6C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000276049C0F40>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002760433E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000276049800A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x00000276049C0F40>
                  │       └ <function get_patrimonio_by_usuario at 0x000002760433DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x0000027604A94AF0>
    │            │      └ <function convert_schema at 0x000002766B7E0F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x0000027604A94AF0>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
ERROR    2023-03-26 21:10:23.207 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000276672813F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000276671DF1C0>
           └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000276671DE830>
    └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002766714FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>
    │    └ <function subprocess_started at 0x00000276694DD6C0>
    └ <SpawnProcess name='SpawnProcess-21' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002766714F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000276694BA170>
           │       │   └ <uvicorn.server.Server object at 0x000002766714F7C0>
           │       └ <function run at 0x0000027667282560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002766955EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000027668E09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000027668E09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000027668E0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000027668D6ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027667238610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027604...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000027669BBEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000027667238610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027604...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027604...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002760499A200>
          └ <fastapi.applications.FastAPI object at 0x0000027669BBEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000276049911B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002760499A1D0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002760499A200>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000276049911B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002760499A0E0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002760499A1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000276049911B0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000276049C05E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000027669C1A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000276049C05E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002760499A080>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000276049C05E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000276049913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002760499A050>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002760499A080>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027604999FF0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002760499A050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000276048D0820>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000027604999FF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000027669B6DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000027604991480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000027...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002760493B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000276049C08E0>
                     └ <function get_request_handler.<locals>.app at 0x000002760493B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000027669B6C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000276049C0F40>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002760433E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000276049800A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x00000276049C0F40>
                  │       └ <function get_patrimonio_by_usuario at 0x000002760433DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_schema(valor))
    │            │      │              └ <src.transacoes.models.Patrimonio object at 0x0000027604A94AF0>
    │            │      └ <function convert_schema at 0x000002766B7E0F70>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 13, in convert_schema
    corretora=model.corretora,
              └ <src.transacoes.models.Patrimonio object at 0x0000027604A94AF0>

AttributeError: 'Patrimonio' object has no attribute 'corretora'
INFO     2023-03-26 21:11:26.527 request id: app - uvicorn.server:serve - Started server process [2616]
INFO     2023-03-26 21:11:26.527 request id: app - uvicorn.server:serve - Started server process [2616]
INFO     2023-03-26 21:11:26.527 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:11:26.528 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:11:26.528 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:11:26.529 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:11:29.734 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61324 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:11:29.735 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C7D6CDCF0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C7D6CDD50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000029C7D604790>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C7D6CDCF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000029C62ACDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000029C7D66F6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000029C7D6F0850>
                     └ <function get_request_handler.<locals>.app at 0x0000029C7D66F640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029C62ACC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000029C7D6F0EB0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x0000029C7D04E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029C7D69FFD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x0000029C7D6F0EB0>
                  │       └ <function get_patrimonio_by_usuario at 0x0000029C7D04DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x0000029C7D7C4A60>
    │            │      └ <function convert_patrimonio_schema at 0x0000029C7D04DD80>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 185, in convert_patrimonio_schema
    rentabilidade=calcular_rentabilidade(model.codigo_ativo,model.preco_medio),
                  │                      │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000029C646EEA20>
                  │                      │     │            └ <src.transacoes.models.Patrimonio object at 0x0000029C7D7C4A60>
                  │                      │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000029C646EE980>
                  │                      └ <src.transacoes.models.Patrimonio object at 0x0000029C7D7C4A60>
                  └ <function calcular_rentabilidade at 0x0000029C7D04DE10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 200, in calcular_rentabilidade
    preco_atual = cotacao.get_by_codigo_atual(codigo_ativo)
                  │       │                   └ 'ITSA4'
                  │       └ <function get_by_codigo_atual at 0x0000029C7D04D240>
                  └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 64, in get_by_codigo_atual
    codigo_exception(codigo)
    │                └ 'ITSA4'
    └ <function codigo_exception at 0x0000029C7D04D630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 157, in codigo_exception
    raise CodigoAtivoException(name=codigo)
          │                         └ 'ITSA4'
          └ <class 'src.core.exceptions.CodigoAtivoException'>

src.core.exceptions.CodigoAtivoException


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000029C601513F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000029C600AF1C0>
           └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029C600AE830>
    └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000029C6001FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>
    │    └ <function subprocess_started at 0x0000029C6242D6C0>
    └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000029C6001F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000029C6240A170>
           │       │   └ <uvicorn.server.Server object at 0x0000029C6001F7C0>
           │       └ <function run at 0x0000029C60152560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000029C624AEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029C61D09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029C61D09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029C61D0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029C61C5ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C60108610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C7D...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029C62B1EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C60108610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C7D...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C7D...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C7D6CDF00>
          └ <fastapi.applications.FastAPI object at 0x0000029C62B1EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C7D6C1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C7D6CDED0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C7D6CDF00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C7D6C1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000029C7D6CDDE0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C7D6CDED0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C7D6C1240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C7D6F0550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000029C62B7A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C7D6F0550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C7D6CDD80>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C7D6F0550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000029C7D6C13F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C7D6CDD50>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C7D6CDD80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 88, in __call__
    response = await handler(request, exc)
                     │       └ <starlette.requests.Request object at 0x0000029C7D6F0AC0>
                     └ <function handle_http_exception at 0x0000029C7D66DA20>

TypeError: handle_http_exception() takes 1 positional argument but 2 were given
ERROR    2023-03-26 21:11:29.755 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C7D6CDCF0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C7D6CDD50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000029C7D604790>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000029C7D6CDCF0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000029C62ACDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000029C7D6C1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000029C7D66F6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000029C7D6F0850>
                     └ <function get_request_handler.<locals>.app at 0x0000029C7D66F640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000029C62ACC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000029C7D6F0EB0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x0000029C7D04E7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000029C7D69FFD0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x0000029C7D6F0EB0>
                  │       └ <function get_patrimonio_by_usuario at 0x0000029C7D04DCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x0000029C7D7C4A60>
    │            │      └ <function convert_patrimonio_schema at 0x0000029C7D04DD80>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 185, in convert_patrimonio_schema
    rentabilidade=calcular_rentabilidade(model.codigo_ativo,model.preco_medio),
                  │                      │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000029C646EEA20>
                  │                      │     │            └ <src.transacoes.models.Patrimonio object at 0x0000029C7D7C4A60>
                  │                      │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000029C646EE980>
                  │                      └ <src.transacoes.models.Patrimonio object at 0x0000029C7D7C4A60>
                  └ <function calcular_rentabilidade at 0x0000029C7D04DE10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 200, in calcular_rentabilidade
    preco_atual = cotacao.get_by_codigo_atual(codigo_ativo)
                  │       │                   └ 'ITSA4'
                  │       └ <function get_by_codigo_atual at 0x0000029C7D04D240>
                  └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 64, in get_by_codigo_atual
    codigo_exception(codigo)
    │                └ 'ITSA4'
    └ <function codigo_exception at 0x0000029C7D04D630>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 157, in codigo_exception
    raise CodigoAtivoException(name=codigo)
          │                         └ 'ITSA4'
          └ <class 'src.core.exceptions.CodigoAtivoException'>

src.core.exceptions.CodigoAtivoException


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000029C601513F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000029C600AF1C0>
           └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000029C600AE830>
    └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000029C6001FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>
    │    └ <function subprocess_started at 0x0000029C6242D6C0>
    └ <SpawnProcess name='SpawnProcess-22' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000029C6001F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000029C6240A170>
           │       │   └ <uvicorn.server.Server object at 0x0000029C6001F7C0>
           │       └ <function run at 0x0000029C60152560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000029C624AEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000029C61D09E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000029C61D09D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000029C61D0B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000029C61C5ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C60108610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C7D...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000029C62B1EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000029C60108610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C7D...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029C7D...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C7D6CDF00>
          └ <fastapi.applications.FastAPI object at 0x0000029C62B1EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C7D6C1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C7D6CDED0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000029C7D6CDF00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C7D6C1240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000029C7D6CDDE0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000029C7D6CDED0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000029C7D6C1240>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C7D6F0550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000029C62B7A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C7D6F0550>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C7D6CDD80>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000029C7D6F0550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000029C7D6C13F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000029...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000029C7D6CDD50>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000029C7D6CDD80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 88, in __call__
    response = await handler(request, exc)
                     │       └ <starlette.requests.Request object at 0x0000029C7D6F0AC0>
                     └ <function handle_http_exception at 0x0000029C7D66DA20>

TypeError: handle_http_exception() takes 1 positional argument but 2 were given
INFO     2023-03-26 21:13:55.811 request id: app - uvicorn.server:serve - Started server process [4704]
INFO     2023-03-26 21:13:55.811 request id: app - uvicorn.server:serve - Started server process [4704]
INFO     2023-03-26 21:13:55.812 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:13:55.812 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:13:55.813 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:13:55.814 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:14:00.794 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61352 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:14:00.795 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000024AED1F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000024AED14F1C0>
           └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024AED14E830>
    └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024AED0BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>
    │    └ <function subprocess_started at 0x0000024AEF4BD6C0>
    └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024AED0BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000024AEF49A170>
           │       │   └ <uvicorn.server.Server object at 0x0000024AED0BF7C0>
           │       └ <function run at 0x0000024AED1F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024AEF53EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024AEED99E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024AEED99D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024AEED9B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024AEECEADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024AED1A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024A8A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024AEFBAEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024AED1A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024A8A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024A8A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A8A7E9E70>
          └ <fastapi.applications.FastAPI object at 0x0000024AEFBAEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A8A7E11B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A8A7E9E40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A8A7E9E70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A8A7E11B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000024A8A7E9CC0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A8A7E9E40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A8A7E11B0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024A8A810280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000024AEFC0A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000024A8A810280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A8A7E9D80>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024A8A810280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024A8A7E13F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A8A7E9C30>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A8A7E9D80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024A8A7E9A20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A8A7E9C30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000024A8A7244C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024A8A7E9A20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000024AEFB5DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000024A8A78B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024A8A810580>
                     └ <function get_request_handler.<locals>.app at 0x0000024A8A78B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024AEFB5C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000024A8A810BE0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x0000024A8A0DE7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024A8A7BFD00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x0000024A8A810BE0>
                  │       └ <function get_patrimonio_by_usuario at 0x0000024A8A0DDCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x0000024A8A8E4790>
    │            │      └ <function convert_patrimonio_schema at 0x0000024A8A0DDD80>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 185, in convert_patrimonio_schema
    rentabilidade=calcular_rentabilidade(model.codigo_ativo,model.preco_medio),
                  │                      │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000024AF176AA20>
                  │                      │     │            └ <src.transacoes.models.Patrimonio object at 0x0000024A8A8E4790>
                  │                      │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000024AF176A980>
                  │                      └ <src.transacoes.models.Patrimonio object at 0x0000024A8A8E4790>
                  └ <function calcular_rentabilidade at 0x0000024A8A0DDE10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 201, in calcular_rentabilidade
    return (preco_atual - preco_medio) / preco_medio
            │             │              └ Decimal('8.5')
            │             └ Decimal('8.5')
            └ 7.849999904632568

TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
ERROR    2023-03-26 21:14:00.816 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000024AED1F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000024AED14F1C0>
           └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000024AED14E830>
    └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000024AED0BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>
    │    └ <function subprocess_started at 0x0000024AEF4BD6C0>
    └ <SpawnProcess name='SpawnProcess-23' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000024AED0BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000024AEF49A170>
           │       │   └ <uvicorn.server.Server object at 0x0000024AED0BF7C0>
           │       └ <function run at 0x0000024AED1F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000024AEF53EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000024AEED99E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000024AEED99D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000024AEED9B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000024AEECEADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024AED1A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024A8A...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000024AEFBAEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000024AED1A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024A8A...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024A8A...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A8A7E9E70>
          └ <fastapi.applications.FastAPI object at 0x0000024AEFBAEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A8A7E11B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A8A7E9E40>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000024A8A7E9E70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A8A7E11B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000024A8A7E9CC0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000024A8A7E9E40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000024A8A7E11B0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024A8A810280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000024AEFC0A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000024A8A810280>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A8A7E9D80>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000024A8A810280>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000024A8A7E13F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A8A7E9C30>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000024A8A7E9D80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024A8A7E9A20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000024A8A7E9C30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000024A8A7244C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000024A8A7E9A20>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000024AEFB5DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000024A8A7E1480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000024...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000024A8A78B6D0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000024A8A810580>
                     └ <function get_request_handler.<locals>.app at 0x0000024A8A78B640>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000024AEFB5C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000024A8A810BE0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x0000024A8A0DE7A0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000024A8A7BFD00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x0000024A8A810BE0>
                  │       └ <function get_patrimonio_by_usuario at 0x0000024A8A0DDCF0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x0000024A8A8E4790>
    │            │      └ <function convert_patrimonio_schema at 0x0000024A8A0DDD80>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 185, in convert_patrimonio_schema
    rentabilidade=calcular_rentabilidade(model.codigo_ativo,model.preco_medio),
                  │                      │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000024AF176AA20>
                  │                      │     │            └ <src.transacoes.models.Patrimonio object at 0x0000024A8A8E4790>
                  │                      │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000024AF176A980>
                  │                      └ <src.transacoes.models.Patrimonio object at 0x0000024A8A8E4790>
                  └ <function calcular_rentabilidade at 0x0000024A8A0DDE10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 201, in calcular_rentabilidade
    return (preco_atual - preco_medio) / preco_medio
            │             │              └ Decimal('8.5')
            │             └ Decimal('8.5')
            └ 7.849999904632568

TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
INFO     2023-03-26 21:14:52.433 request id: app - uvicorn.server:serve - Started server process [16328]
INFO     2023-03-26 21:14:52.433 request id: app - uvicorn.server:serve - Started server process [16328]
INFO     2023-03-26 21:14:52.433 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:14:52.434 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:14:52.434 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:14:52.434 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:14:55.774 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61375 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 21:15:41.827 request id: app - uvicorn.server:serve - Started server process [1580]
INFO     2023-03-26 21:15:41.827 request id: app - uvicorn.server:serve - Started server process [1580]
INFO     2023-03-26 21:15:41.828 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:15:41.828 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:15:41.828 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:15:41.829 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:15:46.089 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61389 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 21:19:19.434 request id: app - uvicorn.server:serve - Started server process [2668]
INFO     2023-03-26 21:19:19.435 request id: app - uvicorn.server:serve - Started server process [2668]
INFO     2023-03-26 21:19:19.435 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:19:19.435 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:19:19.436 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:19:19.436 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:20:04.945 request id: app - uvicorn.server:serve - Started server process [16060]
INFO     2023-03-26 21:20:04.946 request id: app - uvicorn.server:serve - Started server process [16060]
INFO     2023-03-26 21:20:04.946 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:20:04.947 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:20:04.948 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:20:04.948 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:20:15.009 request id: app - uvicorn.server:serve - Started server process [16264]
INFO     2023-03-26 21:20:15.010 request id: app - uvicorn.server:serve - Started server process [16264]
INFO     2023-03-26 21:20:15.010 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:20:15.011 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:20:15.012 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:20:15.012 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:21:09.032 request id: app - uvicorn.server:serve - Started server process [12120]
INFO     2023-03-26 21:21:09.033 request id: app - uvicorn.server:serve - Started server process [12120]
INFO     2023-03-26 21:21:09.033 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:21:09.034 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:21:09.035 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:21:09.035 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:21:16.580 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61471 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 21:21:16.694 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61471 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 21:21:34.385 request id: app - uvicorn.server:serve - Started server process [10076]
INFO     2023-03-26 21:21:34.385 request id: app - uvicorn.server:serve - Started server process [10076]
INFO     2023-03-26 21:21:34.385 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:21:34.386 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:21:34.386 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:21:34.387 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:21:35.438 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61492 - "GET /docs HTTP/1.1" 200
INFO     2023-03-26 21:21:35.527 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61492 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-26 21:21:48.828 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61493 - "GET /api/v1/cotacao/ibovespa?periodo=ydt&intervalo=1d HTTP/1.1" 200
INFO     2023-03-26 21:22:00.766 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61494 - "GET /api/v1/cotacao/ibovespa?periodo=ytd&intervalo=1d HTTP/1.1" 200
INFO     2023-03-26 21:53:23.480 request id: app - uvicorn.server:serve - Started server process [10488]
INFO     2023-03-26 21:53:23.481 request id: app - uvicorn.server:serve - Started server process [10488]
INFO     2023-03-26 21:53:23.481 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:53:23.481 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:53:23.482 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:53:23.482 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:53:40.038 request id: app - uvicorn.server:serve - Started server process [4168]
INFO     2023-03-26 21:53:40.039 request id: app - uvicorn.server:serve - Started server process [4168]
INFO     2023-03-26 21:53:40.039 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:53:40.040 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:53:40.041 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:53:40.041 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:55:44.438 request id: app - uvicorn.server:serve - Started server process [10392]
INFO     2023-03-26 21:55:44.439 request id: app - uvicorn.server:serve - Started server process [10392]
INFO     2023-03-26 21:55:44.439 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:55:44.439 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:55:44.440 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:55:44.440 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:56:07.450 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61911 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:56:07.450 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000228521913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000228520EF1C0>
           └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000228520EE830>
    └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002285205FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>
    │    └ <function subprocess_started at 0x000002285446D6C0>
    └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002285205F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002285444A170>
           │       │   └ <uvicorn.server.Server object at 0x000002285205F7C0>
           │       └ <function run at 0x0000022852192560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000228544EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022853D49E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022853D49D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022853D4B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022853C9ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022852148610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002286F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022854B5EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022852148610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002286F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002286F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002286F7CE350>
          └ <fastapi.applications.FastAPI object at 0x0000022854B5EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002286F7C1750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002286F7CE320>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002286F7CE350>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002286F7C1750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002286F7CE230>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002286F7CE320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002286F7C1750>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002286F7F89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000022854BBA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002286F7F89A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002286F7CE1D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002286F7F89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002286F7C1900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002286F7CE1A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002286F7CE1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002286F7CE140>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002286F7CE1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002286F7047C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002286F7CE140>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000022854B0DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002286F77BAC0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002286F7F8CA0>
                     └ <function get_request_handler.<locals>.app at 0x000002286F77BA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022854B0C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002286F7F9330>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002286F16E9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002286F7B8040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002286F7F9330>
                  │       └ <function get_patrimonio_by_usuario at 0x000002286F16DEA0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000002286F8C4EB0>
    │            │      └ <function convert_patrimonio_schema at 0x000002286F16DF30>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 188, in convert_patrimonio_schema
    variacao_diaria=calcular_variacao_diaria(model.codigo_ativo),
                    │                        │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000002285671E980>
                    │                        └ <src.transacoes.models.Patrimonio object at 0x000002286F8C4EB0>
                    └ <function calcular_variacao_diaria at 0x000002286F16E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 206, in calcular_variacao_diaria
    return (float(preco.abertura) - float(preco.fechamento) / float(preco.fechamento)) * 100
                  │                       │                         └ {7.800000190734863, 7.702700138092041}
                  │                       └ {7.800000190734863, 7.702700138092041}
                  └ {7.800000190734863, 7.702700138092041}

AttributeError: 'set' object has no attribute 'abertura'
ERROR    2023-03-26 21:56:07.467 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000228521913F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000228520EF1C0>
           └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000228520EE830>
    └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002285205FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>
    │    └ <function subprocess_started at 0x000002285446D6C0>
    └ <SpawnProcess name='SpawnProcess-33' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002285205F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002285444A170>
           │       │   └ <uvicorn.server.Server object at 0x000002285205F7C0>
           │       └ <function run at 0x0000022852192560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000228544EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000022853D49E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000022853D49D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022853D4B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022853C9ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022852148610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002286F...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000022854B5EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000022852148610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002286F...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002286F...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002286F7CE350>
          └ <fastapi.applications.FastAPI object at 0x0000022854B5EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002286F7C1750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002286F7CE320>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002286F7CE350>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002286F7C1750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002286F7CE230>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002286F7CE320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002286F7C1750>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002286F7F89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000022854BBA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002286F7F89A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002286F7CE1D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002286F7F89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002286F7C1900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002286F7CE1A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002286F7CE1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002286F7CE140>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002286F7CE1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002286F7047C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002286F7CE140>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000022854B0DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002286F7C1990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002286F77BAC0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002286F7F8CA0>
                     └ <function get_request_handler.<locals>.app at 0x000002286F77BA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000022854B0C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002286F7F9330>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002286F16E9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002286F7B8040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002286F7F9330>
                  │       └ <function get_patrimonio_by_usuario at 0x000002286F16DEA0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000002286F8C4EB0>
    │            │      └ <function convert_patrimonio_schema at 0x000002286F16DF30>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 188, in convert_patrimonio_schema
    variacao_diaria=calcular_variacao_diaria(model.codigo_ativo),
                    │                        │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000002285671E980>
                    │                        └ <src.transacoes.models.Patrimonio object at 0x000002286F8C4EB0>
                    └ <function calcular_variacao_diaria at 0x000002286F16E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 206, in calcular_variacao_diaria
    return (float(preco.abertura) - float(preco.fechamento) / float(preco.fechamento)) * 100
                  │                       │                         └ {7.800000190734863, 7.702700138092041}
                  │                       └ {7.800000190734863, 7.702700138092041}
                  └ {7.800000190734863, 7.702700138092041}

AttributeError: 'set' object has no attribute 'abertura'
INFO     2023-03-26 21:57:45.886 request id: app - uvicorn.server:serve - Started server process [10624]
INFO     2023-03-26 21:57:45.886 request id: app - uvicorn.server:serve - Started server process [10624]
INFO     2023-03-26 21:57:45.886 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:57:45.887 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 21:57:45.887 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:57:45.887 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 21:57:54.149 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:61948 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 21:57:54.149 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x00000214E87413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x00000214E869F1C0>
           └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000214E869E830>
    └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000214E860FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>
    │    └ <function subprocess_started at 0x00000214EAA1D6C0>
    └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000214E860F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000214EA9FA170>
           │       │   └ <uvicorn.server.Server object at 0x00000214E860F7C0>
           │       └ <function run at 0x00000214E8742560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000214EAA9EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000214EA2F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000214EA2F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000214EA2FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000214EA24ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000214E86F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021485...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000214EB10EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000214E86F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021485...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021485...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021485D7E1D0>
          └ <fastapi.applications.FastAPI object at 0x00000214EB10EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021485D6D750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021485D7E1A0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021485D7E1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021485D6D750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000021485D7E0B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021485D7E1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021485D6D750>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000021485DA4820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000214EB16A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000021485DA4820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021485D7E050>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000021485DA4820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000021485D6D900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021485D7E020>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021485D7E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000021485D7DFC0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021485D7E020>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000021485CB4640>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000021485D7DFC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000214EB0BDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000021485D23AC0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021485DA4B20>
                     └ <function get_request_handler.<locals>.app at 0x0000021485D23A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000214EB0BC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000021485DA5180>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002148571E9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021485D4FE80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x0000021485DA5180>
                  │       └ <function get_patrimonio_by_usuario at 0x000002148571DEA0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x0000021485E74D30>
    │            │      └ <function convert_patrimonio_schema at 0x000002148571DF30>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 188, in convert_patrimonio_schema
    variacao_diaria=calcular_variacao_diaria(model.codigo_ativo),
                    │                        │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000214ECCCAA20>
                    │                        └ <src.transacoes.models.Patrimonio object at 0x0000021485E74D30>
                    └ <function calcular_variacao_diaria at 0x000002148571E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 206, in calcular_variacao_diaria
    return (float(preco.abertura) - float(preco.fechamento) / float(preco.fechamento)) * 100
                  │                       │                         └ {'fechamento': 7.702700138092041, 'abertura': 7.800000190734863}
                  │                       └ {'fechamento': 7.702700138092041, 'abertura': 7.800000190734863}
                  └ {'fechamento': 7.702700138092041, 'abertura': 7.800000190734863}

AttributeError: 'dict' object has no attribute 'abertura'
ERROR    2023-03-26 21:57:54.166 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 336
               │     └ 3
               └ <function _main at 0x00000214E87413F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 336
           │    └ <function BaseProcess._bootstrap at 0x00000214E869F1C0>
           └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000214E869E830>
    └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000214E860FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>
    │    └ <function subprocess_started at 0x00000214EAA1D6C0>
    └ <SpawnProcess name='SpawnProcess-34' parent=10532 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000214E860F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000214EA9FA170>
           │       │   └ <uvicorn.server.Server object at 0x00000214E860F7C0>
           │       └ <function run at 0x00000214E8742560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000214EAA9EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000214EA2F9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000214EA2F9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000214EA2FB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000214EA24ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000214E86F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021485...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000214EB10EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000214E86F8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021485...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021485...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021485D7E1D0>
          └ <fastapi.applications.FastAPI object at 0x00000214EB10EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021485D6D750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021485D7E1A0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000021485D7E1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021485D6D750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000021485D7E0B0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000021485D7E1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000021485D6D750>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000021485DA4820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000214EB16A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000021485DA4820>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021485D7E050>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000021485DA4820>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000021485D6D900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021485D7E020>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000021485D7E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000021485D7DFC0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000021485D7E020>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000021485CB4640>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000021485D7DFC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000214EB0BDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000021485D6D990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000021...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000021485D23AC0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000021485DA4B20>
                     └ <function get_request_handler.<locals>.app at 0x0000021485D23A30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000214EB0BC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x0000021485DA5180>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002148571E9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000021485D4FE80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x0000021485DA5180>
                  │       └ <function get_patrimonio_by_usuario at 0x000002148571DEA0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x0000021485E74D30>
    │            │      └ <function convert_patrimonio_schema at 0x000002148571DF30>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 188, in convert_patrimonio_schema
    variacao_diaria=calcular_variacao_diaria(model.codigo_ativo),
                    │                        │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000214ECCCAA20>
                    │                        └ <src.transacoes.models.Patrimonio object at 0x0000021485E74D30>
                    └ <function calcular_variacao_diaria at 0x000002148571E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 206, in calcular_variacao_diaria
    return (float(preco.abertura) - float(preco.fechamento) / float(preco.fechamento)) * 100
                  │                       │                         └ {'fechamento': 7.702700138092041, 'abertura': 7.800000190734863}
                  │                       └ {'fechamento': 7.702700138092041, 'abertura': 7.800000190734863}
                  └ {'fechamento': 7.702700138092041, 'abertura': 7.800000190734863}

AttributeError: 'dict' object has no attribute 'abertura'
INFO     2023-03-26 22:01:44.811 request id: app - uvicorn.server:serve - Started server process [15044]
INFO     2023-03-26 22:01:44.812 request id: app - uvicorn.server:serve - Started server process [15044]
INFO     2023-03-26 22:01:44.812 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:01:44.812 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:01:44.813 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:01:44.814 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:03:59.853 request id: app - uvicorn.server:serve - Started server process [8164]
INFO     2023-03-26 22:03:59.853 request id: app - uvicorn.server:serve - Started server process [8164]
INFO     2023-03-26 22:03:59.854 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:03:59.854 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:03:59.854 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:03:59.855 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:04:09.173 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62027 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 22:04:44.501 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 22:04:44.502 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 22:04:44.502 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:04:44.502 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:04:44.503 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:04:44.504 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:04:52.267 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62044 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 22:07:33.520 request id: app - uvicorn.server:serve - Started server process [4248]
INFO     2023-03-26 22:07:33.521 request id: app - uvicorn.server:serve - Started server process [4248]
INFO     2023-03-26 22:07:33.521 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:07:33.521 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:07:33.522 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:07:33.522 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:07:46.848 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62109 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 22:09:39.815 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 22:09:39.816 request id: app - uvicorn.server:serve - Started server process [11028]
INFO     2023-03-26 22:09:39.816 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:09:39.817 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:09:39.818 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:09:39.818 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:16:26.722 request id: app - uvicorn.server:serve - Started server process [16776]
INFO     2023-03-26 22:16:26.722 request id: app - uvicorn.server:serve - Started server process [16776]
INFO     2023-03-26 22:16:26.723 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:16:26.723 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:16:26.724 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:16:26.724 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:16:33.010 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62234 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 22:19:41.949 request id: app - uvicorn.server:serve - Started server process [11244]
INFO     2023-03-26 22:19:41.949 request id: app - uvicorn.server:serve - Started server process [11244]
INFO     2023-03-26 22:19:41.950 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:19:41.950 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:19:41.950 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:19:41.951 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:19:51.638 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62302 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 22:19:51.639 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A3E6EA13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A3E6DFF1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A3E6DFE830>
    └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A3E6D6FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>
    │    └ <function subprocess_started at 0x000001A3E916D6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A3E6D6F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A3E914A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A3E6D6F7C0>
           │       └ <function run at 0x000001A3E6EA2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A3E91EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A3E8A49E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A3E8A49D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A3E8A4B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A3E899ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A3E6E58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A384...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A3E985EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A3E6E58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A384...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A384...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A38448E350>
          └ <fastapi.applications.FastAPI object at 0x000001A3E985EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A384481750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A38448E320>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A38448E350>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A384481750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A38448E230>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A38448E320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A384481750>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A3844B89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A3E98BA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A3844B89A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A38448E1D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A3844B89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A384481900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A38448E1A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A38448E1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A38448E140>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A38448E1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A3843C87C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A38448E140>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A3E980DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A38443BAC0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A3844B8CA0>
                     └ <function get_request_handler.<locals>.app at 0x000001A38443BA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A3E980C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A3844B9300>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000001A383E2E9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A384478040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000001A3844B9300>
                  │       └ <function get_patrimonio_by_usuario at 0x000001A383E2DEA0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000001A384584EB0>
    │            │      └ <function convert_patrimonio_schema at 0x000001A383E2DF30>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 188, in convert_patrimonio_schema
    variacao_diaria=calcular_variacao_diaria(model.codigo_ativo, model.total),
                    │                        │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001A3EB41EC00>
                    │                        │     │             └ <src.transacoes.models.Patrimonio object at 0x000001A384584EB0>
                    │                        │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001A3EB41E980>
                    │                        └ <src.transacoes.models.Patrimonio object at 0x000001A384584EB0>
                    └ <function calcular_variacao_diaria at 0x000001A383E2E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 209, in calcular_variacao_diaria
    return (total/100)*variacao
            │          └ 1.2631940864690534
            └ Decimal('85.0')

TypeError: unsupported operand type(s) for *: 'decimal.Decimal' and 'float'
ERROR    2023-03-26 22:19:51.656 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A3E6EA13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A3E6DFF1C0>
           └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A3E6DFE830>
    └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A3E6D6FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>
    │    └ <function subprocess_started at 0x000001A3E916D6C0>
    └ <SpawnProcess name='SpawnProcess-2' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A3E6D6F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A3E914A170>
           │       │   └ <uvicorn.server.Server object at 0x000001A3E6D6F7C0>
           │       └ <function run at 0x000001A3E6EA2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A3E91EEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A3E8A49E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A3E8A49D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A3E8A4B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A3E899ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A3E6E58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A384...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A3E985EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A3E6E58610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A384...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A384...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A38448E350>
          └ <fastapi.applications.FastAPI object at 0x000001A3E985EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A384481750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A38448E320>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A38448E350>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A384481750>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001A38448E230>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A38448E320>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A384481750>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A3844B89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001A3E98BA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001A3844B89A0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A38448E1D0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001A3844B89A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001A384481900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A38448E1A0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001A38448E1D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A38448E140>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A38448E1A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A3843C87C0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A38448E140>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A3E980DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A384481990>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001A...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A38443BAC0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A3844B8CA0>
                     └ <function get_request_handler.<locals>.app at 0x000001A38443BA30>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A3E980C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001A3844B9300>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000001A383E2E9E0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A384478040>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000001A3844B9300>
                  │       └ <function get_patrimonio_by_usuario at 0x000001A383E2DEA0>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000001A384584EB0>
    │            │      └ <function convert_patrimonio_schema at 0x000001A383E2DF30>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 188, in convert_patrimonio_schema
    variacao_diaria=calcular_variacao_diaria(model.codigo_ativo, model.total),
                    │                        │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001A3EB41EC00>
                    │                        │     │             └ <src.transacoes.models.Patrimonio object at 0x000001A384584EB0>
                    │                        │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001A3EB41E980>
                    │                        └ <src.transacoes.models.Patrimonio object at 0x000001A384584EB0>
                    └ <function calcular_variacao_diaria at 0x000001A383E2E050>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 209, in calcular_variacao_diaria
    return (total/100)*variacao
            │          └ 1.2631940864690534
            └ Decimal('85.0')

TypeError: unsupported operand type(s) for *: 'decimal.Decimal' and 'float'
INFO     2023-03-26 22:20:17.132 request id: app - uvicorn.server:serve - Started server process [10432]
INFO     2023-03-26 22:20:17.133 request id: app - uvicorn.server:serve - Started server process [10432]
INFO     2023-03-26 22:20:17.133 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:20:17.133 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:20:17.134 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:20:17.134 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:20:20.791 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62320 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 22:23:38.622 request id: app - uvicorn.server:serve - Started server process [9128]
INFO     2023-03-26 22:23:38.623 request id: app - uvicorn.server:serve - Started server process [9128]
INFO     2023-03-26 22:23:38.623 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:23:38.623 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:23:38.624 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:23:38.624 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:24:23.441 request id: app - uvicorn.server:serve - Started server process [12120]
INFO     2023-03-26 22:24:23.441 request id: app - uvicorn.server:serve - Started server process [12120]
INFO     2023-03-26 22:24:23.442 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:24:23.442 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:24:23.442 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:24:23.443 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:24:28.350 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62391 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 22:32:17.562 request id: app - uvicorn.server:serve - Started server process [4020]
INFO     2023-03-26 22:32:17.562 request id: app - uvicorn.server:serve - Started server process [4020]
INFO     2023-03-26 22:32:17.563 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:32:17.563 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:32:17.564 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:32:17.564 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:36:22.674 request id: app - uvicorn.server:serve - Started server process [12764]
INFO     2023-03-26 22:36:22.675 request id: app - uvicorn.server:serve - Started server process [12764]
INFO     2023-03-26 22:36:22.675 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:36:22.675 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:36:22.676 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:36:22.676 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:42:11.293 request id: app - uvicorn.server:serve - Started server process [12124]
INFO     2023-03-26 22:42:11.294 request id: app - uvicorn.server:serve - Started server process [12124]
INFO     2023-03-26 22:42:11.294 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:42:11.294 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:42:11.295 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:42:11.295 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:42:28.572 request id: app - uvicorn.server:serve - Started server process [16492]
INFO     2023-03-26 22:42:28.572 request id: app - uvicorn.server:serve - Started server process [16492]
INFO     2023-03-26 22:42:28.572 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:42:28.573 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:42:28.574 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:42:28.574 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:43:23.825 request id: app - uvicorn.server:serve - Started server process [16768]
INFO     2023-03-26 22:43:23.826 request id: app - uvicorn.server:serve - Started server process [16768]
INFO     2023-03-26 22:43:23.826 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:43:23.827 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:43:23.827 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:43:23.828 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:45:16.047 request id: app - uvicorn.server:serve - Started server process [15552]
INFO     2023-03-26 22:45:16.047 request id: app - uvicorn.server:serve - Started server process [15552]
INFO     2023-03-26 22:45:16.048 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:45:16.048 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:45:16.048 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:45:16.048 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:52:29.115 request id: app - uvicorn.server:serve - Started server process [5208]
INFO     2023-03-26 22:52:29.116 request id: app - uvicorn.server:serve - Started server process [5208]
INFO     2023-03-26 22:52:29.116 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:52:29.116 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:52:29.117 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:52:29.117 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:52:52.477 request id: app - uvicorn.server:serve - Started server process [15260]
INFO     2023-03-26 22:52:52.477 request id: app - uvicorn.server:serve - Started server process [15260]
INFO     2023-03-26 22:52:52.478 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:52:52.478 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:52:52.479 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:52:52.479 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:55:52.666 request id: app - uvicorn.server:serve - Started server process [4696]
INFO     2023-03-26 22:55:52.666 request id: app - uvicorn.server:serve - Started server process [4696]
INFO     2023-03-26 22:55:52.666 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:55:52.667 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:55:52.667 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:55:52.667 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:56:24.416 request id: app - uvicorn.server:serve - Started server process [12900]
INFO     2023-03-26 22:56:24.416 request id: app - uvicorn.server:serve - Started server process [12900]
INFO     2023-03-26 22:56:24.416 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:56:24.416 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 22:56:24.417 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 22:56:24.417 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:01:54.759 request id: app - uvicorn.server:serve - Started server process [13328]
INFO     2023-03-26 23:01:54.759 request id: app - uvicorn.server:serve - Started server process [13328]
INFO     2023-03-26 23:01:54.759 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:01:54.760 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:01:54.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:01:54.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:04:59.314 request id: app - uvicorn.server:serve - Started server process [8004]
INFO     2023-03-26 23:04:59.314 request id: app - uvicorn.server:serve - Started server process [8004]
INFO     2023-03-26 23:04:59.315 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:04:59.315 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:04:59.316 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:04:59.316 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:05:04.816 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62958 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 23:05:04.816 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 356
               │     └ 3
               └ <function _main at 0x00000220A0BC13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 356
           │    └ <function BaseProcess._bootstrap at 0x00000220A0B1F1C0>
           └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000220A0B1E830>
    └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000220A0A8FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>
    │    └ <function subprocess_started at 0x00000220A2E8D6C0>
    └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000220A0A8F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000220A2E6A170>
           │       │   └ <uvicorn.server.Server object at 0x00000220A0A8F7C0>
           │       └ <function run at 0x00000220A0BC2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000220A2F0EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000220A2769E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000220A2769D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000220A276B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000220A26BADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000220A0B78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000220BE...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000220A357EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000220A0B78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000220BE...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000220BE...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000220BE19E7A0>
          └ <fastapi.applications.FastAPI object at 0x00000220A357EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000220BE191480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000220BE19E770>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000220BE19E7A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000220BE191480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000220BE19E530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000220BE19E770>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000220BE191480>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000220BE1C8D00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000220A35DA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000220BE1C8D00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000220BE19E710>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000220BE1C8D00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000220BE191630>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000220BE19E5F0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000220BE19E710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000220BE19E4A0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000220BE19E5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000220BE0D4B20>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000220BE19E4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000220A352DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000220BE1477F0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000220BE1C9000>
                     └ <function get_request_handler.<locals>.app at 0x00000220BE147760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000220A352C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000220BE1C9660>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x00000220BDB3E710>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000220BE1843A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x00000220BE1C9660>
                  │       └ <function get_patrimonio_by_usuario at 0x00000220BDB3DB40>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
    │            │      └ <function convert_patrimonio_schema at 0x00000220BDB3DBD0>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 177, in convert_patrimonio_schema
    variacao_total, porcentagem_total = calcular_variacao_total(model.codigo_ativo, model.preco_medio, model.quantidade)
                                        │                       │     │             │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000220A513ACA0>
                                        │                       │     │             │     │            └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
                                        │                       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000220A513AC00>
                                        │                       │     │             └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
                                        │                       │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000220A513AB60>
                                        │                       └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
                                        └ <function calcular_variacao_total at 0x00000220BDB3DD80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 220, in calcular_variacao_total
    variacao_total = (preco_atual - preco_inicial) * quantidade
                      │             │                └ 10
                      │             └ Decimal('8.5')
                      └ 7.849999904632568

TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
ERROR    2023-03-26 23:05:04.833 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 356
               │     └ 3
               └ <function _main at 0x00000220A0BC13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 356
           │    └ <function BaseProcess._bootstrap at 0x00000220A0B1F1C0>
           └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000220A0B1E830>
    └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000220A0A8FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>
    │    └ <function subprocess_started at 0x00000220A2E8D6C0>
    └ <SpawnProcess name='SpawnProcess-19' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000220A0A8F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000220A2E6A170>
           │       │   └ <uvicorn.server.Server object at 0x00000220A0A8F7C0>
           │       └ <function run at 0x00000220A0BC2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000220A2F0EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000220A2769E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000220A2769D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000220A276B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000220A26BADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000220A0B78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000220BE...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000220A357EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000220A0B78610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000220BE...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x00000220BE...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000220BE19E7A0>
          └ <fastapi.applications.FastAPI object at 0x00000220A357EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000220BE191480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000220BE19E770>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000220BE19E7A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000220BE191480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x00000220BE19E530>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000220BE19E770>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000220BE191480>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000220BE1C8D00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x00000220A35DA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000220BE1C8D00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000220BE19E710>
          └ <starlette.middleware.gzip.GZipResponder object at 0x00000220BE1C8D00>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x00000220BE191630>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000220BE19E5F0>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x00000220BE19E710>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000220BE19E4A0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000220BE19E5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000220BE0D4B20>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000220BE19E4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000220A352DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000220BE1916C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000022...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000220BE1477F0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000220BE1C9000>
                     └ <function get_request_handler.<locals>.app at 0x00000220BE147760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x00000220A352C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x00000220BE1C9660>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x00000220BDB3E710>
                 └ <fastapi.dependencies.models.Dependant object at 0x00000220BE1843A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x00000220BE1C9660>
                  │       └ <function get_patrimonio_by_usuario at 0x00000220BDB3DB40>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
    │            │      └ <function convert_patrimonio_schema at 0x00000220BDB3DBD0>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 177, in convert_patrimonio_schema
    variacao_total, porcentagem_total = calcular_variacao_total(model.codigo_ativo, model.preco_medio, model.quantidade)
                                        │                       │     │             │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000220A513ACA0>
                                        │                       │     │             │     │            └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
                                        │                       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000220A513AC00>
                                        │                       │     │             └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
                                        │                       │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000220A513AB60>
                                        │                       └ <src.transacoes.models.Patrimonio object at 0x00000220BE289210>
                                        └ <function calcular_variacao_total at 0x00000220BDB3DD80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 220, in calcular_variacao_total
    variacao_total = (preco_atual - preco_inicial) * quantidade
                      │             │                └ 10
                      │             └ Decimal('8.5')
                      └ 7.849999904632568

TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
INFO     2023-03-26 23:05:51.093 request id: app - uvicorn.server:serve - Started server process [10408]
INFO     2023-03-26 23:05:51.094 request id: app - uvicorn.server:serve - Started server process [10408]
INFO     2023-03-26 23:05:51.094 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:05:51.095 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:05:51.096 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:05:51.096 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:06:23.753 request id: app - uvicorn.server:serve - Started server process [11860]
INFO     2023-03-26 23:06:23.753 request id: app - uvicorn.server:serve - Started server process [11860]
INFO     2023-03-26 23:06:23.754 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:06:23.754 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:06:23.754 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:06:23.755 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:06:30.150 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:62980 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 23:07:21.695 request id: app - uvicorn.server:serve - Started server process [3644]
INFO     2023-03-26 23:07:21.696 request id: app - uvicorn.server:serve - Started server process [3644]
INFO     2023-03-26 23:07:21.696 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:07:21.696 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:07:21.697 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:07:21.697 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:10:54.843 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:63033 - "PUT /api/v1/transacoes/ HTTP/1.1" 500
ERROR    2023-03-26 23:10:54.843 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2984, in refresh
    state = attributes.instance_state(instance)
            │          │              └ TransacaoResponseSchema(transacao_id=1, categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA...
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'TransacaoResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001B26C0713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001B26BFCF1C0>
           └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B26BFCE830>
    └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B26BF3FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>
    │    └ <function subprocess_started at 0x000001B26E35D6C0>
    └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B26BF3F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001B26E33A170>
           │       │   └ <uvicorn.server.Server object at 0x000001B26BF3F7C0>
           │       └ <function run at 0x000001B26C072560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B26E3DEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B26DC39E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B26DC39D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B26DC3B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B26DB8ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B26C028610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B209...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B26EA4EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B26C028610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B209...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B209...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B20960A620>
          └ <fastapi.applications.FastAPI object at 0x000001B26EA4EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B209601240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B20960A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '166', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B209601240>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001B26EAA8040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001B20960A500>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B20960B2B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001B26EAAA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001B20960B2B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B20960A4A0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B20960B2B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001B2096017E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B20960A470>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B20960A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B20960A410>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B20960A470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001B209548AC0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B20960A410>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001B26E9FDA20>
          └ APIRoute(path='/api/v1/transacoes/', name='update', methods=['PUT'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001B2095B3490>
          └ APIRoute(path='/api/v1/transacoes/', name='update', methods=['PUT'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B20960B5B0>
                     └ <function get_request_handler.<locals>.app at 0x000001B2095B3400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B26E9FC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001B20960BC10>, 'transacao': TransacaoRequestSchema(categoria=<TipoCate...
                 │         └ <function update at 0x000001B208FAE200>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B2095DF700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 40, in update
    service.update_transacao(db, transacao)
    │       │                │   └ TransacaoRequestSchema(categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA: 1>, corretora='...
    │       │                └ <sqlalchemy.orm.session.Session object at 0x000001B20960BC10>
    │       └ <function update_transacao at 0x000001B208FAD990>
    └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 139, in update_transacao
    db.refresh(_transacao)
    │  │       └ TransacaoResponseSchema(transacao_id=1, categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA...
    │  └ <function Session.refresh at 0x000001B26FD31630>
    └ <sqlalchemy.orm.session.Session object at 0x000001B20960BC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2986, in refresh
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ TransacaoResponseSchema(transacao_id=1, categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA...
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.transacoes.schemas.TransacaoResponseSchema' is not mapped
ERROR    2023-03-26 23:10:54.862 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2984, in refresh
    state = attributes.instance_state(instance)
            │          │              └ TransacaoResponseSchema(transacao_id=1, categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA...
            │          └ operator.attrgetter('_sa_instance_state')
            └ <module 'sqlalchemy.orm.attributes' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\...

AttributeError: 'TransacaoResponseSchema' object has no attribute '_sa_instance_state'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001B26C0713F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001B26BFCF1C0>
           └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001B26BFCE830>
    └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001B26BF3FC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>
    │    └ <function subprocess_started at 0x000001B26E35D6C0>
    └ <SpawnProcess name='SpawnProcess-22' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001B26BF3F7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001B26E33A170>
           │       │   └ <uvicorn.server.Server object at 0x000001B26BF3F7C0>
           │       └ <function run at 0x000001B26C072560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001B26E3DEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001B26DC39E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001B26DC39D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B26DC3B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B26DB8ADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B26C028610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B209...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001B26EA4EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001B26C028610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B209...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B209...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B20960A620>
          └ <fastapi.applications.FastAPI object at 0x000001B26EA4EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B209601240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001B20960A620>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': 'localhost:8000', 'connection': 'keep-alive', 'content-length': '166', 'sec-ch-ua': '"Google Chrome";v="111"...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001B209601240>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001B26EAA8040>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001B20960A500>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001B20960A5F0...
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B20960B2B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001B26EAAA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001B20960B2B0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B20960A4A0>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001B20960B2B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001B2096017E0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B20960A470>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001B20960A4A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B20960A410>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001B20960A470>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001B209548AC0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001B20960A410>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001B26E9FDA20>
          └ APIRoute(path='/api/v1/transacoes/', name='update', methods=['PUT'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001B209601870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001B...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001B2095B3490>
          └ APIRoute(path='/api/v1/transacoes/', name='update', methods=['PUT'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001B20960B5B0>
                     └ <function get_request_handler.<locals>.app at 0x000001B2095B3400>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001B26E9FC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001B20960BC10>, 'transacao': TransacaoRequestSchema(categoria=<TipoCate...
                 │         └ <function update at 0x000001B208FAE200>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001B2095DF700>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 40, in update
    service.update_transacao(db, transacao)
    │       │                │   └ TransacaoRequestSchema(categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA: 1>, corretora='...
    │       │                └ <sqlalchemy.orm.session.Session object at 0x000001B20960BC10>
    │       └ <function update_transacao at 0x000001B208FAD990>
    └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 139, in update_transacao
    db.refresh(_transacao)
    │  │       └ TransacaoResponseSchema(transacao_id=1, categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA...
    │  └ <function Session.refresh at 0x000001B26FD31630>
    └ <sqlalchemy.orm.session.Session object at 0x000001B20960BC10>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\sqlalchemy\orm\session.py", line 2986, in refresh
    raise exc.UnmappedInstanceError(instance) from err
          │   │                     └ TransacaoResponseSchema(transacao_id=1, categoria=<TipoCategoria.ACAO: 1>, codigo_ativo='BBASE3', ordem=<OrdemOperacao.COMPRA...
          │   └ <class 'sqlalchemy.orm.exc.UnmappedInstanceError'>
          └ <module 'sqlalchemy.orm.exc' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\venv\\lib\\site-packages\\sqlalchemy\\orm\\e...

sqlalchemy.orm.exc.UnmappedInstanceError: Class 'src.transacoes.schemas.TransacaoResponseSchema' is not mapped
INFO     2023-03-26 23:12:12.438 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:63051 - "POST /api/v1/transacoes/ HTTP/1.1" 400
INFO     2023-03-26 23:12:42.096 request id: app - uvicorn.server:serve - Started server process [11836]
INFO     2023-03-26 23:12:42.097 request id: app - uvicorn.server:serve - Started server process [11836]
INFO     2023-03-26 23:12:42.097 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:12:42.097 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:12:42.098 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:12:42.098 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:13:02.798 request id: app - uvicorn.server:serve - Started server process [17368]
INFO     2023-03-26 23:13:02.798 request id: app - uvicorn.server:serve - Started server process [17368]
INFO     2023-03-26 23:13:02.799 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:13:02.799 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:13:02.800 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:13:02.801 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:13:16.031 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:63071 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-26 23:13:32.915 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:63072 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 23:13:32.916 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001D5117F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001D51174F1C0>
           └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001D51174E830>
    └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001D5116BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>
    │    └ <function subprocess_started at 0x000001D513A4D6C0>
    └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001D5116BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001D513A2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001D5116BF7C0>
           │       └ <function run at 0x000001D5117F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001D513ACEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001D513379E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001D513379D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001D51337B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001D5132DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D5117A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D52E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001D51411EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D5117A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D52E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D52E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D52ED9E920>
          └ <fastapi.applications.FastAPI object at 0x000001D51411EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D513B3B130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D52ED9E8F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D52ED9E920>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D513B3B130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001D52ED9E6E0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D52ED9E8F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D513B3B130>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001D52EEDF9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001D51417A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001D52EEDF9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001D52ED9E650>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001D52EEDF9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001D52ED91900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D52ED9E680>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001D52ED9E650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001D52ED9E7D0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D52ED9E680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001D52ECD4B20>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001D52ED9E7D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001D5140CDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001D52ED477F0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001D52EEDFCA0>
                     └ <function get_request_handler.<locals>.app at 0x000001D52ED47760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001D5140CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001D52ED9F7C0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000001D52E73E710>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001D52ED843A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000001D52ED9F7C0>
                  │       └ <function get_patrimonio_by_usuario at 0x000001D52E73DB40>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
    │            │      └ <function convert_patrimonio_schema at 0x000001D52E73DBD0>
    │            └ <method 'append' of 'list' objects>
    └ [PatrimonioSchemaResponse(patrimonio_id=1, codigo_ativo='ITSA4', preco_medio=Decimal('8.5'), quantidade=10, categoria='ACAO',...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 177, in convert_patrimonio_schema
    variacao_total, porcentagem_total = calcular_variacao_total(model.codigo_ativo, model.preco_medio, model.quantidade)
                                        │                       │     │             │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D515CDACA0>
                                        │                       │     │             │     │            └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
                                        │                       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D515CDAC00>
                                        │                       │     │             └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
                                        │                       │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D515CDAB60>
                                        │                       └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
                                        └ <function calcular_variacao_total at 0x000001D52E73DD80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 220, in calcular_variacao_total
    preco_atual = cotacao.get_by_codigo_atual(f"{codigo_ativo}.SA")
                  │       └ <function get_by_codigo_atual at 0x000001D52E73D000>
                  └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 90, in get_by_codigo_atual
    cotacao = cotacao.history(period="1d")['Close'][0]
              │       └ <function TickerBase.history at 0x000001D52E7392D0>
              └ yfinance.Ticker object <BBASE3.SA>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\pandas\core\series.py", line 978, in __getitem__
    return self._values[key]
           │    │       └ 0
           │    └ <property object at 0x000001D52DEDF970>
           └ Series([], Name: Close, dtype: float64)

IndexError: index 0 is out of bounds for axis 0 with size 0
ERROR    2023-03-26 23:13:32.936 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001D5117F13F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001D51174F1C0>
           └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001D51174E830>
    └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001D5116BFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>
    │    └ <function subprocess_started at 0x000001D513A4D6C0>
    └ <SpawnProcess name='SpawnProcess-24' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001D5116BF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=764, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001D513A2A170>
           │       │   └ <uvicorn.server.Server object at 0x000001D5116BF7C0>
           │       └ <function run at 0x000001D5117F2560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001D513ACEEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001D513379E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001D513379D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001D51337B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001D5132DADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D5117A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D52E...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001D51411EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001D5117A8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D52E...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D52E...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D52ED9E920>
          └ <fastapi.applications.FastAPI object at 0x000001D51411EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D513B3B130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D52ED9E8F0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001D52ED9E920>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D513B3B130>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000001D52ED9E6E0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001D52ED9E8F0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001D513B3B130>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001D52EEDF9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000001D51417A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000001D52EEDF9D0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001D52ED9E650>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000001D52EEDF9D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000001D52ED91900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D52ED9E680>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000001D52ED9E650>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001D52ED9E7D0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001D52ED9E680>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001D52ECD4B20>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001D52ED9E7D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001D5140CDA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001D52ED913F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000001D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001D52ED477F0>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001D52EEDFCA0>
                     └ <function get_request_handler.<locals>.app at 0x000001D52ED47760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001D5140CC550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000001D52ED9F7C0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000001D52E73E710>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001D52ED843A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000001D52ED9F7C0>
                  │       └ <function get_patrimonio_by_usuario at 0x000001D52E73DB40>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
    │            │      └ <function convert_patrimonio_schema at 0x000001D52E73DBD0>
    │            └ <method 'append' of 'list' objects>
    └ [PatrimonioSchemaResponse(patrimonio_id=1, codigo_ativo='ITSA4', preco_medio=Decimal('8.5'), quantidade=10, categoria='ACAO',...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 177, in convert_patrimonio_schema
    variacao_total, porcentagem_total = calcular_variacao_total(model.codigo_ativo, model.preco_medio, model.quantidade)
                                        │                       │     │             │     │            │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D515CDACA0>
                                        │                       │     │             │     │            └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
                                        │                       │     │             │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D515CDAC00>
                                        │                       │     │             └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
                                        │                       │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D515CDAB60>
                                        │                       └ <src.transacoes.models.Patrimonio object at 0x000001D52EEE0D90>
                                        └ <function calcular_variacao_total at 0x000001D52E73DD80>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 220, in calcular_variacao_total
    preco_atual = cotacao.get_by_codigo_atual(f"{codigo_ativo}.SA")
                  │       └ <function get_by_codigo_atual at 0x000001D52E73D000>
                  └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 90, in get_by_codigo_atual
    cotacao = cotacao.history(period="1d")['Close'][0]
              │       └ <function TickerBase.history at 0x000001D52E7392D0>
              └ yfinance.Ticker object <BBASE3.SA>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\pandas\core\series.py", line 978, in __getitem__
    return self._values[key]
           │    │       └ 0
           │    └ <property object at 0x000001D52DEDF970>
           └ Series([], Name: Close, dtype: float64)

IndexError: index 0 is out of bounds for axis 0 with size 0
INFO     2023-03-26 23:18:43.371 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:63187 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-26 23:21:31.457 request id: app - uvicorn.server:serve - Started server process [17212]
INFO     2023-03-26 23:21:31.457 request id: app - uvicorn.server:serve - Started server process [17212]
INFO     2023-03-26 23:21:31.458 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:21:31.458 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:21:31.459 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:21:31.459 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:22:56.582 request id: app - uvicorn.server:serve - Started server process [16188]
INFO     2023-03-26 23:22:56.582 request id: app - uvicorn.server:serve - Started server process [16188]
INFO     2023-03-26 23:22:56.583 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:22:56.583 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:22:56.583 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:22:56.584 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:25:32.665 request id: app - uvicorn.server:serve - Started server process [11396]
INFO     2023-03-26 23:25:32.665 request id: app - uvicorn.server:serve - Started server process [11396]
INFO     2023-03-26 23:25:32.665 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:25:32.666 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:25:32.666 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:25:32.667 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:25:42.068 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:63303 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 500
ERROR    2023-03-26 23:25:42.068 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002DA080013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002DA07F5F1C0>
           └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002DA07F5E830>
    └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002DA07ECFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>
    │    └ <function subprocess_started at 0x000002DA0A28D6C0>
    └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002DA07ECF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002DA0A26A170>
           │       │   └ <uvicorn.server.Server object at 0x000002DA07ECF7C0>
           │       └ <function run at 0x000002DA08002560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002DA0A30EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002DA09B89E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002DA09B89D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002DA09B8B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002DA09AEADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002DA07FB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002DA25...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002DA0A97EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002DA07FB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002DA25...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002DA25...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002DA255CA6E0>
          └ <fastapi.applications.FastAPI object at 0x000002DA0A97EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002DA255BD480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002DA255CA6B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002DA255CA6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002DA255BD480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002DA255CA5C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002DA255CA6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002DA255BD480>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002DA255F4C40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002DA0A9DA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002DA255F4C40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002DA255CA530>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002DA255F4C40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002DA255BD870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002DA255CA440>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002DA255CA530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002DA255CA3E0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002DA255CA440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002DA25508A60>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002DA255CA3E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002DA0A92DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002DA25573A30>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002DA255F4F40>
                     └ <function get_request_handler.<locals>.app at 0x000002DA255739A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002DA0A92C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002DA255F55A0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002DA24F6E950>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002DA255B42E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002DA255F55A0>
                  │       └ <function get_patrimonio_by_usuario at 0x000002DA24F6DD80>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000002DA256C1150>
    │            │      └ <function convert_patrimonio_schema at 0x000002DA24F6DE10>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 180, in convert_patrimonio_schema
    return PatrimonioSchemaResponse(
           └ <class 'src.transacoes.schemas.PatrimonioSchemaResponse'>

TypeError: PatrimonioSchemaResponse.__init__() missing 2 required positional arguments: 'variacao_diaria_percentual' and 'variacao_total_percentual'
ERROR    2023-03-26 23:25:42.085 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000002DA080013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000002DA07F5F1C0>
           └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000002DA07F5E830>
    └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002DA07ECFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>
    │    └ <function subprocess_started at 0x000002DA0A28D6C0>
    └ <SpawnProcess name='SpawnProcess-27' parent=12844 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002DA07ECF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=760, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002DA0A26A170>
           │       │   └ <uvicorn.server.Server object at 0x000002DA07ECF7C0>
           │       └ <function run at 0x000002DA08002560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002DA0A30EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x000002DA09B89E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000002DA09B89D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002DA09B8B880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002DA09AEADD0>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=False>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=False>)>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002DA07FB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002DA25...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002DA0A97EBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002DA07FB8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002DA25...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002DA25...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002DA255CA6E0>
          └ <fastapi.applications.FastAPI object at 0x000002DA0A97EBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002DA255BD480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002DA255CA6B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002DA255CA6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002DA255BD480>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002DA255CA5C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002DA255CA6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002DA255BD480>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002DA255F4C40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x000002DA0A9DA290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002DA255F4C40>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002DA255CA530>
          └ <starlette.middleware.gzip.GZipResponder object at 0x000002DA255F4C40>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x000002DA255BD870>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002DA255CA440>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x000002DA255CA530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002DA255CA3E0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002DA255CA440>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002DA25508A60>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002DA255CA3E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000002DA0A92DA20>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002DA255BD900>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x000002D...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002DA25573A30>
          └ APIRoute(path='/api/v1/transacoes/patrimonio/{usuarios_id}', name='get_transacao_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002DA255F4F40>
                     └ <function get_request_handler.<locals>.app at 0x000002DA255739A0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000002DA0A92C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.Session object at 0x000002DA255F55A0>, 'usuario_id': '1'}
                 │         └ <function get_transacao_by_codigo at 0x000002DA24F6E950>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002DA255B42E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\router.py", line 58, in get_transacao_by_codigo
    patrimonios = service.get_patrimonio_by_usuario(db, usuario_id)
                  │       │                         │   └ '1'
                  │       │                         └ <sqlalchemy.orm.session.Session object at 0x000002DA255F55A0>
                  │       └ <function get_patrimonio_by_usuario at 0x000002DA24F6DD80>
                  └ <module 'src.transacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\transacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 171, in get_patrimonio_by_usuario
    list_valores.append(convert_patrimonio_schema(valor))
    │            │      │                         └ <src.transacoes.models.Patrimonio object at 0x000002DA256C1150>
    │            │      └ <function convert_patrimonio_schema at 0x000002DA24F6DE10>
    │            └ <method 'append' of 'list' objects>
    └ []

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\transacoes\service.py", line 180, in convert_patrimonio_schema
    return PatrimonioSchemaResponse(
           └ <class 'src.transacoes.schemas.PatrimonioSchemaResponse'>

TypeError: PatrimonioSchemaResponse.__init__() missing 2 required positional arguments: 'variacao_diaria_percentual' and 'variacao_total_percentual'
INFO     2023-03-26 23:26:10.648 request id: app - uvicorn.server:serve - Started server process [8840]
INFO     2023-03-26 23:26:10.648 request id: app - uvicorn.server:serve - Started server process [8840]
INFO     2023-03-26 23:26:10.648 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:26:10.649 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-26 23:26:10.649 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:26:10.649 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-26 23:26:15.984 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:63317 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-27 09:34:52.402 request id: app - uvicorn.server:serve - Started server process [3892]
INFO     2023-03-27 09:34:52.403 request id: app - uvicorn.server:serve - Started server process [3892]
INFO     2023-03-27 09:34:52.403 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 09:34:52.404 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 09:34:52.404 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 09:34:52.405 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 09:34:53.090 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:51081 - "GET /docs HTTP/1.1" 200
INFO     2023-03-27 09:34:53.133 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:51081 - "GET /favicon.ico HTTP/1.1" 404
INFO     2023-03-27 09:34:53.764 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:51081 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-27 09:35:48.150 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:51082 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-27 17:07:21.839 request id: app - uvicorn.server:serve - Started server process [10684]
INFO     2023-03-27 17:07:21.840 request id: app - uvicorn.server:serve - Started server process [10684]
INFO     2023-03-27 17:07:21.840 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 17:07:21.840 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 17:07:21.840 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 17:07:21.842 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 17:07:46.700 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60643 - "GET / HTTP/1.1" 200
INFO     2023-03-27 17:07:50.351 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60643 - "GET /dcos HTTP/1.1" 404
INFO     2023-03-27 17:07:55.926 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60644 - "GET /docs HTTP/1.1" 200
INFO     2023-03-27 17:07:57.030 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60644 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-27 17:08:33.360 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60645 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-27 17:08:48.825 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60653 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-27 17:10:10.035 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60680 - "POST /api/v1/transacoes/ HTTP/1.1" 422
INFO     2023-03-27 17:10:26.698 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60681 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-27 17:11:38.365 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60707 - "POST /api/v1/transacoes/ HTTP/1.1" 200
INFO     2023-03-27 17:11:49.302 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60708 - "GET /api/v1/transacoes/patrimonio/%7Busuarios_id%7D?usuario_id=1 HTTP/1.1" 200
INFO     2023-03-27 17:15:27.972 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60871 - "GET /docs HTTP/1.1" 200
INFO     2023-03-27 17:15:28.089 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60871 - "GET /doc HTTP/1.1" 404
INFO     2023-03-27 17:15:32.132 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60871 - "GET /openapi.json HTTP/1.1" 200
INFO     2023-03-27 17:15:44.652 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60872 - "GET /api/v1/cotacao/moeda HTTP/1.1" 200
INFO     2023-03-27 17:15:59.209 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60878 - "GET /api/v1/cotacao/ibovespa?periodo=6b&intervalo=1d HTTP/1.1" 200
INFO     2023-03-27 17:16:29.038 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60880 - "GET /api/v1/cotacao/codigo-ativo/TAEE11?periodo=ytd&intervalo=1d HTTP/1.1" 500
ERROR    2023-03-27 17:16:29.039 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000017E2AEA4B50>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000017E1036DA20>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}', name='get_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000017E2AF5D000>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}', name='get_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000017E2B0E7310>
                     └ <function get_request_handler.<locals>.app at 0x0000017E2AF5CF70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000017E1036C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'codigo_ativo': 'TAEE11', 'periodo': 'ytd', 'intervalo': '1d'}
                 │         └ <function get_by_codigo at 0x0000017E2AE22170>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000017E2AF68760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\router.py", line 41, in get_by_codigo
    valor = service.get_by_codigo(codigo_ativo, periodo, intervalo)
            │       │             │             │        └ '1d'
            │       │             │             └ 'ytd'
            │       │             └ 'TAEE11'
            │       └ <function get_by_codigo at 0x0000017E11FE2EF0>
            └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 18, in get_by_codigo
    codigo_exception(codigo)
    │                └ 'TAEE11'
    └ <function codigo_exception at 0x0000017E2A8FD750>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 188, in codigo_exception
    raise CodigoAtivoException(name=codigo)
          │                         └ 'TAEE11'
          └ <class 'src.core.exceptions.CodigoAtivoException'>

src.core.exceptions.CodigoAtivoException


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000017E0DA013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000017E0D95F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000017E0D95E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000017E0D8CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    └ <function subprocess_started at 0x0000017E0FCCD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000017E0D8CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000017E0FCAA170>
           │       │   └ <uvicorn.server.Server object at 0x0000017E0D8CF7C0>
           │       └ <function run at 0x0000017E0DA02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000017E0FD4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000017E0F5A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000017E0F5A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000017E0F5AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000017E0F4FADD0>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>
          └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955ECB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955ECB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000017E2AF6A5C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955ECB0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7B50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000017E1041A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7B50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000017E2955E5F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 88, in __call__
    response = await handler(request, exc)
                     │       └ <starlette.requests.Request object at 0x0000017E2B0E7A30>
                     └ <function handle_http_exception at 0x0000017E2AF11F30>

TypeError: handle_http_exception() takes 1 positional argument but 2 were given
ERROR    2023-03-27 17:16:29.063 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000017E2AEA4B50>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000017E1036DA20>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}', name='get_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2955E8C0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000017E2AF5D000>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}', name='get_by_codigo', methods=['GET'])

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000017E2B0E7310>
                     └ <function get_request_handler.<locals>.app at 0x0000017E2AF5CF70>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000017E1036C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'codigo_ativo': 'TAEE11', 'periodo': 'ytd', 'intervalo': '1d'}
                 │         └ <function get_by_codigo at 0x0000017E2AE22170>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000017E2AF68760>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\router.py", line 41, in get_by_codigo
    valor = service.get_by_codigo(codigo_ativo, periodo, intervalo)
            │       │             │             │        └ '1d'
            │       │             │             └ 'ytd'
            │       │             └ 'TAEE11'
            │       └ <function get_by_codigo at 0x0000017E11FE2EF0>
            └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 18, in get_by_codigo
    codigo_exception(codigo)
    │                └ 'TAEE11'
    └ <function codigo_exception at 0x0000017E2A8FD750>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 188, in codigo_exception
    raise CodigoAtivoException(name=codigo)
          │                         └ 'TAEE11'
          └ <class 'src.core.exceptions.CodigoAtivoException'>

src.core.exceptions.CodigoAtivoException


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000017E0DA013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000017E0D95F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000017E0D95E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000017E0D8CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    └ <function subprocess_started at 0x0000017E0FCCD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000017E0D8CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000017E0FCAA170>
           │       │   └ <uvicorn.server.Server object at 0x0000017E0D8CF7C0>
           │       └ <function run at 0x0000017E0DA02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000017E0FD4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000017E0F5A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000017E0F5A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000017E0F5AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000017E0F4FADD0>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E5A50>()>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>
          └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955ECB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955ECB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000017E2AF6A5C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955ECB0>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7B50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000017E1041A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7B50>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7B50>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000017E2955E5F0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 88, in __call__
    response = await handler(request, exc)
                     │       └ <starlette.requests.Request object at 0x0000017E2B0E7A30>
                     └ <function handle_http_exception at 0x0000017E2AF11F30>

TypeError: handle_http_exception() takes 1 positional argument but 2 were given
INFO     2023-03-27 17:16:36.474 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60887 - "GET /api/v1/cotacao/codigo-ativo/TAEE11.SA?periodo=ytd&intervalo=1d HTTP/1.1" 200
INFO     2023-03-27 17:17:02.406 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60889 - "GET /api/v1/cotacao/codigo-ativo/TAEE11/data-inicio/2020-01-01/data-fim/2023-01-01 HTTP/1.1" 500
ERROR    2023-03-27 17:17:02.407 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000017E2AEA4B50>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000017E1036DA20>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}/data-inicio/{inicio}/data-fim/{fim}', name='get_by_codigo_by_inter...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000017E2AF5D120>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}/data-inicio/{inicio}/data-fim/{fim}', name='get_by_codigo_by_inter...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000017E2B0E69B0>
                     └ <function get_request_handler.<locals>.app at 0x0000017E2AF5D090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000017E1036C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'codigo_ativo': 'TAEE11', 'inicio': datetime.date(2020, 1, 1), 'fim': datetime.date(2023, 1, 1)}
                 │         └ <function get_by_codigo_by_intervalo at 0x0000017E2AE22320>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000017E2AF68BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\router.py", line 47, in get_by_codigo_by_intervalo
    valor = service.get_by_codigo_by_intervalo(codigo_ativo, inicio, fim)
            │       │                          │             │       └ datetime.date(2023, 1, 1)
            │       │                          │             └ datetime.date(2020, 1, 1)
            │       │                          └ 'TAEE11'
            │       └ <function get_by_codigo_by_intervalo at 0x0000017E2A8FD240>
            └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 67, in get_by_codigo_by_intervalo
    codigo_exception(codigo)
    │                └ 'TAEE11'
    └ <function codigo_exception at 0x0000017E2A8FD750>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 188, in codigo_exception
    raise CodigoAtivoException(name=codigo)
          │                         └ 'TAEE11'
          └ <class 'src.core.exceptions.CodigoAtivoException'>

src.core.exceptions.CodigoAtivoException


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000017E0DA013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000017E0D95F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000017E0D95E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000017E0D8CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    └ <function subprocess_started at 0x0000017E0FCCD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000017E0D8CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000017E0FCAA170>
           │       │   └ <uvicorn.server.Server object at 0x0000017E0D8CF7C0>
           │       └ <function run at 0x0000017E0DA02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000017E0FD4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000017E0F5A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000017E0F5A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000017E0F5AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000017E0F4FADD0>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>
          └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955EB90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955EB90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000017E2AF6A5C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955EB90>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000017E1041A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000017E2B275360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 88, in __call__
    response = await handler(request, exc)
                     │       └ <starlette.requests.Request object at 0x0000017E2B0E4610>
                     └ <function handle_http_exception at 0x0000017E2AF11F30>

TypeError: handle_http_exception() takes 1 positional argument but 2 were given
ERROR    2023-03-27 17:17:02.422 request id: app - uvicorn.protocols.http.httptools_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x0000017E2AEA4B50>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000017E2AF6A4D0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x0000017E1036DA20>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}/data-inicio/{inicio}/data-fim/{fim}', name='get_by_codigo_by_inter...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x0000017E2B275510>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x0000017E2AF5D120>
          └ APIRoute(path='/api/v1/cotacao/codigo-ativo/{codigo_ativo}/data-inicio/{inicio}/data-fim/{fim}', name='get_by_codigo_by_inter...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x0000017E2B0E69B0>
                     └ <function get_request_handler.<locals>.app at 0x0000017E2AF5D090>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 237, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000017E1036C550>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\routing.py", line 163, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'codigo_ativo': 'TAEE11', 'inicio': datetime.date(2020, 1, 1), 'fim': datetime.date(2023, 1, 1)}
                 │         └ <function get_by_codigo_by_intervalo at 0x0000017E2AE22320>
                 └ <fastapi.dependencies.models.Dependant object at 0x0000017E2AF68BE0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\router.py", line 47, in get_by_codigo_by_intervalo
    valor = service.get_by_codigo_by_intervalo(codigo_ativo, inicio, fim)
            │       │                          │             │       └ datetime.date(2023, 1, 1)
            │       │                          │             └ datetime.date(2020, 1, 1)
            │       │                          └ 'TAEE11'
            │       └ <function get_by_codigo_by_intervalo at 0x0000017E2A8FD240>
            └ <module 'src.cotacoes.service' from 'C:\\projetos\\Projeto TCC\\src\\infoinvestbr\\src\\cotacoes\\service.py'>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 67, in get_by_codigo_by_intervalo
    codigo_exception(codigo)
    │                └ 'TAEE11'
    └ <function codigo_exception at 0x0000017E2A8FD750>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\src\cotacoes\service.py", line 188, in codigo_exception
    raise CodigoAtivoException(name=codigo)
          │                         └ 'TAEE11'
          └ <class 'src.core.exceptions.CodigoAtivoException'>

src.core.exceptions.CodigoAtivoException


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x0000017E0DA013F0>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x0000017E0D95F1C0>
           └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x0000017E0D95E830>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000017E0D8CFC10>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>
    │    └ <function subprocess_started at 0x0000017E0FCCD6C0>
    └ <SpawnProcess name='SpawnProcess-1' parent=14816 started>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000017E0D8CF7C0>>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\server.py", line 59, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=804, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x0000017E0FCAA170>
           │       │   └ <uvicorn.server.Server object at 0x0000017E0D8CF7C0>
           │       └ <function run at 0x0000017E0DA02560>
           └ <module 'asyncio' from 'C:\\Users\\edwar\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x0000017E0FD4EEA0>
           │    └ <function BaseEventLoop.run_until_complete at 0x0000017E0F5A9E10>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 636, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000017E0F5A9D80>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 603, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000017E0F5AB880>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1899, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000017E0F4FADD0>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>

  File "C:\Users\edwar\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x0000017E2B0E7EB0>()>

> File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 436, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000017E0D9B8610>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\fastapi\applications.py", line 276, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017E2B...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>
          └ <fastapi.applications.FastAPI object at 0x0000017E103BEBC0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955EB90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000017E2AF6A6E0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955EB90>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x0000017E2AF6A5C0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x0000017E2AF6A6B0>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 24, in __call__
    await responder(scope, receive, send)
          │         │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x0000017E2955EB90>
          │         │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\gzip.py", line 44, in __call__
    await self.app(scope, receive, self.send_with_gzip)
          │    │   │      │        │    └ <function GZipResponder.send_with_gzip at 0x0000017E1041A290>
          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7160>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>
          └ <starlette.middleware.gzip.GZipResponder object at 0x0000017E2B0E7160>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\sessions.py", line 86, in __call__
    await self.app(scope, receive, send_wrapper)
          │    │   │      │        └ <function SessionMiddleware.__call__.<locals>.send_wrapper at 0x0000017E2B275360>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x0000017...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000017E2AF6A530>
          └ <starlette.middleware.sessions.SessionMiddleware object at 0x0000017E2AF6A560>

  File "C:\projetos\Projeto TCC\src\infoinvestbr\venv\lib\site-packages\starlette\middleware\exceptions.py", line 88, in __call__
    response = await handler(request, exc)
                     │       └ <starlette.requests.Request object at 0x0000017E2B0E4610>
                     └ <function handle_http_exception at 0x0000017E2AF11F30>

TypeError: handle_http_exception() takes 1 positional argument but 2 were given
INFO     2023-03-27 17:17:13.745 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60895 - "GET /api/v1/cotacao/codigo-ativo/TAEE11.SA/data-inicio/2020-01-01/data-fim/2023-01-01 HTTP/1.1" 200
INFO     2023-03-27 17:17:42.096 request id: app - uvicorn.protocols.http.httptools_impl:send - 127.0.0.1:60897 - "POST /api/v1/cotacao/historico/dividendos/CMIG4.SA HTTP/1.1" 200
INFO     2023-03-27 19:25:03.562 request id: app - uvicorn.server:serve - Started server process [16484]
INFO     2023-03-27 19:25:03.562 request id: app - uvicorn.server:serve - Started server process [16484]
INFO     2023-03-27 19:25:03.563 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:25:03.563 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:25:03.563 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:25:03.564 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:30:13.986 request id: app - uvicorn.server:serve - Started server process [9396]
INFO     2023-03-27 19:30:13.987 request id: app - uvicorn.server:serve - Started server process [9396]
INFO     2023-03-27 19:30:13.987 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:30:13.988 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:30:13.988 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:30:13.989 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:33:17.875 request id: app - uvicorn.server:serve - Started server process [15396]
INFO     2023-03-27 19:33:17.875 request id: app - uvicorn.server:serve - Started server process [15396]
INFO     2023-03-27 19:33:17.875 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:33:17.876 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:33:17.876 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:33:17.876 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:40:34.759 request id: app - uvicorn.server:serve - Started server process [2560]
INFO     2023-03-27 19:40:34.759 request id: app - uvicorn.server:serve - Started server process [2560]
INFO     2023-03-27 19:40:34.759 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:40:34.760 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:40:34.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:40:34.760 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:41:17.412 request id: app - uvicorn.server:serve - Started server process [15108]
INFO     2023-03-27 19:41:17.413 request id: app - uvicorn.server:serve - Started server process [15108]
INFO     2023-03-27 19:41:17.413 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:41:17.413 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 19:41:17.414 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 19:41:17.414 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:15:05.938 request id: app - uvicorn.server:serve - Started server process [7476]
INFO     2023-03-27 20:15:05.938 request id: app - uvicorn.server:serve - Started server process [7476]
INFO     2023-03-27 20:15:05.939 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:15:05.939 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:15:05.940 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:15:05.940 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:15:51.108 request id: app - uvicorn.server:serve - Started server process [16872]
INFO     2023-03-27 20:15:51.109 request id: app - uvicorn.server:serve - Started server process [16872]
INFO     2023-03-27 20:15:51.109 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:15:51.109 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:15:51.110 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:15:51.110 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:17:56.322 request id: app - uvicorn.server:serve - Started server process [18252]
INFO     2023-03-27 20:17:56.323 request id: app - uvicorn.server:serve - Started server process [18252]
INFO     2023-03-27 20:17:56.323 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:17:56.324 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:17:56.324 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:17:56.325 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:22:10.777 request id: app - uvicorn.server:serve - Started server process [14112]
INFO     2023-03-27 20:22:10.778 request id: app - uvicorn.server:serve - Started server process [14112]
INFO     2023-03-27 20:22:10.778 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:22:10.778 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:22:10.779 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:22:10.779 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:22:53.512 request id: app - uvicorn.server:serve - Started server process [14852]
INFO     2023-03-27 20:22:53.512 request id: app - uvicorn.server:serve - Started server process [14852]
INFO     2023-03-27 20:22:53.513 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:22:53.513 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:22:53.514 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:22:53.514 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:26:38.256 request id: app - uvicorn.server:serve - Started server process [7540]
INFO     2023-03-27 20:26:38.256 request id: app - uvicorn.server:serve - Started server process [7540]
INFO     2023-03-27 20:26:38.257 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:26:38.257 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:26:38.257 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:26:38.258 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:49:50.528 request id: app - uvicorn.server:serve - Started server process [4144]
INFO     2023-03-27 20:49:50.529 request id: app - uvicorn.server:serve - Started server process [4144]
INFO     2023-03-27 20:49:50.529 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:49:50.530 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:49:50.530 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:49:50.531 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:57:51.284 request id: app - uvicorn.server:serve - Started server process [11076]
INFO     2023-03-27 20:57:51.284 request id: app - uvicorn.server:serve - Started server process [11076]
INFO     2023-03-27 20:57:51.285 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:57:51.285 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:57:51.285 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:57:51.286 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:58:45.131 request id: app - uvicorn.server:serve - Started server process [19360]
INFO     2023-03-27 20:58:45.131 request id: app - uvicorn.server:serve - Started server process [19360]
INFO     2023-03-27 20:58:45.131 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:58:45.131 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2023-03-27 20:58:45.132 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2023-03-27 20:58:45.132 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
